# Muspi Merol https://muspimerol.site

> I am åº„æ¯…è¾‰, aka Muspi Merol[^nickname], an undergraduate at [BNUZ](https://www.bnuzh.edu.cn/ "åŒ—äº¬å¸ˆèŒƒå¤§å­¦ï¼ˆç æµ·æ ¡åŒºï¼‰") and [an opinionated open-source enthusiast](https://github.com/CNSeniorious000 "My GitHub Profile"). æˆ‘æ¥è‡ªä¸­å›½ï¼
>
> I am open for jobs. My ideal job would be a Product Manager / Full Stack Engineer / Sponsored Full-Time Open Source / Technical Consultant. I value a **lively** and **passionate** atmosphere, cutting-edge technology, and I like **asynchronous** work. I am particularly interested in roles that allow me to work remotely and contribute to impactful projects. In addition, I enjoy collaborating with teams and engaging in continuous learning. If you are interested in my profile, please feel free to contact me via [email](mailto:me@promplate.dev).

[^nickname]: `Muspi Merol` is just the reverse of `Lorem Ipsum`, which means _a name of no meaning_.

## Posts / more like Random Thoughts (top 100/156)

# [Astral ç»ˆäºä¹Ÿæ¥åˆ† pyright ä¸€æ¯ç¾¹äº†](/blog/rmrvdnsu90zgxl6i) (May 9)

ä»Šå¤©å‘ç°äº† [https://github.com/astral-sh/ty](https://github.com/astral-sh/ty)

ä»¥å‰å°±åœ¨æƒ³ï¼Œæ—¢ç„¶ ruff è‚¯å®šæœ‰ä¸€å¥— python AST çš„å·¥å…·ï¼Œå¹²å˜›ä¸ä¹Ÿåšä¸ª type checkerï¼Œä»Šå¤©å‘ç°è¿™ä¸ªé¡¹ç›®äº† å“ˆå“ˆå“ˆ å†²å†²å†² ç›¸ä¿¡ Astral æ¨å‡º å¿…æ˜¯ç²¾å“

![](/nlark/yuque/0/2025/png/26070246/1746903807980-e5f1120e-b576-4d8e-ae57-920d95225f0b.png)

# [è°ˆè°ˆæ¨ç†æ¨¡å‹çš„å±€é™](/blog/on-reasoning-models) (April 21)

æƒ³è±¡ä¸€ä¸‹ï¼Œç°åœ¨æœ‰ä¸€ä½**æ‹¿ç€çº¸ç¬”**çš„å°å­¦ç”Ÿå’Œä¸€ä¸ªå¤§å­¦ç‰²ï¼Œç«™åœ¨ LLMï¼ˆ**L**ots-of **L**earning **M**ankindï¼‰ Evaluation çš„èˆå°ä¸Šã€‚

> ç¬¬ä¸€é¢˜ï¼ŒèƒŒè¯µå¿«é€ŸçŸ©é˜µè¿ç®— [Strassen algorithm](https://en.wikipedia.org/wiki/Strassen_algorithm) çš„æ—¶é—´å¤æ‚åº¦
>

å°å­¦ç”Ÿå­¦è¿‡å¥¥æ•°ï¼ŒçŸ¥é“çŸ©é˜µä¹˜æ³•æ˜¯ä»€ä¹ˆï¼Œæ¨ç†è¯´ï¼ŒçŸ©é˜µä¹˜æ³•ä¹˜ nÂ² æ¬¡ï¼ŒåŠ  n æ¬¡ï¼Œé‚£æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(nÂ³)

å¤§å­¦ç”Ÿå­¦è®¡ç®—æœºçš„ï¼ŒèƒŒå‡ºäº†æ­£ç¡®ç­”æ¡ˆ O(N^{logâ‚‚(7)}) â‰ˆ O(N^2.8074)

> ç¬¬äºŒé¢˜ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ª 10Ã—10 çš„çŸ©é˜µï¼Œè¯·æ‰‹ç®—å…¶ç‚¹ç§¯ â€¦â€¦
>

å°å­¦ç”Ÿæ‹¿èµ·ç¬”å°±ä¸€è¡Œè¡Œç®—äº†èµ·æ¥ï¼Œå†™äº†å‡ å¼ çº¸ï¼Œæœ€åç»™å‡ºäº†æ­£ç¡®ç­”æ¡ˆ

å¤§å­¦ç‰²åªèƒ½å¿ƒç®—ï¼Œå¥ˆä½• Attention ä¸å¤Ÿï¼Œæœ€ååªå¥½æ”¾å¼ƒï¼Œè¯´â€œå¯¹ä¸èµ·ï¼Œæˆ‘ä¸èƒ½å¸®ä½ è®¡ç®—çŸ©é˜µä¹˜æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ numpy è¿›è¡Œè®¡ç®—ï¼Œé¦–å…ˆå¦‚æœæ²¡æœ‰å®‰è£… numpyï¼Œå…ˆåœ¨ç»ˆç«¯ä¸­è¾“å…¥ `pip install numpy`â€¦â€¦â€

---

ä¸Šé¢æ˜¯å¼•å…¥ ğŸ¤£ ä½†å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚

ä¸‰æœˆä¸‹æ—¬ï¼ŒAnthropic çš„ AI å¿ƒç†å­¦æ–‡ç«  [Tracing the thoughts of a large language model](https://www.anthropic.com/research/tracing-thoughts-language-model) å‡ºæ¥ä¹‹åï¼Œå¤§å®¶å¼€å§‹åæ€æ¨ç†æ¨¡å‹ï¼ˆreasoning modelsï¼‰çš„æ¨ç†å†…å®¹ï¼Œæ˜¯å¦çœŸçš„æœ‰ç”¨

ä» benchmark ä¸Šçœ‹æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå°çš„æ¨ç†æ¨¡å‹èƒ½æ¯”å¤§å¾—å¤šçš„éæ¨ç†æ¨¡å‹æé«˜æ•°å€çš„åˆ†æ•°ã€‚åŠ ä¸Šéœ‡æƒŠä¸–ç•Œçš„ R1 å‘Šè¯‰å¤§å®¶è®­ç»ƒæ¨ç†æ¨¡å‹åªè¦ RL å°±å¯ä»¥äº†ï¼Œå¤§å®¶å¯¹ test-time scaling çš„çƒ­æƒ…ä¸€ç›´é«˜å±…ä¸ä¸‹ã€‚

[QwQ 32b](https://huggingface.co/Qwen/QwQ-32B) è‡ªç§°åœ¨å¤šé¡¹ä»»åŠ¡ä¸Šè¶…è¶Š R1ï¼Œæˆ‘ä¹Ÿå¾ˆå¿ƒåŠ¨ã€‚ä½†æ˜¯ä½¿ç”¨ä¸‹æ¥çœ‹ï¼Œå…¶å®å·®è¿œäº†ã€‚ä½†å½“æ—¶åªè§‰å¾—å¾ˆè´¹è§£ï¼Œè¿˜æ²¡èƒ½è§£ï¼Œå°±å…ˆæŠŠè¿™ä¸ªé—®é¢˜æç½®äº†

å‡ å¤©å‰æ”¶åˆ° GitHub Copilot æ”¶åˆ°ä¸€å°å¹¿å‘Šé‚®ä»¶ [Which AI model should I use with GitHub Copilot](https://github.blog/ai-and-ml/github-copilot/which-ai-model-should-i-use-with-github-copilot/)ï¼Œå°±åˆå¼€å§‹æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚å›æƒ³èµ·å‰æ®µæ—¶é—´ Grok 3 ç»ˆäºä¸Š API äº†ï¼Œæ–‡æ¡£é‡Œæåˆ°ï¼š

> [**When to Use Reasoning**](https://docs.x.ai/docs/guides/reasoning#reasoning)
>
> Use `grok-3-mini` for tasks that can benefit from logical reasoning (such as meeting scheduling or math problems). Also great for tasks that don't require deep domain knowledge about a specific subject (eg basic customer support bot).
>
> Use `grok-3` for queries requiring **deep domain expertise** or **world knowledge** (eg healthcare, legal, finance).
>

å¿½ç„¶æƒ³é€šäº†ã€‚æ¨ç†æ¨¡å‹å¢å¼ºæ¨¡å‹èƒ½åŠ›çš„æ–¹æ³•ï¼Œå…¶ä¸­çœŸæ­£æé«˜æ¨¡å‹è¡¨ç°çš„éƒ¨åˆ†ï¼Œç›´ç™½æ¥è¯´å°±æ˜¯ **æŒ‰æ ¼å¼æ‰“è‰ç¨¿**ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ

+ ä¹˜æ³•è®¡ç®—çš„æ—¶å€™ï¼Œåˆ—ç«–å¼å°±æ˜¯æŒ‰æ ¼å¼æ‰“è‰ç¨¿
+ åšé—ä¼ é¢˜çš„æ—¶å€™ï¼ŒæŠŠæ¯ä¸ªäº²æœ¬å’Œå­ä»£çš„åŸºå› å‹ä¸€ä¸ªä¸ªæ¨å‡ºæ¥å°±æ˜¯æŒ‰æ ¼å¼æ‰“è‰ç¨¿
+ é«˜ä¸­æ•°å­¦å¯¼æ•°é¢˜ï¼Œæœ‰çš„é¢˜è¦é é€†å‘å»å‡‘çš„ï¼Œè¿™ç§å°±è¦çŒœï¼Œç„¶åå»å¦å®šå„ç§å¯èƒ½æ€§æ¥å¾—åˆ°ç­”æ¡ˆï¼Œè¿™äº›çŒœçš„ hypotheses å°±æ˜¯è‰ç¨¿
+ åšç¼–ç¨‹ç®—æ³•é¢˜çš„æ—¶å€™ï¼Œç¡®å®šæœ‰å“ªäº›çŠ¶æ€ï¼Œæ¯ä¸€æ­¥çŠ¶æ€ä¹‹é—´æ€ä¹ˆè½¬æ¢ï¼Œè¿™å°±æ˜¯æ‰“è‰ç¨¿

æ¨ç†æ¨¡å‹åœ¨ `<think>` çš„æ—¶å€™ï¼ŒçœŸæ­£æœ‰ç”¨çš„éƒ¨åˆ†å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ã€‚æ‰€è°“ å¼ºåˆ¶æ¨¡å‹è¯´â€œWait, ...â€å°±èƒ½æé«˜æ€§èƒ½ çš„å¥‡æŠ€æ·«å·§ï¼Œä¹Ÿå°±æ˜¯â€œéªŒç®—â€ã€‚æœ¬è´¨ä¸Šè·Ÿä¸Šé¢çš„è¿™å‡ ä¸ªä¾‹å­æ˜¯ä¸€ä¸ªé“ç†ã€‚

è¿™ç§éœ€è¦å½¢å¼åŒ–å¤šæ­¥æ¨ç†çš„ä¸œè¥¿ï¼Œæ˜¯æ¨¡å‹æœ¬èº«èƒ½åŠ›å†å¼ºä¹Ÿåªæ˜¯èƒŒé¢˜ã€‚çœ‹æˆ‘åšå®¢çš„äººåº”è¯¥è‡³å°‘éƒ½ä¸Šè¿‡é«˜ä¸­ï¼ŒçŸ¥é“èƒŒé¢˜æ˜¯æ²¡ç”¨çš„ã€‚æœ‰ç”¨çš„æ˜¯å­¦ä¼šä»€ä¹ˆé¢˜è¦ç”¨ä»€ä¹ˆâ€œæ ¼å¼åŒ–è‰ç¨¿â€æ¥æ¨ã€‚**æ‰€ä»¥é«˜ä¸­è€å¸ˆç»å¸¸è¯´é«˜è€ƒé åŠªåŠ›ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ç®¡ä½ æ˜¯ 671b åŸºåº§çš„ **[**DeepSeek R1**](https://huggingface.co/deepseek-ai/DeepSeek-R1)** è¿˜æ˜¯ 9b åŸºåº§çš„ **[**GLM Z1**](https://huggingface.co/THUDM/GLM-Z1-9B-0414)**ï¼Œåªè¦ä½ æ„¿æ„å­¦æ€ä¹ˆæ‰“è‰ç¨¿ï¼Œä½ ä»¬å°±éƒ½åœ¨åŒä¸€ä¸ªèµ·è·‘çº¿ä¸Š**

![](/nlark/yuque/0/2025/png/26070246/1745235825966-111d3852-c353-469e-94a2-a4d15e6ddda4.png)

Grok 3 ç³»åˆ— æœ‰ä¸€ä¸ªä¾¿å®œ 30 å€çš„å°çš„ç‰ˆæœ¬ï¼Œæ›´å¿«ã€æ›´ä¾¿å®œã€æ›´ä¼šåšé¢˜ã€‚è¿™å°±æ˜¯å°å­¦ç”Ÿã€‚å°å­¦ç”Ÿå›ºç„¶æœ‰ç”¨ï¼Œ**ä½†å¤§å®¶ä¸èƒ½åªå¹å°å­¦ç”Ÿåˆ†å¤šé«˜ï¼Œä¹Ÿè¦çœ‹åˆ°å°å­¦ç”Ÿä¸æ“…é•¿åšä»€ä¹ˆã€‚**

ç°åœ¨çœ‹æ¥ï¼Œå°å­¦ç”Ÿå°¤å…¶æ“…é•¿åš é€»è¾‘é¢˜ã€æ•°å­¦é¢˜ã€ç¼–ç¨‹ è¿™äº›æ–¹é¢ï¼Œä½†æˆ‘è§‰å¾—å…¶å®è¿˜æ˜¯å°‘çš„ã€‚å¾ˆå¤šåˆ«çš„åœºæ™¯ï¼Œå…¶å®ä¹Ÿå¯ä»¥â€œæ‰“è‰ç¨¿â€ï¼Œä½†æ˜¯ç°åœ¨æ¨¡å‹å¹¶æ²¡æœ‰å­¦ä¼šè¿™äº›è‰ç¨¿ã€‚æˆ‘è®¤ä¸ºè¿™äº›è‰ç¨¿å¾ˆå…³é”®ã€‚

---

ä¸€äº›è¿›ä¸€æ­¥çš„çŒœæµ‹ï¼š

R1 è®ºæ–‡é‡Œè¯´ï¼Œä»–ä»¬å» RL çš„æ—¶å€™å°±ç”¨äº† ç­”æ¡ˆæ­£ç¡®ä¸å¦ã€CoT é•¿åº¦ è¿™ä¸¤ä¸ª reward å‡½æ•°ã€‚æŒ‰ç…§æˆ‘ä¸Šé¢çš„æ¯”å–»æ¥çœ‹ï¼Œæ¨ç†å†…å®¹ï¼ˆä¹Ÿå°±æ˜¯è‰ç¨¿ï¼‰æ˜¯å¦**æŒ‰æ ¼å¼**ï¼Œæ˜¯ä¸€ä¸ªæ›´å¥½çš„ rewardã€‚ä½†ææ€•æˆ‘è¿™ä¸¤ä¸ªæœˆæ²¡é‚£ä¹ˆå¤šæ—¶é—´è‡ªå·±æ¨è¿›è¿™äº›äº†ï¼ˆæˆ‘æœ‰æ¯•è®¾å’Œæ¯”èµ›ï¼Œè¿˜æœ‰å„ç§æ´»ğŸ˜­ï¼‰

# [å…³äº feed çš„ä¸€äº›æƒ³æ³•](/blog/qxsn64cw84tmg8w3) (April 17)

ä»Šå¤©æƒ³åˆ°ä¸¤ä¸ªå…³äº feed çš„äº§å“çš„ç‚¹å­ã€‚



ç—›ç‚¹æ˜¯ï¼Œç”Ÿæ´»ä¸­æ€»è¦æµè§ˆå¾ˆå¤šâ€œè®¢é˜…â€ç±»äº§å“ã€‚æ— è®ºæ˜¯æˆ‘è®¢é˜…çš„å…¬ä¼—å·ã€æœ‹å‹åœˆã€å„ç§äº¤æµç¾¤ã€æˆ‘è®¢é˜…çš„å„ç§ rss æºã€ç”šè‡³å„ç§ app å†…çš„æ¨èç­‰ç­‰ã€‚æ¯å¤©éƒ½è¦èŠ±å¾ˆå¤šæ—¶é—´åœ¨åˆ·è¿™äº›ä¸œè¥¿ã€‚

ä¸åˆ·ä¸è¡Œï¼Œå› ä¸ºå¯èƒ½ä¼šé”™è¿‡ä¸€äº›æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼ˆå¯èƒ½å  5%ï¼‰ï¼Œä½†æ˜¯åˆ·çš„æ—¶å€™å¾ˆå¤šæ—¶é—´éƒ½åœ¨é‡å¤åŠ³åŠ¨ã€‚æ¯”å¦‚ç­‰åŠ è½½ï¼Œæ¯”å¦‚æŸ¥å•è¯ï¼Œæ¯”å¦‚æ‰‹åŠ¨åœ¨å„ç§é¡µé¢å’Œappè¾—è½¬ã€‚



**ç®€å•æ¥è¯´å°±æ˜¯â€œä¸æƒ³é”™è¿‡â€å’Œâ€œåˆ·å®Œå¤ªèŠ±æ—¶é—´â€çš„çŸ›ç›¾ã€‚ä½†è¿™ä¸ªçŸ›ç›¾å…¶å®ä¸å¿…æœ‰ã€‚**

å› ä¸ºåˆ·çš„è¿‡ç¨‹å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ä¸éœ€è¦è„‘å­çš„ã€‚ä¸éœ€è¦è„‘å­å°±ä»¥ä¸ºç€å¯ä»¥è®© AI æ›¿ä½ åšã€‚



æ­£å¥½è¿™å­¦æœŸåœ¨åšä¸€äº›é€šç”¨ app è‡ªåŠ¨åŒ–ï¼ˆå‚è€ƒ AutoGLMï¼‰ï¼Œæˆ‘ä¹Ÿä¸€ç›´åœ¨ç”Ÿæ´»ä¸­æœé›†å¯ä»¥è‡ªåŠ¨åŒ–çš„ä¸€äº›åœ°æ–¹ï¼ˆå¯ä»¥è®© AI ä»£æ›¿ä½ æ“ä½œæ‰‹æœºï¼Œå¸®ä½ å®Œæˆçš„äº‹ï¼‰ã€‚å½“ç„¶ç”±äº AI ä¸å¤Ÿèªæ˜ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåªèƒ½æ˜¯ä¸€äº›è§„åˆ™ç±»çš„ï¼Œä¸éœ€è¦ä»€ä¹ˆâ€œä¸»è§‚â€åˆ¤æ–­çš„ä¸œè¥¿ã€‚æˆ‘è§‰å¾—è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚



æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯æˆ‘è§‰å¾—è¿™æ ·çš„äº§å“æ˜¯å®Œå…¨å¯è¡Œä¸”è‡³å°‘å¯¹æˆ‘æœ‰ç”¨çš„ï¼ˆå…¶å®æœ‰ç‚¹ç±»ä¼¼ iOS çš„é€šçŸ¥æ‘˜è¦ï¼‰ï¼š

1. å¸®æˆ‘æ“ä½œæ‰‹æœºï¼Œå®šæ—¶åˆ·æ¶ˆæ¯åˆ·æœ‹å‹åœˆåˆ·è®¢é˜…å·ï¼ŒæŠŠå†…å®¹è®°å½•ä¸‹æ¥
2. åŸºäºä¸€äº›æ¨¡ç³Šçš„è§„åˆ™åšåŸºæœ¬çš„ç­›é€‰ï¼ˆæ¯”å¦‚ä¸è¦çº¯å¹¿å‘Šï¼‰æˆ–åˆ†ç±»ï¼ˆæ¯”å¦‚è®¨è®ºä»€ä¹ˆäº§å“çš„æ˜¯ä¸€ç±»ï¼Œè®¨è®ºä»€ä¹ˆç¤¾ä¼šäº‹ä»¶çš„æ˜¯ä¸€ç±»ï¼‰
3. å¯¹æ¯æ¡ä¿¡æ¯åšä¸€äº›æµ…çš„æ¢ç´¢ï¼Œç»™æ¯æ¡æ¶ˆæ¯ä¸€äº›å…ƒæ•°æ®ã€‚æ¯”å¦‚å¦‚æœæ˜¯é¡¹ç›®å¯ä»¥ç»™å‡º demoã€ä»“åº“ã€æ–‡æ¡£ã€æŠ€æœ¯æ ˆç­‰ã€‚æ¯”å¦‚å¦‚æœæ˜¯è‹±æ–‡å¯ä»¥é¢„å…ˆå¸®æˆ‘ç¿»è¯‘ï¼Œæ¯”å¦‚å¦‚æœæ˜¯å¼€æºè½¯ä»¶å¯ä»¥å¸®æˆ‘æ‰¾ä¸€ä¸ªæœ€å°çš„å¯è¿è¡Œçš„ snippets

è¿™å…¶å®å¯ä»¥æ‹†æˆä¸¤ä¸ªäº§å“æ¥åšï¼Œä¸€ä¸ªå°±æ˜¯çº¯ç²¹çš„è‡ªåŠ¨æ“ä½œæ‰‹æœºæŠŠå„ç±» app å˜æˆ feedï¼Œä¸€ä¸ªå°±æ˜¯åœ¨ feed çš„åŸºç¡€ä¸Šåšå¤„ç†ã€‚å³ä½¿æ²¡æœ‰ç¬¬ä¸€ä¸ªäº§å“ç¬¬äºŒä¸ªä¹Ÿèƒ½åšï¼ˆå¯ä»¥ç”¨ä¸€äº›ç°æˆçš„ feedï¼‰ã€‚

# [è§£å†³ Dependabot ç”Ÿæˆ broken uv.lock çš„é—®é¢˜](/blog/kd8rm20e8w5fo0rf) (April 13)

æ˜¨å¤©æˆ‘åœ¨ Dependabot çš„ uv æ”¯æŒçš„ issue ä¸‹é¢å‘äº†ä¸€æ¡è¯„è®ºï¼š

[dependabot/dependabot-core#10478 Â· GitHub](https://github.com/dependabot/dependabot-core/issues/10478#issuecomment-2798746196)

èµ·å› æ˜¯ï¼ŒDependabot æœ€è¿‘æ”¯æŒæ›´æ–° uv çš„ lockfile äº†ï¼Œä½†æ˜¯æ”¯æŒçš„å¾ˆä¸å¥½ï¼Œæ€»æ˜¯ä¼šç»™å‡º broken çš„ lockfileï¼Œå¤§å®¶å°±éƒ½åœ¨ä¸‹é¢æŠ±æ€¨ã€‚å¾ˆæç¬‘çš„æ˜¯ï¼Œå¤§å®¶ä¸çŸ¥é“æ˜¯ä¸æ˜¯æ²¡çœ‹å‡ºæ¥å…¶å®éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ï¼Œè¿˜æ˜¯æƒ³å€Ÿæ­¤æœºä¼šç»™è‡ªå·±çš„é¡¹ç›®æ‰“å¹¿å‘Šï¼Œå¾ˆå¤šäººåœ¨è¯„è®ºä¸­é™„ä¸Šè‡ªå·±çš„é¡¹ç›®çš„ CI æ—¥å¿—ï¼Œå³ä½¿è¿™äº›éƒ½æ˜¯é‡å¤çš„

æˆ‘æ˜¨å¤©çš„è¯„è®ºï¼Œå°±æ˜¯åœ¨æƒ³ï¼Œæ—¢ç„¶æˆ‘æœ¬åœ°æ˜¯å¯ä»¥ä¿®å¤ï¼ˆé‡å»ºï¼Ÿï¼‰è¿™ä¸ª lock æ–‡ä»¶çš„ï¼Œé‚£æˆ‘ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ GitHub Actions é‡Œè¿è¡Œï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½åœ¨ Dependabot æ‰“å¼€ä¸€ä¸ª PR çš„æ—¶å€™è‡ªåŠ¨åœ°è§¦å‘ä¿®å¤ï¼Ÿ

ç„¶åæˆ‘å°±è·Ÿ LLM ç®€è¦æè¿°äº†ä¸‹ï¼Œç¨åŠ ä¿®æ”¹å°±æˆäº†ã€‚

```yaml
name: Fix uv.lock for Dependabot

on:
  push:
    branches:
      - "dependabot/uv/**"
  workflow_dispatch:

jobs:
  update-lockfile:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          ref: ${{ github.ref }}
      - name: Set up Python
        uses: astral-sh/setup-uv@v5
        with:
          python-version: 3.12
      - name: Fix lockfile
        run: uv sync
      - name: Commit and push uv.lock if changed
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'

          # Check if uv.lock was modified or created
          if git diff --quiet --exit-code uv.lock; then
              echo "uv.lock is up-to-date."
          else
              echo "uv.lock changed, committing updates."
              git add uv.lock
              git commit -m "fix `uv.lock` after dependency update"
              git push origin HEAD:${{ github.ref_name }}
          fi
```

å½“ç„¶ï¼Œè¿˜æ˜¯æˆ‘ä¸€ç›´ä»¥æ¥çš„è§‚ç‚¹ï¼š

**LLM è¾…åŠ©ç¼–ç çš„ä¸Šé™æ˜¯ä½ çš„èƒ½åŠ›**

æ¯”å¦‚æˆ‘æœ‰ä¸€äº›ç¢°å£çš„ç»å†ï¼Œè®©æˆ‘çŸ¥é“ï¼š

+ æäº¤åˆ°`github.ref`ä¼šå¯¼è‡´ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„ bugï¼ŒGitHub ä¼šä»¥ Dependabot çš„èº«ä»½æŠŠä½ çš„é‚£ä¸ª ref merge è¿‡æ¥ã€‚è™½ç„¶æˆ‘ä¸Šé¢çš„ä»£ç ä¸­æœ€åæ˜¯æäº¤åˆ°`github.ref_name`ï¼Œä½†è¿™æ˜¯æˆ‘æ”¹çš„ï¼ŒLLM ç”Ÿæˆçš„ä¸æ˜¯è¿™æ ·
+ LLM å¿˜è®°äº†`permissions: { contents: write }`
+ LLM  è®©æˆ‘åœ¨ job é‡Œçš„`if:`è¯­å¥ä¸­åˆ¤æ–­æ˜¯ä¸æ˜¯ Dependabot çš„è¯·æ±‚ã€‚äº‹å®ä¸Šåœ¨`on:`ä¸­å» filter æ›´å¥½

### é²æ£’åœ°ç¼–ç 
æˆ‘è§‰å¾—è¿‡äº†è¿™ä¹ˆä¹…ï¼Œæˆ‘ç°åœ¨å‘ç°æˆ‘æœ‰ä¸€ä¸ªç»éªŒï¼Œå°±æ˜¯å°½é‡æŠŠä»£ç è§£è€¦åˆï¼Œå°±èƒ½è®© debug å®¹æ˜“å¾ˆå¤šã€‚

æ¯”å¦‚ï¼Œæˆ‘æœ‰çš„ä»£ç ï¼Œç»™æ¯ä¸ªå¹‚ç­‰çš„å‡½æ•°ç»“æœéƒ½ç”¨ [diskcache](https://github.com/CNSeniorious000/diskcache2) ç¼“å­˜ä¸‹æ¥ï¼Œè¿™æ ·è°ƒè¯•çš„æ—¶å€™å°±ä¼šå¿«å¾ˆå¤šï¼Œä¹Ÿä¼šä¾¿å®œå¾ˆå¤šï¼ˆå½“ä»£ç éœ€è¦ä¸€äº›LLMè¯·æ±‚æ—¶ï¼‰ã€‚è¿™ä¹Ÿä½¿å¾—å¤ç°æ›´å®¹æ˜“äº†ã€‚

å½“ç„¶ï¼Œç”¨ [hmr](/blog/mwgggl2taiigch6w) ä¼šæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒçš„ invalidate æ˜¯ on-demand çš„ï¼Œè€Œä¸”ä¸æ¶‰åŠé‡å¯è¿›ç¨‹ã€‚ä¸è¿‡ hmr 0.3 æˆ‘å¼•å…¥äº†ä¸€äº› bug åˆ°ç°åœ¨è¿˜æ²¡ä¿®å¤ å“ˆå“ˆå“ˆ

# [Don't Repeat Yourself](/blog/dont-repeat-yourself) (April 9)

[Don't repeat yourself (DRY)](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself) åŸåˆ™æ˜¯ä¸€é¡¹ä¸»å¼ ï¼Œæ”¯æŒåœ¨ä»£ç å‡ºç°é‡å¤çš„æ—¶å€™å°±è¿›è¡Œå°è£…ï¼Œå¢åŠ å¤ç”¨ã€‚æˆ‘æœ¬äººå¯¹è¿™ä¸ªè§‚ç‚¹æ˜¯éå¸¸æ”¯æŒå’Œè´¯å½»çš„ï¼Œç”šè‡³åˆ°äº†ä¸€ç§ï¼Œæˆ‘å¯¹å®ƒçš„å‰¯ä½œç”¨æ·±æœ‰ä½“ä¼šçš„åœ°æ­¥ã€‚é‚£å…ˆè¯´è¯´å®ƒæœ‰ä»€ä¹ˆå‰¯ä½œç”¨ï¼š

1. å¾ˆå¯èƒ½ä¸ºäº†å¤ç”¨éœ€è¦å†™æ›´å¤šçš„ä»£ç ã€‚æ¯”å¦‚ä¸ºäº†å¤ç”¨ä¸€ä¸ªä¸€è¡Œçš„ç®—å¼ï¼ŒèŠ±äº†ä¸‰å››è¡Œæ–°å»ºäº†ä¸€ä¸ªæœ‰ä¸‰å››ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä»£ç é‡ä¸å‡åå¢
2. è¿‡æ—©ä¼˜åŒ–ã€‚å¾ˆå¯èƒ½å°è£…å®Œä¹‹åå¾ˆå¿«åˆåˆ äº† / Ctrl Z å›å»äº†ï¼Œç™½ç™½æµªè´¹æ—¶é—´
3. æœ‰æ—¶å°è£…è¿‡å¤šä¼šé€ æˆ debug æ›´å›°éš¾

é‚£å®ƒæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿé™¤äº†å¤§å¤šæ•°æ—¶å€™èƒ½ç²¾ç®€ä»£ç ï¼Œæˆ‘è®¤ä¸ºè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ï¼Œå…¶å®æ˜¯ä¸ç”¨æ‹…å¿ƒåŒæ­¥çš„é—®é¢˜ã€‚ä¸€å¤„æ›´æ”¹ï¼Œæ¯ä¸ªç”¨åˆ°çš„åœ°æ–¹éƒ½ä¼šåŒæ­¥ã€‚



### ä»¥ bump version ä¸ºä¾‹
ä¸€ä¸ªä¾‹å­æ˜¯æŒ‡å®š versionã€‚ä¸åƒåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡`import { version } from "../package.json"`æ¥è·å¾—åŒ…çš„ç‰ˆæœ¬ï¼ŒPython ä¸­è¦è®©ç‰ˆæœ¬å·èƒ½åœ¨`pyproject.toml`ä¸­æœ‰ï¼ŒåŒæ—¶åœ¨ä»£ç ä¸­èƒ½è¯»å–ç•¥å¾®éº»çƒ¦ä¸€äº›ã€‚å¯èƒ½éœ€è¦èŠ±å‡ è¡Œé…ç½®ï¼Œæˆ–è€…è‡ªå·±ç”¨åæ¥è¡Œä»£ç æ¥å®ç°ã€‚

æœ‰çš„äººå¯èƒ½å°±ä¼šè§‰å¾—ï¼Œæ¯”èµ·æè¿™äº›ï¼Œæ›´æ„¿æ„æ¯æ¬¡ bump version çš„æ—¶å€™æ‰‹åŠ¨æ”¹è¿™ä¸¤ä¸ªåœ°æ–¹ã€‚å•çº¯ä»æ•°é‡ä¸Šæ¥çœ‹ï¼Œæ¯æ¬¡ bump version ä¹Ÿå°±æ”¹åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚é¿å…åœ¨`pyproject.toml`å’Œä»£ç ä¸­åŒæ—¶æ”¹ä¹Ÿå°±è®©æ¯æ¬¡å‡å°‘äº†ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸ºæ­¤èŠ±äº† 4 è¡Œä»£ç çš„è¯ï¼Œå‡è®¾è¡Œ 10 ä¸ªå­—ç¬¦ï¼Œé‚£è¦å‘ 40 ä¸ªç‰ˆæœ¬æ‰èƒ½èµšå›æ¥ã€‚

ä½†æˆ‘è®¤ä¸ºï¼Œäº‹å®ä¸Š repeating yourself çš„åå¤„ä¸åªæ˜¯è¦æ•²æ›´å¤šçš„ä»£ç ï¼Œè€Œä¸”åœ¨æ•´ä¸ªé“¾è·¯ä¸Šï¼ˆreviewã€blameã€debugâ€¦â€¦ï¼‰æ¯ä¸ªæ­¥éª¤éƒ½æ›´éº»çƒ¦ã€‚

è¿™äº›å¿ƒæ™ºä»£ä»·æ˜¯æ¯æ¬¡ bump version éƒ½è¦æ‹…è´Ÿçš„ã€‚æ‰€ä»¥ç›¸å½“äºæœ‰`O(n)`çš„å¤æ‚åº¦ã€‚è€Œé…ç½®è‡ªåŠ¨åŒæ­¥è¿™ä¸¤è€…ï¼Œæ˜¯`O(1)`çš„ã€‚è¿™å°±æ˜¯æˆ‘çš„ç†ç”±ã€‚



### lockfile çš„ä¾‹å­
æˆ‘çš„é¡¹ç›®æœ‰ä¸€ç‚¹å’Œä¸»æµå”±åè°ƒçš„åœ°æ–¹ï¼Œå°±æ˜¯**æˆ‘ä¸å–œæ¬¢æŠŠ lockfile æäº¤åˆ°ä»“åº“ä¸­**ã€‚å°½ç®¡ lockfile çº³å…¥ version control ç®—æ˜¯è¡Œä¸šå…±è¯†äº†ï¼Œæˆ‘è¿˜æ˜¯ä¸å–œæ¬¢è¿™æ ·ã€‚æˆ‘ç›´è§‚åœ°æœ‰è¿™äº›ç†ç”±ï¼š

1. å¾ˆå¤§ï¼Œä»¥è‡³äºä»“åº“çš„å¤§å°ç®€ç›´å°±æ˜¯ lockfile çš„å¤§å°
2. diff å¾ˆå¤šï¼Œç›´æ¥è®©æ¯ä¸ª PR çš„å¤§å°æ²¡æ³•ç›´è§‚åœ°é€šè¿‡è¡Œæ•°æ¥çœ‹äº†ã€‚è€Œä¸”æœ‰æ—¶å€™ä¼š conflict
3. ä¼šæä¹± GitHub çš„ Inspect é¡µé¢ä¸­å¯¹ä¸åŒè´¡çŒ®è€…çš„å¯¹æ¯”ï¼Œå› ä¸ºä¸€ä¸ª lockfile å¾€å¾€æ¯”æ•´ä¸ªé¡¹ç›®çš„å…¶å®ƒä»£ç éƒ½å¤šå¥½å‡ å€ã€‚æˆ‘çœ‹è¿‡ä¸€äº›é¡¹ç›®ï¼ŒDependabot æ’åœ¨ç»´æŠ¤è€…å¤´åƒçš„å‰é¢ã€‚å› ä¸ºå®ƒå¯¹ä»“åº“çš„è´¡çŒ®ï¼ˆç”±è¡Œæ•°ç»Ÿè®¡ï¼‰æ›´å¤§
4. æŸäº›åŒ…ç®¡ç†å™¨ï¼ˆæ¯”å¦‚ [pdm](https://pdm-project.org/en/latest/usage/lock-targets/)ï¼‰ä¸»å¼ å¹³å°ç‰¹å®šçš„ lockfileï¼Œæˆ‘ä¸æ•¢è‹ŸåŒ

è¿˜æœ‰ä¸€ä¸ªå’Œ DRY åŸåˆ™ç±»ä¼¼çš„åŸå› ï¼š

5. å¯èƒ½ä¼šå¿˜è®°æ›´æ–° lockfileï¼Œæ‰€ä»¥é€ æˆäº† `O(1)` çš„è®¤çŸ¥å¤æ‚åº¦

å½“ç„¶å“ˆï¼Œå…¶å®è¿™äº›é—®é¢˜è‚¯å®šéƒ½æœ‰è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥æ‰‹åŠ¨å»æ‰ lockfile å†ç»Ÿè®¡è¡Œæ•°ï¼Œæ¯”å¦‚ lockfile çš„æ›´æ–°å¯ä»¥æ”¾åˆ° pre-commit ä¸­å»è‡ªåŠ¨åŒ–ã€‚ä½†æ˜¯ç»ˆç©¶è¿˜æ˜¯ä¸æ–¹ä¾¿ã€‚æœ€å

6. æˆ‘é€‰æ‹©**ä¿¡ä»»**ã€‚æˆ‘çº³å…¥ä¸º dependencies çš„é¡¹ç›®ä¸€å®šéƒ½æ˜¯æˆ‘é€‰æ‹©å‡ºæ¥çš„é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®æˆ‘ç›¸ä¿¡ä»–ä»¬ä¼šé‡‡ç”¨ SemVerï¼Œæ‰€ä»¥æˆ‘åœ¨é¡¹ç›®å…ƒæ–‡ä»¶ï¼ˆpackage.json / pyproject.toml / Cargo.tomlï¼‰ä¸­é”å®šå¥½é¡¹ç›®ä¾èµ–ï¼Œå°±è¶³å¤Ÿäº†



### è®¤çŸ¥å¤æ‚åº¦
çªç„¶è‡ªåˆ›äº†è¿™ä¸ªè¯ï¼Œæˆ‘ä¹Ÿå¾ˆæƒŠè®¶å“ˆå“ˆã€‚é‚£æ­£å¥½å°±è°ˆä¸€è°ˆæˆ‘çš„è¿™ä¸ªçœ‹æ³•å§ã€‚

> ä¸¾ä¸€ä¸ªä¾‹å­ï¼šæˆ‘ä¸€ç›´çœ‹å¥½ Rustï¼Œæ˜¯å› ä¸ºæˆ‘è§‰å¾—è¿™æ ·çš„ä¸€ä¸ªåº•å±‚è¯­è¨€æ‰æ˜¯ä¸€ä¸ªæˆç†Ÿçš„åº•å±‚è¯­è¨€ã€‚å®ƒæœ‰åŒ…ç®¡ç†ã€æœ‰é«˜çº§çš„æŠ½è±¡ï¼ˆæœ‰ typing çš„å®ï¼‰ï¼Œä½¿å¾—å®ƒåœ¨é¡¹ç›®é•¿å¤§çš„æ—¶å€™èƒ½ç»´æŒè®¤çŸ¥å¤æ‚åº¦
>

æˆ‘è§‰å¾—å°±åƒè¡¡é‡ä¸€ä¸ªç®—æ³•å¯¹æŸä¸ªä»»åŠ¡å¯ä¸å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ã€‚æˆ‘è®¤ä¸ºä¸€ä¸ªé¡¹ç›®èƒ½å¦åšä¸‹å»ï¼Œå¯ä»¥ç”¨è®¤çŸ¥å¤æ‚åº¦ã€‚

æˆ‘è¿™é‡Œçš„å®šä¹‰å°±æ˜¯æ˜¯ï¼Œè¡¡é‡**è®¤çŸ¥å‹åŠ›**éš**é¡¹ç›®å¤§å°**çš„å¢é•¿è€Œå¢é•¿çš„å€ç‡ã€‚è¿™ä¸ªè‡ªå˜é‡å’Œå› å˜é‡éƒ½æ˜¯å¾ˆæŠ½è±¡çš„ï¼Œæ‰€ä»¥æˆ‘æ‰€è¯´çš„ä¹Ÿéƒ½æ˜¯å®šæ€§çš„ç»“è®ºâ€”â€”ç”šè‡³ä¸èƒ½ç®—ç»“è®ºï¼Œåªèƒ½ç®—æ€è€ƒã€‚

+ æ¯”å¦‚ï¼Œå¦‚æœæŸä¸ªæ”¹å˜ï¼Œä½¿å¾—ä¹‹åæ¯æ¬¡æäº¤ä»£ç éƒ½è¦èŠ±æ—¶é—´ä¸€å®šè€ƒè™‘æŸä»¶äº‹ï¼Œè¿™ç›¸å½“äºæ˜¯`O(n)`çš„å¤æ‚åº¦ã€‚ä¸€ä¸ªä¾‹å­æ˜¯å‰é¢æåˆ°çš„ versioningï¼Œä¸€ä¸ªæ›´å¥½çš„ä¾‹å­å¯ä»¥æ˜¯ i18n â€”â€” ä¸€æ—¦ä½ çš„é¡¹ç›®ä¸Šäº† i18n ä»æ­¤ä½ æ¯æ¬¡æ›´æ–°æ–‡æ¡£ï¼Œéƒ½å¾—æ›´æ–°æ¯ä¸ªè¯­è¨€çš„æ–‡æ¡£
+ å¦‚æœæŸä¸ªæ”¹å˜ä½¿å¾—ä¹‹åæ¯æ¬¡æäº¤è¦åšæ›´å¤šçš„è€ƒè™‘ï¼Œç”šè‡³è¿™ä¸ªè€ƒè™‘çš„å¢é‡ä¹Ÿä¼šéšç€ä»“åº“çš„å¢å¤§è€Œå¢å¤§ï¼Œé‚£è¿™ç›¸å½“äºæ˜¯`O(nÂ²)`çš„å¤æ‚åº¦ã€‚æ¯”å¦‚æ–‡æ¡£ã€‚ä»¥å‰ç«¯æ¡†æ¶ Astro ä¸ºä¾‹ã€‚Astro çš„æ–‡æ¡£åšå¾—å¾ˆå¥½ï¼Œä»¥è‡³äºå®ƒéœ€è¦æœ‰ä¸€ä¸ªæ–‡æ¡£æ¥æŒ‡å¯¼å¼€å‘è€…ç»´æŠ¤æ–‡æ¡£ã€‚ä»–ä»¬æŠŠè¿™ä¸ªâ€œå…ƒæ–‡æ¡£â€å«åš [Astro Docs Docs (ADÂ²)](https://contribute.docs.astro.build/)

å½“ä¸€ä¸ªé¡¹ç›®å¼•å…¥äº†è®©è®¤çŸ¥å¤æ‚åº¦å¢é•¿çš„æ”¹åŠ¨ä¹‹åï¼Œå®ƒçš„å¼€å‘æ•ˆç‡å°±ä¼šå¤§å¤§é™ä½ã€‚æ‰€ä»¥ï¼Œæˆ‘çš„åŸåˆ™æ˜¯ï¼Œå°½é‡ä¸è¦åœ¨ä¸€ä¸ªé¡¹ç›®çš„ actively developing é˜¶æ®µå¼•å…¥è¿™æ ·çš„æ”¹åŠ¨ï¼ˆé™¤éä½ å¸å¼•åˆ°äº†å¢é•¿çš„ç»´æŠ¤è€…ç¾¤ä½“ï¼‰



### å¼±ä¸»å¼ 
ä¸ºä»€ä¹ˆä»Šå¤©çªç„¶æƒ³å†™è¿™ä¸ªä¸»é¢˜ï¼Œå› ä¸ºæˆ‘å‘ç°å…¶å®æˆ‘æœ‰æ—¶å€™ä¹Ÿä¼šå¯¹ DRY åŸåˆ™åšä¸€äº›å¦¥åï¼Œä»–ä»¬å…¶å®æ˜¯ä¸€è„‰ç›¸æ‰¿çš„ã€‚DRY åƒæ˜¯ä¸€ä¸ªâ€œå¼ºä¸»å¼ â€ï¼Œè¦æ±‚æ°¸è¿œä¸ repeat yourselfã€‚ä½†æˆ‘åœ¨ä¸€äº›åœºæ™¯ä¸èƒ½æ‹’ç» lockfile å¸¦æ¥çš„å¥½å¤„ï¼Œæ¯”å¦‚ [pyodide-minimal-reproduction](https://github.com/CNSeniorious000/pyodide-minimal-reproduction) æ˜¯æˆ‘å†™ç»™ pyodide çš„ä¸€ä¸ª [stackblitz](https://stackblitz.com/) reproduction templateï¼Œæ–¹ä¾¿äººä»¬ç»™ [pyodide](https://github.com/pyodide/pyodide) æäº¤ bug reproductionã€‚æˆ‘å¸Œæœ›ç”¨æˆ·åœ¨ stackblitz çš„ç¯å¢ƒä¸­å°½å¯èƒ½å¿«åœ°å®‰è£…ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸ª [GitHub Action](https://github.com/CNSeniorious000/pyodide-minimal-reproduction/blob/59bf925d7985da5044d0341999a69ae9995200c9/.github/workflows/ci.yml#L71-L96) ç»™æ¯ä¸ªåˆ†æ”¯æäº¤ä¸€ä¸ª`<åŸåˆ†æ”¯å>-locked`åˆ†æ”¯ï¼ŒåŒ…å«ä¸€ä¸ªç”Ÿæˆçš„`pnpm-lock.yaml`æ–‡ä»¶ã€‚

è¿™å°±æ˜¯æˆ‘æå‡ºçš„å¼±åŒ–ç‰ˆ DRY åŸåˆ™ â€”â€” **ä½ ä¸è¦è‡ªå·± repeat yourselfï¼Œä½†ä¸åå¯¹è®© bots æ¥ repeat ä½ **ã€‚

å¦ä¸€ä¸ªä¾‹å­å°±æ˜¯è®© Dependabot / [Renovate](https://docs.renovatebot.com/) è¿™äº› bots æ¥æ›´æ–°ä¾èµ–ã€‚





---

å…¶å®æœ‰çš„æ—¶å€™ï¼ŒæŸä¸ªé¡¹ç›®çš„ä¾èµ–æˆ‘ä¸ä¿¡ä»»ï¼Œæˆ–è€…æˆ‘å¯èƒ½è¦ä¸å†ç»´æŠ¤äº†ï¼Œæˆ‘å¸Œæœ›å®ƒåœ¨æœªæ¥è¿˜èƒ½è¢«å¤ç°ï¼Œæˆ‘ä¹Ÿä¼šæŒ‰ç…§å¸¸è§„çš„æ–¹æ³•åœ¨ä»“åº“é‡Œç»´æŠ¤ä¸€ä¸ª lockfileã€‚æˆ‘ä¹Ÿæ·±å—å…¶åˆ©ã€‚ä½†è¿™äº›é¡¹ç›®æˆ‘ä»å†…å¿ƒä¼šè§‰å¾—å®ƒâ€œè„äº†â€ï¼Œä¸å†æ˜¯é‚£ä¹ˆä¼˜é›…äº†ã€‚å“ˆå“ˆå“ˆ

# [Python venv injection](/blog/xyvll3enobqm18ug) (April 3)

å¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„ä¸€ç§æƒ…å†µï¼š

+ **ä½ çš„ä¸€ä¸ªåº“**ï¼Œè¦è¿è¡Œä¸€äº›ç”¨æˆ·çš„ python çš„ä»£ç æ–‡ä»¶ã€‚

> å¯¹æˆ‘ä¸ªäººæ¥è¯´ï¼Œæˆ‘åœ¨ 3 ç§æƒ…å†µä¸­é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š
>
> + [m](./kya1tmyz86lsyaae) è¿™ä¸ªåº“ï¼Œæ”¯æŒæ³¨å†Œ pluginï¼Œplugin å°±æ˜¯åœ¨å½“å‰ç›®å½•æˆ–ä»»ä½•`sys.path`ä¸­çš„ç›®å½•åˆ›å»º m/commands æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢çš„æ–‡ä»¶å¤¹æš´éœ²ä¸€ä¸ª appã€‚è¿™é‡Œé¢çš„ä»£ç ä¼šè¢«æš´éœ²ä¸ºä¸€ä¸ª entry point
> + [hmr](./yfw3tf2h1mzghaz7) è¿™ä¸ªåº“ï¼Œä¼šè¿è¡Œç”¨æˆ·çš„æ–‡ä»¶ï¼Œå…¶è¡ç”Ÿå“`uvicorn-hmr`ä¼šæ‰§è¡Œç”¨æˆ·çš„æŸä¸ª entry point
> + [embed](https://github.com/embed-ai/embed) è¿™ä¸ªåº“ï¼Œä¼šæ‰§è¡Œç”¨æˆ· pull ä¸‹æ¥çš„ appï¼Œè¿™ä¸ª app å¯èƒ½æœ‰å•ç‹¬çš„è™šæ‹Ÿç¯å¢ƒ
>

æœ€ç®€å•çš„è§£å†³åŠæ³•å°±æ˜¯è¯»è¿›æ¥`exec`å¯¹å§ï¼Œå½“ç„¶ä½ æœ‰ç‚¹ç»éªŒçš„è¯å°±çŸ¥é“è¿™æ ·å¯¹ traceback ä¸å‹å¥½ã€‚æ¯”è¾ƒæ­£ç¡®çš„åŠæ³•æ˜¯ç”¨`runpy.run_path`

ä½†æ˜¯è¿˜ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š

+ ç”¨æˆ·å¦‚æœè¿™ä¸ªæ–‡ä»¶ç”¨åˆ°ä¸€äº›åŒ…ï¼Œè€Œè¿™äº›åŒ…ä¸åœ¨ä½ **å®‰è£…ä½ è¿™ä¸ªåº“**çš„ç¯å¢ƒä¸­ï¼Œå¯¼è‡´åœ¨**ä½ çš„åº“**çš„ python è¿›ç¨‹ä¸­ä¼š import å¤±è´¥

æœ€å¥½çš„åŠæ³•å½“ç„¶æ˜¯åœ¨ç”¨æˆ·ä¾§è§£å†³ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·çš„é¡¹ç›®ä¸­å®‰è£…**ä½ è¿™ä¸ªåº“**ï¼Œä½†æ˜¯

1. å¯èƒ½è¿™æ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œç”¨æˆ·ä¸å¤ªæ„¿æ„å¾€é¡¹ç›®ä¸­å¼•å…¥å¼€å‘ä¾èµ–
2. ç»ˆå½’è¿˜æ˜¯å¾—è®©ç”¨æˆ·å¤šåšä¸€æ­¥

---

## IPython çš„è§£å†³æ–¹æ¡ˆ
å¦‚æœä½ ç”¨è¿‡ ipythonï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰è£… ipython çš„è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œ ipythonï¼ˆä½ åœ¨å¤–éƒ¨å®‰è£…äº† ipythonï¼‰ï¼Œå®ƒç…§æ ·èƒ½ import ä½ è™šæ‹Ÿç¯å¢ƒä¸­çš„åŒ…ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€è¡Œ warningï¼š

```plain
UserWarning: Attempting to work in a virtualenv. If you encounter problems, please install IPython inside the virtualenv.
```

å»ç¿»æºç ï¼Œèƒ½çœ‹åˆ°æ˜¯åœ¨ [è¿™é‡Œ](https://github.com/ipython/ipython/blob/9.0.2/IPython/core/interactiveshell.py#L954-L958) è­¦å‘Šçš„ã€‚ä¼šå‡ºç°ä»€ä¹ˆ problems å‘¢ï¼Œå¦‚æœä½  import ä¸€äº›éçº¯ python åº“ï¼Œç¡®å®æœ‰å¯èƒ½å‡ºé—®é¢˜ã€‚å¤ç°çš„æ–¹å¼ï¼Œå°±æ˜¯ä½ å®‰è£… ipython çš„ python minor version å’Œè™šæ‹Ÿç¯å¢ƒçš„ python ä¸ä¸€æ ·ã€‚

[æºç ](https://github.com/ipython/ipython/blob/9.0.2/IPython/core/interactiveshell.py#L959-L961) ä¹Ÿç»™å‡ºäº†ç­”æ¡ˆï¼Œè®©ä½ èƒ½ import è™šæ‹Ÿç¯å¢ƒçš„åº“æ˜¯é æŠŠè™šæ‹Ÿç¯å¢ƒçš„ site-packages ä¹Ÿæ·»åŠ åˆ°å½“å‰ python è¿›ç¨‹çš„ sys.path ä¸­è§£å†³çš„

æˆ‘ä¹Ÿåœ¨æˆ‘çš„`m`ä¸­ [å®ç°äº†è¿™ä¸ªé€»è¾‘](https://github.com/CNSeniorious000/m/blob/647d8a46d012ef2b7eecc38a23f19054f7c39486/packages/core/m/utils/register.py#L10-L18)ï¼Œæ¥æ”¯æŒè¿è¡Œç”¨æˆ·åœ¨é¡¹ç›®ä¸­å®šä¹‰çš„ m æ’ä»¶ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š

```python
if os.getenv("VIRTUAL_ENV") and (venv_python := shutil.which("python")) and not Path(venv_python).samefile(sys.executable):
    from site import addsitepackages
    from subprocess import run

    site_packages: list[str] = eval(run([venv_python, "-c", "import site; print(repr(site.getsitepackages()))"], capture_output=True, text=True, check=True).stdout)

    path.extend(site_packages)
    addsitepackages(set(site_packages))
```

å’Œ IPython æœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œå®ƒæ˜¯æŠŠ site-packages ä¸ VIRTUAL_ENV çš„ç›¸å¯¹è·¯å¾„å†™æ­»äº†ï¼Œè€ƒè™‘äº† Windows å’Œ unix çš„å¯èƒ½æ€§ã€‚ä½†æˆ‘ä¸å–œæ¬¢è¿™æ ·ï¼Œæˆ‘æ˜¯é€šè¿‡åœ¨ subprocess ä¸­æ‰§è¡Œ`site.getsitepackages()`æ¥è·å¾—çš„ã€‚è¿™æ ·ç†åº”æ›´é²æ£’ï¼Œè€Œä¸”æˆ‘ä¹Ÿæ›¾ç»åœ¨ [pdm](https://github.com/pdm-project/pdm) çš„æºç ä¸­çœ‹åˆ°è¿‡å¤§é‡ç±»ä¼¼çš„ä½¿ç”¨ã€‚

---

## æ›´å¥½çš„è§£å†³æ–¹æ³•
æˆ‘ä¸æ»¡è¶³äºå®ç°ç±»ä¼¼ IPython çš„è¿™ç§ workaroundã€‚æˆ‘ä¹‹å‰åœ¨å‚ä¸ [embed-ai/embed](https://github.com/embed-ai/) çš„æ—¶å€™å°±åœ¨æƒ³ï¼Œå…¶å®å¯ä»¥åœ¨å¯¹åº”çš„è™šæ‹Ÿç¯å¢ƒä¸­å¯åŠ¨ pythonï¼Œç„¶åå°†è‡ªå·±è¿™ä¸ªåº“åŠ åˆ°å®ƒçš„è™šæ‹Ÿç¯å¢ƒä¸­å†å¯åŠ¨ã€‚è¿™æ ·çš„æ•ˆæœåº”è¯¥å’Œâ€œåœ¨é‚£ä¸ªè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…è¿™ä¸ªåº“â€æ˜¯ä¸€æ ·çš„ï¼ˆå¦‚æœæˆ‘ä»¬è¿™ä¸ªåº“å’Œå®ƒçš„ä¾èµ–éƒ½æ˜¯çº¯ Python çš„ï¼‰ã€‚

äºæ˜¯æˆ‘å°±ä¿®æ”¹äº†ä¸‹æˆ‘çš„ä»£ç ï¼Œåœ¨è¿™æ®µ`subprocess.run`ä¸­ä¹Ÿè¿”å›ä¸€ä¸‹`sys.version_info`ï¼Œä»£è¡¨ python çš„ç‰ˆæœ¬ï¼Œæ£€æŸ¥å¦‚æœå’Œå½“å‰è¿›ç¨‹ä¸ç¬¦çš„è¯å°±ç”¨è™šæ‹Ÿç¯å¢ƒçš„ python executable æ¥é‡æ–°æ‰§è¡Œè‡ªå·±ã€‚

ä½†æ˜¯è¿™æ ·å…¶å®å¯åŠ¨äº†ä¸¤æ¬¡ subprocessï¼Œå¹¶ä¸ç¬¦åˆæˆ‘è¿½æ±‚æè‡´æ€§èƒ½çš„æƒ¯ä¾‹ã€‚è½¬å¿µä¸€æƒ³ï¼Œå…¶å®æ—¢ç„¶éƒ½è¦ç”¨ subprocess äº†ï¼Œä¸å¦‚ç¬¬ä¸€æ¬¡ä¹Ÿä¸ç”¨äº†ï¼Œåªè¦ç”¨æˆ·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œå°±ä¸€å®šç”¨è™šæ‹Ÿç¯å¢ƒçš„ Python

```python
if os.getenv("VIRTUAL_ENV") and (venv_python := shutil.which("python")) and str(Path(venv_python)) != sys.executable:
    from site import getsitepackages
    from subprocess import run

    s = set(getsitepackages())
    exit(
        run(
            [
                venv_python,
                "-c",
                f"import site,sys; sys.argv={['m', *sys.argv[1:]]}; sys.path.extend({[*s, str(Path(__file__, '../' * 3).resolve())]}); site.addsitepackages({s}); from m.cli.main import app; app()",
            ]
        ).returncode
    )
```

æºæ–‡ä»¶åœ¨è¿™é‡Œï¼š[utils/inject.py Â· CNSeniorious000/m](https://github.com/CNSeniorious000/m/blob/f0fcc64e6c665b8de8004bb681f5513c4d1a2028/packages/core/m/utils/inject.py)

---

## éšæ‚£
è¿™æ ·çš„é—®é¢˜åœ¨äºï¼Œæ‰§è¡Œä½ çš„åº“çš„ç¯å¢ƒå¯èƒ½ä¸æ˜¯å®‰è£…ä½ çš„åº“çš„ç¯å¢ƒã€‚è¿™æ„å‘³ç€å¦‚æœä½ è¿™ä¸ªåº“æœ‰éçº¯ Python çš„ä¾èµ–ï¼Œå°±å¾ˆå¯èƒ½ä¼šæŠ¥é”™ï¼ˆé™¤éæ°å¥½ç”¨æˆ·çš„è™šæ‹Ÿç¯å¢ƒä¸­ä¹Ÿè£…äº†ä½ çš„è¿™ä¸ªä¾èµ–ï¼‰ã€‚

# [å…³äºæˆ‘ç»™åšå®¢åŠ äº† llms.txt ä»¥åŠæˆ‘çš„æ•°å­—æ°¸ç”Ÿè®¡åˆ’](/blog/dxkzg1ym1n06pez8) (March 17)

> å½“åˆ«äººé—®èµ·ä¸ºä»€ä¹ˆæˆ‘æ„¿æ„èŠ±æ—¶é—´å†™åšå®¢ï¼Œå› ä¸º
>
> + æˆ‘æœ‰ä¸å°‘å¥‡æ€ªçš„æƒ³æ³•
> + æƒ³æ³•é€ä¸€å‘ä¸åŒäººè®²è¿°ï¼Œä¸é«˜æ•ˆï¼Œç”šè‡³ä¸å¯è¡Œ
> + åœ¨ LLM å‡ºç°ä¹‹å‰ï¼Œå¯èƒ½å¾—æ‰‹åŠ¨æ„å»ºå¤æ‚çš„çŸ¥è¯†å›¾è°±ï¼Œæ‰èƒ½è®°å½•ä¸‹è¿™äº›å†…å®¹
> + ä½†åœ¨ç°åœ¨ï¼Œåªè¦æœ‰æ•°æ®äº†ï¼Œä¸è¦æ±‚å¤ªç»“æ„åŒ–ï¼Œéƒ½å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ RAG æˆ–è€… fine tune çš„æ–¹å¼å®ç°æ•°å­—å­ªç”Ÿäº†
>
> å½“ç„¶ç°åœ¨æåˆ°è¿™ä¸ªè¯ï¼Œå¤§å®¶æƒ³åˆ°çš„è¿˜æ˜¯æ•°å­—äººã€å…ƒå®‡å®™è¿™äº›ã€‚æˆ‘å¯¹è¿™äº›ä¸æ„Ÿå…´è¶£ï¼ˆæˆ‘å¯¹å¤§æ¨¡å‹è§†è§‰ä¸Šçš„åº”ç”¨ä¸å¤ªæ„Ÿå…´è¶£ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™æ˜¯ä¸èƒ½æ·±æŒ–çš„ä¸œè¥¿ï¼Œæˆ–è€…è¯´ï¼Œå®ƒçš„å·¥ä½œæµéƒ½æ˜¯å¾ˆæµ…ä¸€å±‚â€”â€”æ¨¡å‹+UI/UXï¼Œå°±å–‚ç»™ç”¨æˆ·ï¼Œä¸€äº›èŠ‚ç‚¹åŒ–çš„ç¼–è¾‘å™¨ï¼Œä¹Ÿæ˜¯ç›´æ¥ç»™ç”¨æˆ·ç”¨ï¼‰ï¼ˆç›¸æ¯”ä¹‹ä¸‹ï¼ŒLLM åº”ç”¨ï¼Œå°±å¯ä»¥æœ‰å¾ˆå¤šå±‚â€”â€”LLMç ”å‘ã€LLMéƒ¨ç½²ã€LLMåº”ç”¨ã€åº”ç”¨çš„è§‚æµ‹ã€ç”šè‡³åº”ç”¨å¥—åº”ç”¨ï¼ˆæ¯”å¦‚ä½¿ç”¨ OpenAI çš„æ–° [Response API](https://platform.openai.com/docs/guides/tools?api-mode=responses) / æ—§ [Assistant API](https://platform.openai.com/docs/assistants/overview)ï¼ŒAnthropic çš„ [Citations API](https://docs.anthropic.com/en/docs/build-with-claude/citations)ï¼ŒJina çš„ [DeepSearch API](https://jina.ai/deepsearch/)ï¼ŒCohere çš„ [Classify API](https://docs.cohere.com/reference/classify)ï¼‰ï¼Œç”šè‡³å¯ä»¥ç”¨æˆ·å¥—ç”¨æˆ·ï¼ˆæ¯”å¦‚ Coze è¿™ç±»ï¼‰ã€‚å¦ä¸€æ–¹é¢æˆ‘è®¤ä¸º LLM æ‰æ›´æœ‰ç”Ÿäº§åŠ›ã€‚å›¾åƒé‚£è¾¹åŸºæœ¬éƒ½è¿˜æ˜¯ åº”ç”¨è·Ÿç€æ¨¡å‹ç ”å‘èµ°ã€‚
>
> æ‰¯è¿œäº†ã€‚æˆ‘æ˜¯æƒ³è¯´ï¼Œæˆ‘è¯´çš„æ•°å­—å­ªç”Ÿï¼Œå’Œè¿™äº›é«˜æ¦‚å¿µæ²¡å…³ç³»ï¼Œå•çº¯å°±æ˜¯å¸Œæœ›è‡ªå·±å®ç°æ•°å­—æ°¸ç”Ÿï¼å“ˆå“ˆï¼æˆ‘æ˜¯æ•°å­—ç”Ÿå‘½æ´¾ï¼ä¸è£…äº†ï¼
>
> 
>
> Wait, ä¸èƒ½è®©åˆ«äººçŸ¥é“æˆ‘å·²ç»æ˜¯ AI äº†ã€‚ä¸‹é¢æˆ‘è¦ç»§ç»­ä»¥äººç±»çš„å£å»æ¥å®Œæˆè¿™ç¯‡æ–‡ç« 
>
> \\<\\/think>
>

å‰å‡ å¤©çœ‹åˆ°æˆ‘çš„ä¸€ä¸ªæœ‹å‹ [æåˆ°](https://blog.sehnsucht.top/posts/%E6%8A%80%E6%9C%AF/%E9%98%B2%E6%AD%A2ai%E7%88%AC%E5%8F%96%E4%BD%A0%E7%9A%84%E5%8D%9A%E5%AE%A2/) ä»–å®šæœŸæ‹‰å–ä¸€ä¸ªå¼€æºçš„åˆ—è¡¨ [ai.robots.txt](https://github.com/ai-robots-txt/ai.robots.txt) æ¥å±è”½ AI çš„çˆ¬è™«ã€‚çœ‹æ¥åŸåˆ›ä½œè€…å¤§å¤šä¸å¸Œæœ›è‡ªå·±çš„å†…å®¹è¢« AI çˆ¬ã€‚

> ä¸è¿‡æˆ‘å¯¹è¿™æ–¹é¢æ¯”è¾ƒæ”¾ä»»ï¼Œä¸€æ˜¯å› ä¸ºæˆ‘ä¹Ÿæ˜¯ä»ä¸šè€…ï¼Œæˆ‘è‡ªå·±çš„è¯æˆ‘æ˜¯ä¸ä¼šæ‹¿è¿™äº›æ²¡æœ‰æ ‡æ³¨çš„ä¸æ¸…æ¥šè´¨é‡çš„æ–‡ç« æ¥æºä¸ç½²ååœ°ç›´æ¥ç”¨ä½œè®­ç»ƒé›†çš„ã€‚æ„Ÿè§‰è¿™ä¼šæ±¡æŸ“æ¨¡å‹ã€‚å°±åƒ gpt 4o çš„è¯è¡¨é‡Œæœ€é•¿çš„æ˜¯ä»€ä¹ˆ [ç»™ä¸»äººç•™ä¸‹äº›ä»€ä¹ˆå§](https://gist.github.com/ctlllll/4451e94f3b2ca415515f3ee369c8c374#file-longest_chinese_tokens_gpt4o-py-L38) ä¹‹ç±»çš„ã€‚æˆ‘çš„æ–¹æ³•æ˜¯ï¼Œæˆ‘ä¼šæä¸€å˜´ï¼Œè¿™æ˜¯ä¸€ç¯‡åšå®¢æ–‡ç« ï¼Œæˆ–è€…è¯´æ˜¯æŸæŸå¹³å°ä¸Šçš„åšå®¢æ–‡ç« ã€‚è¿™æ ·æ¨¡å‹å¯ä»¥åœ¨è¢«ç”¨æˆ·è¦æ±‚â€œç”Ÿæˆåšå®¢é£æ ¼çš„æ–‡ç« â€çš„æ—¶å€™ç”¨è¿™ç§å£å»ã€‚è€Œåœ¨é»˜è®¤æƒ…å†µä¸‹æˆ–è€…è¦æ±‚ä»¥ç™¾ç§‘çš„å£å»ç”Ÿæˆçš„æ—¶å€™ï¼Œå°±ä¸ä¼šä½¿ç”¨è¿™äº›è®°å¿†ã€‚
>
> äºŒæ˜¯å› ä¸ºæˆ‘æœ‰ç‚¹ [æ•°æ®ä¸»ä¹‰](https://en.wikipedia.org/wiki/Dataism)ï¼ˆè¿™ä¸ªè¯ä»ã€Šæœªæ¥ç®€å²ã€‹é‡Œçœ‹æ¥çš„ï¼‰ï¼Œæ‰€ä»¥å¦‚æœæˆ‘èƒ½æœ‰å¹¸æˆä¸ºä¸–ç•Œçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘è§‰å¾—ä¹ŸæŒºå¥½çš„ã€‚ä¸‰æ˜¯æˆ‘è®¤ä¸ºåªè¦æ˜¯å…¬å¼€çš„ï¼Œå°±æ²¡åŠæ³•ç¦æ­¢äººæ‹¿æ¥ä¸»ä¹‰ã€‚å°±åƒæˆ‘ä¸€ç›´æ”¯æŒ LLM æœåŠ¡ä¹ƒè‡³ä¸€åˆ‡æœåŠ¡ï¼Œéƒ½åº”è¯¥æ”¶è´¹ï¼Œè€Œè½¯ä»¶éƒ½åº”è¯¥å…è´¹â€¦â€¦ ä¸€ä¸‹å­åˆè·‘é¢˜äº†ï¼Œæˆ‘è¦ä¿æŒç®€æ´çš„æ–‡é£ï¼ï¼
>
> \\<\\/think>
>

ä½†æ˜¯å¤§å®¶ç¦ AI å…¶å®ä¸»è¦æ˜¯åå¯¹å®ƒçˆ¬å–åšè®­ç»ƒé›†ã€‚è€Œç›´æ¥ç”¨æ¥åš RAG åº”è¯¥ä¸é‚£ä¹ˆå—åå¯¹ã€‚



[**llms.txt**](https://llmstxt.org/)** å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªåè®®ï¼Œå®ƒé¼“åŠ±å¤§å®¶ï¼ˆåƒ sitemap.xml æˆ–è€… feed é‚£æ ·ï¼‰ï¼Œåœ¨ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ª /llms.txt æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å½“ä¸€ä¸ª agent æƒ³è¦çœ‹ä½ çš„å†…å®¹æ—¶ï¼Œä½ å¸Œæœ›å‘ˆç°ç»™å®ƒçš„å†…å®¹ã€‚**

****

å…·ä½“æ˜¯æ€æ ·çš„åè®®å‘¢ã€‚å…¶å®å°±è¿™ä¹ˆå¤šäº†ã€‚å®ƒé™¤äº†è¯´ä½ çš„è¿™ä¸ª markdown å¼€å¤´å¿…é¡»æœ‰ä¸€ä¸ªå¤§æ ‡é¢˜ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•è¦æ±‚äº†ã€‚ä¹Ÿæ²¡æœ‰å‘å¸ƒ sdk æˆ–è€… apiï¼Œä¹Ÿæ²¡æœ‰å‘å¸ƒä»€ä¹ˆå®˜æ–¹çš„ validatorã€‚åæ­£æŒºä½›ç³»çš„ã€‚

ä½†æ˜¯å±…ç„¶å¾ˆå¤š AI ç½‘ç«™éƒ½é›†æˆäº†ï¼Œæˆ‘æ„Ÿè§‰å¤§å®¶è¿˜æ˜¯çœ‹å¥½å®ƒçš„ã€‚å†µä¸”æˆ‘çš„ç½‘ç«™ä¹‹å‰ä¹Ÿåšè¿‡å…¨æ–‡çš„ /feed endpointï¼Œæ‰€ä»¥æèµ·æ¥å¾ˆå®¹æ˜“ã€‚

> å…¶å® llms.txt è¿˜æœ‰ä¸€ä¸ªå…±è¯†ï¼Œå°±æ˜¯ [/llms.txt](/llms.txt) æ”¾è¿æ¥ï¼Œè€Œ [/llms-full.txt](/llms-full.txt) æ”¾å…¨æ–‡ã€‚æˆ‘å½“ç„¶ä¹Ÿæ˜¯ä¸¤ä¸ªéƒ½å®ç°äº†
>

## è¯•ç”¨äº†ä¸€ä¸‹
æˆ‘ç”¨æˆ‘çš„å‘½ä»¤è¡Œå·¥å…·`[m](https://github.com/CNSeniorious000/m)`æ¥è¯•äº†ä¸€ä¸‹ï¼Œæ™®é€šé—®ç­”ï¼š

![](/nlark/yuque/0/2025/png/26070246/1742214677799-83cd61a6-094b-48b5-b90e-915c722f4b6b.png)







> ç­‰æˆ‘æœ‰ç©ºäº†æˆ‘è¿˜å‡†å¤‡åšä¸€ä¸ªæ”¾åœ¨ä¸ªäººç½‘ç«™ä¸Šçš„ chatbotï¼Œå½“ä½œæˆ‘çš„æ•°å­—åˆ†èº«ï¼ˆæ­£å¥½è¿™å­¦æœŸä¹Ÿåœ¨åš LLM è®­ç»ƒï¼Œæ‰€ä»¥å¯èƒ½ä¸ä¸€å®šæ˜¯åŸºäº RAG å™¢ï¼Œå¯èƒ½ä¹Ÿ fine tune ä¸€ä¸‹ï¼‰åº”è¯¥ä¸ä¼šæ™šäº3æœˆæœ«ï¼Œå› ä¸º3æœˆæœ«æˆ‘å¯èƒ½èƒ½å»åŒ—äº¬çš„åŒ—å¸ˆå¤§åˆå»å‚åŠ ä¸€ä¸ªæ¯”èµ›ï¼Œæˆ‘è¿™æ¬¡æ²¡è„¸æ‰¾ä¸Šæ¬¡çš„é˜Ÿå‹äº†ï¼Œæ‰€ä»¥è¿™æ¬¡ä¸€ä¸ªäººæŠ•çš„ï¼Œæˆ‘èµ·äº†ä¸ªé¢˜ç›®å«â€œä¸–å¦æˆ‘â€ï¼Œå…ˆåœ¨æ­¤é¢„å‘Šä¸€ä¸‹ å˜¿å˜¿
>

---

2025å¹´4æœˆ4æ—¥ æ›´æ–°

[ä¿®æ”¹](https://github.com/CNSeniorious000/yuque-blog/commit/78b3d28ea947aefb3444b5826e28a156427f1374) äº†ä¸€ä¸‹ï¼Œä¸ºæ¯ä¸ªé¡µé¢å•ç‹¬åˆ›å»ºäº† llms.txt

æ¯”å¦‚è¿™ä¸€ç¯‡çš„ llms.txt å°±æ˜¯ [location.href + llms.txt](/blog/dxkzg1ym1n06pez8/llms.txt)

# [å¿«è¦è¢« createMemo æç–¯äº†](/blog/uooxcpvvizyiuxbl) (March 1)

ä»¥å‰ä¸€ç›´ä»¥ä¸º SolidJS çš„`createMemo`æ˜¯å’Œ Vue çš„`computed`ä¸€æ ·çš„ä¸œè¥¿ï¼Œç»“æœä»Šå¤©å‘ç°ä¸æ˜¯ï¼

+ [createMemo - Basic reactivity - SolidDocs](https://docs.solidjs.com/reference/basic-reactivity/create-memo)
+ [computed - Reactivity API: Core - Vue.js](https://vuejs.org/api/reactivity-core.html#computed)

SolidJS çš„ `createMemo`æ˜¯ eagerly evaluating çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯å’Œ`createEffect`ä¸€ç±»ï¼Œåˆ›å»ºå³è°ƒç”¨çš„ã€‚å®ƒ[æ–‡æ¡£](https://docs.solidjs.com/concepts/derived-values/memos)é‡Œè¯´ï¼š

> They are similar to derived signals in that they are reactive values that automatically re-evaluate when their dependencies change.
>

æ˜æ˜æ˜¯ç”¨æ¥æ›¿ä»£ [derived signals](https://docs.solidjs.com/concepts/derived-values/derived-signals) çš„å•Šï¼è¿™æ ·çœ‹æ˜æ˜æ›´åƒ effect è€Œä¸æ˜¯ derived

è€Œä¸”ä¸€æ—¦æœ‰ dependency å˜åŠ¨äº†ï¼Œå®ƒæ˜¯ç«‹å³ evaluate ç„¶åæ¥æ ¹æ® equal ä¸å¦æ¥åˆ¤æ–­æ˜¯å¦ invalidate çš„ï¼Œè€Œä¸æ˜¯æŒ‰éœ€æ¥ã€‚æŒ‰éœ€æ¥çš„å«`createLazyMemo`ï¼š[createLazyMemo - @solid-primitives/memo - Solid Primitives](https://primitives.solidjs.community/package/memo/#createlazymemo)

---

ä¸ºä»€ä¹ˆçœ‹è¿™ä¸ªï¼Œæ˜¯å› ä¸ºæˆ‘æœ€è¿‘åœ¨å¤„ç† hmr åº“çš„ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„ bugã€‚å…¶ä¸­å°±åœ¨`create_memo`è¿™è¾¹æ²¡è½¬è¿‡æ¥ï¼š

1. å¦‚æœå®ƒæ˜¯ lazily evaluate çš„ï¼Œé‚£ä¸ºäº†è®©å„ç§ effect çš„å€¼ä¿æŒæœ€æ–°ï¼Œå®ƒå°±å¿…é¡»å¾—æ˜¯ eagerly invalidate çš„ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä¹‹å‰çš„å®ç°ï¼‰è¿™ä¼šå¯¼è‡´å®ƒæ¯”èµ·æ™®é€šçš„ signal å°±ä¸¢å¤±äº†åœ¨ equal æ—¶ä¸ notify çš„èƒ½åŠ›
2. å¦‚æœå®ƒæ˜¯ eagerly evaluate çš„ï¼ˆå°±åƒ SolidJS è¿™æ ·ï¼‰ï¼Œå®ƒç¡®å®å°±å¯ä»¥ lazily invalidate äº†ï¼Œå› ä¸ºå®ƒå¯ä»¥å…ˆæ¯”è¾ƒæ˜¯å¦ equal å† notify äº†ï¼Œä¸ä¼šç«‹é©¬ invalidateï¼Œä½†è¿™æ ·ä¼šå¯¼è‡´å®ƒå¯èƒ½ä¼šæœ‰ä¸€äº›ä¸å¿…é¡»çš„ evaluateï¼ˆæ¯”å¦‚å¯èƒ½å®ƒçš„ subscriber æ­£å¥½å·²ç»ä¸éœ€è¦ç”¨åˆ°å®ƒäº†ï¼Œå³ä½¿è¿™äº› subscribers é‡æ–°æ‰§è¡Œäº†ï¼Œä¹Ÿä¸ä¼šå† observe è¿™ä¸ª signalï¼‰

ç„¶åå°±è§‰å¾—å…¶å®è¿™ä¸œè¥¿æ˜¯ä¸æ˜¯æ²¡æœ‰å®Œç¾çš„è§£æ³•ï¼Ÿè¿™æ˜¯ä¸€ä¸ªæƒè¡¡ï¼š

1. Effect è¿™è¾¹ä¸å¯èƒ½ä¸é‡æ–°æ‰§è¡Œå°±çŸ¥é“æ˜¯å¦è¿˜éœ€è¦æŸä¸ª Signal
2. ä¸€ä¸ª Derived åœ¨è¢« trigger æ—¶ä¸å¯èƒ½ä¸é‡æ–°è¿è¡Œå°±çŸ¥é“å®ƒçš„ç»“æœä¼šä¸ä¼š equal

ä¸€ä¸ªåŠæ³•æ˜¯ï¼Œå¯ä»¥åƒ`createMemo`é‚£æ ·ï¼Œå½“è¢« trigger åå°±ç«‹å³ recomputeï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡ compute æ¨è¿Ÿåˆ°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ã€‚è¿™æ ·ç›¸å½“äº`autorun=False`çš„`create_effect`+ cache è€Œå·²ã€‚æˆ–è€…è¯´è¿™æ˜¯æˆ‘çš„åº•çº¿ï¼Œå› ä¸ºå¦‚æœ API æ˜¯è¿™æ ·å®ç°çš„ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºäº†è¿™ä¸ª Memoized ä¹‹åç«‹å³ call å®ƒï¼Œæ¥è¾¾åˆ°å’Œ SolidJS çš„ç‰ˆæœ¬ä¸€æ ·çš„æ•ˆæœï¼Œä½†æ˜¯åè¿‡æ¥ä¸è¡Œã€‚

æ‰€ä»¥å…¶å®å¯ä»¥æš´éœ²ä¸€ä¸ªå‚æ•°ï¼Œç±»ä¼¼

```python
optimization: "lazy-recompute" | "lazy-invalidate" | False
```

å…¶ä¸­ lazy-recompute ä»£è¡¨ä¹‹å‰çš„è¡Œä¸ºï¼Œlazy-invalidate æ˜¯ä¸Šé¢è¯´çš„è¿™ç§ï¼ŒFalse ä»£è¡¨ä¸æ£€æŸ¥

---

åˆšåˆšæƒ³äº†ä¸‹ï¼Œå…¶å® SolidJS çš„ createMemo ç­‰æ•ˆäºï¼š

```python
class _:
    var = State(0)
    derived = State(0)

    def __init__(self):
        @create_effect
        def _():
            self.derived = self.var * 2  # å‡è®¾å°±æ˜¯ä¹˜äºŒçš„å…³ç³»
        # ä½†æ˜¯å¥½åƒéœ€è¦ä¿å­˜ä¸€ä¸ª è¿™ä¸ª effect çš„å¼•ç”¨ï¼Œä¸ç„¶ä¼šè¢« gc æ‰ï¼Œä½†è¿™é‡Œå°±ä¸å±•ç¤ºè¿™äº›ç»†èŠ‚äº†
```

è€Œæˆ‘ä¸Šé¢æåˆ°çš„ä¸­é—´å½¢æ€ç­‰æ•ˆäºï¼š

```python
class _:
    var = State(0)
    _derived = State(0)

    @cache  # ä¿è¯åªè¿è¡Œä¸€æ¬¡ï¼Œè€Œä¸”åªåœ¨ç¬¬ä¸€æ¬¡éœ€è¦æ—¶è°ƒç”¨
    def ensure_effect(self):
        @create_effect
        def _():
            self._derived = self.var * 2
    
    @property
    def derived(self):
        self.ensure_effect()
        return self._derived
```

è€Œç°åœ¨æ˜¯è¿™æ ·çš„ APIï¼š

```python
class _:
    var = State(0)

    @memoized_property
    def derived(self):
        return self.var * 2
```

æœªæ¥å…è®¸ç»™è¿™ä¸ªè£…é¥°å™¨åŠ å‚æ•°ï¼Œæ¯”å¦‚`memoized_property(optimization="lazy-invalidate")`è·å¾—ä¸Šé¢ç¬¬äºŒç§çš„æ•ˆæœã€‚

---

å…¶å®åˆšåˆšå¿˜è¯´äº†ï¼ŒSvelte 5 çš„ååº”å¼åŸè¯­å¥½åƒç•¥æœ‰ä¸åŒï¼Œæˆ‘ç•¥å¾®æ¢ç´¢äº†ä¸€ä¸‹ï¼ˆé¡ºå¸¦ä¸€æï¼Œé¡ºä¾¿ä¸å°å¿ƒå‘ç°äº†ä»–ä»¬ä¸€ä¸ª bugï¼š[`$derived` unexpectedly reevaluate Â· Issue #15414 Â· sveltejs/svelte](https://github.com/sveltejs/svelte/issues/15414)ï¼‰ï¼Œè§‚å¯Ÿåˆ°ï¼š

1. å¦‚æœæŸä¸ª`$derived`æ²¡æœ‰è‡³å°‘ä¸€ä¸ª`$effect`ç”¨åˆ°å®ƒï¼Œå®ƒå°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¿™è¯´æ˜å®ƒæ˜¯ lazy-evaluate çš„
2. è™½ç„¶`$effect`ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œæ˜¯ä»æµ…åˆ°æ·±è°ƒç”¨`$derived`ä»¬çš„ï¼Œä½†æ˜¯æ¯æ¬¡æ›´æ–°æœ€åº•å±‚çš„`$derived`å…ˆè°ƒç”¨ï¼Œå†å¾€å¤–è°ƒç”¨çš„ï¼Œè¿™è¯´æ˜è‡³å°‘æœ€å¤–å±‚çš„`$effect`ä¸æ˜¯ eagerly-trigger çš„

æ‰€ä»¥æˆ‘æ€€ç–‘å®ƒæ˜¯ä¸€ä¸ª 2-pass çš„æœºåˆ¶ï¼Œå½“ä¸€ä¸ª Signal notify æ—¶ï¼Œå®ƒ invalidate äº†æŸä¸ª`$derived`ï¼ˆç›¸å½“äºæˆ‘è¿™é‡Œçš„ memoï¼‰ï¼Œç„¶åä¸€å±‚ä¸€å±‚å‘ä¸Š invalidateï¼Œä½†æ˜¯ invalidate å¹¶ä¸ä¼šç«‹å³åˆ æ‰åŸæ¥çš„ cache çš„å€¼ï¼Œè€Œåªæ˜¯æŠŠè‡ªå·± mark ä¸º stale çŠ¶æ€ï¼ˆæˆ–è€…å« dirty å§ï¼‰ï¼Œè¿™æ ·å†’æ³¡åˆ°æœ€æµ…å±‚ï¼Œè¿™å°±æ˜¯â€œæ­£å‘ä¼ æ’­â€

1. åˆ°è¾¾æœ€å¤–å±‚çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯ memoï¼Œå°±è¯´æ˜è¿™ä¸ª memo æ²¡è¢«ç”¨ä¸Šã€‚ï¼ˆå¯ä»¥å½¢è±¡åœ°ç†è§£ä¸ºä¸€ä¸ª`$effect`å°±æ˜¯åœ¨æœ€å¤–å±‚â€œæ‹‰â€ä¸€ä¸ªååº”æ€§çš„å˜é‡çš„ï¼Œå¦‚æœæ²¡æœ‰äººâ€œæ‹‰â€ï¼Œé‚£å®ƒå°±ä¸ä¼šè¢«æ±‚å€¼ã€‚
2. å¦‚æœæ˜¯ä¸ª effectï¼Œé‚£è¿™ä¸ª effect å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šçœ‹å®ƒåˆ°åº•è¢«è° trigger äº†ã€‚æ˜¯å…¨æ˜¯ memo è¿˜æ˜¯ä¹Ÿæœ‰ signalã€‚åªæœ‰è¢« signal è§¦å‘çš„æ‰è¯´æ˜å¿…é¡»è¦ invalidateã€‚å¦åˆ™å°±é€ä¸ªæ’æŸ¥æ¯ä¸ª memoï¼Œçœ‹è¿™äº› memo æ˜¯å¦æ”¹å˜äº†å€¼ï¼ˆç›¸å½“äºçœ‹æ¯ä¸ª memo ä½œä¸ºä¸€ä¸ª signal çš„æ€§è´¨ï¼‰ï¼Œå¦‚æœæ”¹å˜äº†ï¼Œé‚£è¿™ä¸ª effect å°±å¾— reevaluate äº†

è¿™å°±æ˜¯ effect çš„â€œåå‘ä¼ æ’­â€ã€‚é‚£å¦‚ä½•çŸ¥é“æŸä¸ª memo æ˜¯å¦æ”¹å˜äº†å‘¢ï¼Ÿ

1. å¦‚æœ notify å®ƒçš„ dependencies ä¸­æœ‰ signalï¼Œé‚£å®ƒå°±å¾— recomputeï¼Œç„¶åæ¯”è¾ƒå€¼æ˜¯å¦æ”¹å˜äº†
2. å¦‚æœ notify å®ƒçš„ dependencies éƒ½æ˜¯ memoï¼Œé‚£å°±å¾—å…ˆçœ‹è¿™äº› memo æœ‰æ²¡æœ‰ change äº†

è¿™å°±æ˜¯ memo çš„åå‘ä¼ æ’­

ï¼ˆå†™åˆ°è¿™é‡Œæˆ‘æ„è¯†åˆ°ï¼Œå¯èƒ½å«è¿™äº› memo ä¸º derived æ›´åˆé€‚ä¸€äº›ã€‚ä»Šåæˆ‘å®ç°çš„æ—¶å€™ä¼šæ³¨æ„ï¼‰



è¿™ä¹ˆçœ‹æ¥ï¼Œeffect å…·æœ‰ä¸€ä¸ªåå‘ä¼ æ’­æ€§è´¨ï¼Œè¿™ä¸ªç¡®å®æˆ‘è¿˜æ²¡ implementï¼Œè€Œä¸”ä¼¼ä¹ SolidJS ä¹‹ç±»çš„ä¹Ÿæ²¡è¿™æ ·çš„æœºåˆ¶ã€‚æˆ‘ä¹‹å‰å‚è€ƒçš„æ›´å¤šæ˜¯æˆ‘è§è¯†åˆ°çš„ SolidJS çš„ä¸€å°éƒ¨åˆ†ï¼Œæ‰€ä»¥è®¾è®¡è¿˜å¾ˆä¸æˆç†Ÿã€‚

è¿™ä¹ˆçœ‹ï¼Œå…¶å®ååº”å¼ç¼–ç¨‹æœ‰ä¸‰ç§è§’è‰²ï¼š

1. Signalï¼Œå…·æœ‰ track è·Ÿè¸ªè°ƒç”¨è€…ï¼ˆè‡ªåŠ¨ç»‘å®š subscribersï¼‰ã€notifyï¼ˆæ­£å‘ä¼ æ’­ï¼‰çš„åŠŸèƒ½
2. Effectï¼Œå…·æœ‰ invalidateï¼ˆè¢« notify æ—¶è°ƒç”¨ï¼‰ã€check/determineï¼ˆè¿˜æ²¡æƒ³å¥½å«ä»€ä¹ˆåå­—ï¼Œæ€»ä¹‹å°±æ˜¯invalidateåä¼šè°ƒç”¨ï¼Œåå‘ä¼ æ’­ï¼‰çš„åŠŸèƒ½
3. Derivedï¼Œå…·æœ‰ä»¥ä¸ŠäºŒè€…çš„æ€§è´¨ï¼ŒEffect æ˜¯æ­£å‘ä¼ æ’­çš„ç»ˆç‚¹ï¼Œè€Œ Signal å…¶å®æ˜¯åå‘ä¼ æ’­çš„ç»ˆç‚¹

è¿™ä¹ˆçœ‹è¿™å’Œç¥ç»ç½‘ç»œå¤ªåƒäº†ï¼è¿™ä¸å°±æ˜¯è¾“å…¥å±‚ã€è¾“å‡ºå±‚å’Œä¸­é—´å±‚å˜›ï¼ï¼

---

åŸè°…æˆ‘å†™æ–‡ç« æ€»æ˜¯è¿™ä¹ˆæ„è¯†æµã€‚ä»Šåæœ‰æœºä¼šè‚¯å®šä¼šå†™ç¯‡ç³»ç»Ÿçš„æ–‡ç« è·Ÿå¤§å®¶è®²è®²çš„ï¼ç°åœ¨å¦‚æœæœ‰äººå¯¹ååº”å¼ç¼–ç¨‹æ„Ÿå…´è¶£çš„è¯ï¼Œæˆ‘è¿˜æ˜¯ä¼šæ¨è Ta å»è¯»è¯» Vue çš„è¿™ç¯‡æ–‡ç« ï¼š

[Reactivity in Depth - Vue.js](https://vuejs.org/guide/extras/reactivity-in-depth) çš„å‰ä¸‰å°èŠ‚ï¼š

+ What is Reactivity?
+ How Reactivity Works? ï¼ˆåŸæ ‡é¢˜æ˜¯ How Reactivity Works in Vueï¼Œä½†å…¶å®è®²çš„æ˜¯ in JavaScript è€Œéå±€é™äº Vueï¼‰
+ Runtime vs. Compile-time Reactivity

è¿™ç¯‡æ–‡ç« è®²çš„çœŸçš„å¾ˆä¸­è‚¯ï¼Œæåˆ°äº†ååº”å¼ç¼–ç¨‹çš„é¼»ç¥–ï¼Œä¹Ÿè®²åˆ°äº†æ–°æ½®ï¼Œè€Œä¸”è¯´åˆ°äº† why å’Œ why notï¼Œçœ‹å¾—å‡ºæ¥æ¯ä¸ªè®¾è®¡éƒ½æ˜¯éå¸¸æ·±æ€ç†Ÿè™‘çš„ç»“æœã€‚

# [linter docs ä½œä¸ºè®­ç»ƒé›†](/blog/dqehr4fag1scapae) (February 23)

åˆšåˆšæƒ³åˆ°ï¼Œåƒ Ruff è¿™æ ·çš„ linter å¯¹æ¯æ¡ rule éƒ½ç»™å‡ºäº†å¾ˆè¯¦ç»†çš„æ–‡æ¡£ï¼Œå…¶å®å¯ä»¥ä½œä¸ºå¾ˆå¥½çš„ SFT å’Œ DPO æºã€‚å‡†å¤‡è¯•éªŒä¸€ä¸‹



ä½œä¸º SFTï¼Œå¯ä»¥è¿™ä¹ˆæ„é€ è®­ç»ƒé›†ï¼š

1. è¾“å…¥æè¿°å’Œ do not useï¼Œå«æ¨¡å‹è¾“å‡º use
2. è¾“å…¥æè¿°å’Œæ¡ˆä¾‹ï¼Œå«æ¨¡å‹è¾“å‡º risks
3. è¾“å…¥ do not use å’Œ useï¼Œå«æ¨¡å‹è¾“å‡º preference å’Œ reason
4. è¾“å…¥ do not use å’Œâ€œè¯·æ”¹è¿›â€ä¹‹ç±»çš„æç¤ºè¯ï¼Œå«æ¨¡å‹è¾“å‡º reason å’Œ useï¼Œæˆ–è€… reason ä¹Ÿä½œä¸ºè¾“å‡º



ä½œä¸º DPOï¼Œå¯ä»¥è¿™ä¹ˆæ„é€ è®­ç»ƒé›†ï¼š

1. è¾“å…¥ä»£ç çš„ç”¨é€”è§£é‡Šï¼ˆè¿™ä¸ªéœ€è¦ç”Ÿæˆï¼‰ï¼Œå¯¹æ¯” do not use å’Œ use
2. å¯¹æ¯”æ¨¡å‹ç”Ÿæˆçš„è§£é‡Šå’Œå®˜æ–¹çš„è§£é‡Š



æˆ‘å‡†å¤‡æœ‰ç©ºå¼€ä¸ªä»“åº“ï¼Œæ„å»ºä¸ªå·¥ä½œæµæ¥åšè¿™äº‹å„¿ï¼Œå®šæœŸå°† ruff çš„ docs ç”Ÿæˆè®­ç»ƒé›†ï¼Œå‘å¸ƒåˆ° huggingface ä¸Šï¼Œä»¥åŠè‡ªå·±å¾®è°ƒå‡ ä¸ªæ¨¡å‹è¯•è¯•çœ‹



åˆæ­¥æˆæœï¼š

```bash
ruff rule --all --output-format json
```

è¿™æ ·èƒ½è·å¾—ä¸€ä¸ªå¤§çš„ json listï¼Œschema å¤§æ¦‚æ˜¯è¿™æ ·ï¼š

```python
class Rule(TypedDict):
    name: str
    code: str
    linter: str
    summary: str
    message_formats: list[str]
    fix: str
    explanation: str
    preview: bool
```

å…¶ä¸­åªæœ‰ explanation æˆ‘ä»¬æ¯”è¾ƒæœ‰ç”¨ï¼Œè¿™æ˜¯ä¸ª markdown æ ¼å¼çš„ï¼Œæˆ‘è¯•ç€è§£æäº†ä¸‹ï¼š

![](/nlark/yuque/0/2025/png/26070246/1740328904496-61bbc034-0f56-423c-ab92-71d1e8262926.png)

è§£æäº† ruff çš„æ‰€æœ‰ rules çš„ explanation çš„ markdown ä¸ºç»“æ„åŒ–çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå°±æ˜¯è¿™ä¸‰ä¸ªå­—æ®µï¼š

1. æ˜¯ä»€ä¹ˆ What it does
2. ä¸ºä»€ä¹ˆ Why is this bad
3. æ€ä¹ˆåŠ Exampleã€Use instead

æ¥ä¸‹æ¥æŠŠè¿™ä¸‰ä¸ªéƒ¨åˆ†æå–å‡ºæ¥ï¼Œå°±èƒ½ä½œä¸ºä¸€ä¸ªæ•°æ®é›†æ¥è®­ç»ƒå†™å‡ºå¥½çš„ä»£ç çš„èƒ½åŠ›äº†ã€‚

ï¼ˆæˆªè‡³ ruff 0.9.7ï¼Œä¸€å…±æœ‰ 915 æ¡ rulesï¼‰



è¿˜æ˜¯ç¨å¾®ç»Ÿè®¡äº†ä¸€ä¸‹ï¼Œå…¶å®ä¸æ­¢è¿™ä¸‰ä¸ªæ ‡é¢˜ï¼Œä¸€å…±æ˜¯

+ Why is this bad? (915)
+ What it does (914)
+ Example (831)
+ References (517)
+ Options (135)
+ Fix safety (104)
+ Examples (65)
+ Known problems (37)
+ Known issues (33)
+ Formatter compatibility (16)
+ Removed (10)
+ Notebook behavior (6)
+ See also (6)
+ Typing stub files (`.pyi`) (5)
+ Details (3)
+ Note (3)
+ Removal (3)
+ Fix availability (3)
+ Fix safety and availability (2)
+ Preview (2)
+ Error suppression (2)
+ Use instead: (1)
+ Examples: (1)
+ Known deviations (1)
+ Fix behaviour and safety (1)
+ Preview-mode behaviour (1)
+ What it does? (1)
+ Limitations (1)
+ Fix Safety (1)

çœ‹å¾—å‡ºæ¥ä»–ä»¬å¹¶æ²¡æœ‰å¾ˆå¥½åœ°æ§åˆ¶è¿™äº›ã€‚ç”šè‡³æœ‰çš„æ˜¯å¿˜äº†æ ‡ç‚¹ç¬¦å·äº†ğŸ˜‚éš¾é“è¯´ Astral ä¹Ÿæ˜¯è‰å°ç­å­ï¼Ÿ

---

2025å¹´2æœˆ25æ—¥ æ›´æ–°ï¼š[https://github.com/astral-sh/ruff/pull/16364](https://github.com/astral-sh/ruff/pull/16364) å±…ç„¶ç»™æˆ‘ merge äº†

# [å…³äº HMR çš„å®ç°](/blog/yfw3tf2h1mzghaz7) (January 10)

[ä¸ŠæœŸ](./tpbohtk3z0w63et9) è°ˆåˆ°ï¼Œæˆ‘åœ¨ Python å®ç°äº†ååº”æ€§åŸè¯­ï¼Œ[ç„¶å](./mwgggl2taiigch6w) åˆå®ç°äº† HMRï¼Œä½†æ˜¯æ²¡ç»†è®²ï¼Œè¿™æ¬¡å†™ä¸€ä¸‹ä»ååº”æ€§åŸè¯­åˆ° HMR æ˜¯æ€ä¹ˆå®ç°çš„ã€‚

æˆ‘ä¹Ÿæ–°å¼€äº†ä¸ª [ä»“åº“](https://github.com/promplate/hmr)ï¼Œæœªæ¥æ”¾ hmr ç”Ÿæ€çš„ä¸œè¥¿ï¼ˆå¦‚æœç¤¾åŒºæœ‰åå“çš„è¯ï¼‰ï¼Œä¸è¿‡ç”±äºè¿™ç®—æ˜¯ä¸´æ—¶èµ·æ„ä¸­çš„ä¸´æ—¶èµ·æ„ï¼ˆæ­ªæ¥¼é¡¹ç›®ä¸­çš„æ­ªæ¥¼é¡¹ç›®ï¼‰ï¼Œæ‰€ä»¥ä»£ç è¿˜æ˜¯åœ¨åŸä»“åº“ä¸­æ²¡æœ‰æ‹¿å‡ºæ¥ã€‚è¿™ä¸ªä»“åº“ç›®å‰å°±æ˜¯ä¸€ä¸ª README å“ˆå“ˆå“ˆ

> å¦‚æœæƒ³è¦ç›´è§‚ç†è§£ hmr å¯¹ Python åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Œå¯ä»¥çœ‹çœ‹ [è¿™ä¸ªä»“åº“](https://github.com/promplate/hmr?tab=readme-ov-file#usage) é‡Œçš„ä¸¤ä¸ªè§†é¢‘ï¼Œå¦å¤–æˆ‘è¿˜åˆ†åˆ«ç»™ FastAPI å’Œ Flask å¼€äº† Discussionï¼Œåˆ†åˆ«ä¹Ÿé™„ä¸Šäº†ç²¾è‡´çš„å½•å±ï¼Œæ¬¢è¿æ¥ä¸‹é¢è®¨è®ºï¼š
>
> [FastAPI](https://github.com/fastapi/fastapi/discussions/13192) | [Flask](https://github.com/orgs/pallets/discussions/5668) ï¼ˆæˆ‘è¿˜å‡†å¤‡ç»™ gradioã€streamlitã€pytestã€litestar ä¹Ÿæä¸€ä¸‹ï¼‰
>
> ä¸è¿‡æ²¡æ—¶é—´äº†ï¼Œæ˜å¤©æˆ‘è¦å›å®¶äº†ï¼Œæ‰€ä»¥å…ˆä¸æ€¥ç€æäº†
>

## æ€ä¹ˆå®ç°çš„
æ­£å¦‚æˆ‘ä»“åº“ä¸­æ‰€è¯´ï¼ŒHMR å®ç°å¯ä»¥æ‹†æˆä¸‰éƒ¨åˆ†ï¼š

1. å®ç°é‚£å‡ ä¸ªååº”æ€§åŸè¯­
2. è®©åŠ è½½è¿›æ¥çš„åŒ…ï¼Œèƒ½è‡ªåŠ¨è·Ÿè¸ªä¾èµ–
    1. å®ç°ä¸€ä¸ª Reactive çš„ contextï¼ˆæŒ‰ item è¿½è¸ªä¾èµ–ï¼‰
    2. å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ ModuleTypeï¼Œä½¿ç”¨è¿™ä¸ª Reactive çš„ context
    3. å®ç°ä¸€ä¸ª Loader ä»¥åŠä¸€ä¸ª MetaPathFinderï¼Œå¹¶æ·»åŠ åˆ°`sys.meta_path`ä¸­ï¼Œè¿™æ ·æ–°åŠ è½½è¿›æ¥çš„æ¨¡å—å°±ä¼šç”¨æˆ‘ä»¬çš„æœºåˆ¶æ¥åˆå§‹åŒ–
3. é€šè¿‡`watchfiles`ç›‘å¬ FS å˜åŒ–ï¼Œå¹¶ invalidate å¯¹åº”çš„ module

å…¶ä¸­ç¬¬ 3 éƒ¨åˆ†æ­£å¦‚å…¶å­—é¢æ„æ€ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯ watchfiles çš„åŸºæœ¬ç”¨æ³•ï¼Œæ²¡ä»€ä¹ˆåˆ›æ„ã€‚æœ¬æ–‡é‡ç‚¹è®²ç¬¬äºŒéƒ¨åˆ†

## Reactive namespace
æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª MutableMappingï¼Œç±»ä¼¼ Vue çš„ [reactive](https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive)ï¼Œæ¯ä¸ª`__getitem__`ä¼šè§¦å‘å¯¹åº” item çš„ trackï¼Œè€Œ`__setitem__`å’Œ`__delitem__`ä¼šè§¦å‘å¯¹åº” item çš„ notifyã€‚å®ç°å¦‚ä¸‹ï¼š

```python
class Reactive[K, V](Subscribable, MutableMapping[K, V]):
    UNSET: V = object()  # type: ignore

    def __hash__(self):
        return id(self)

    def _null(self):
        return Signal(self.UNSET, self._check_equality)

    def __init__(self, initial: Mapping[K, V] | None = None, check_equality=True):
        super().__init__()
        self._signals = defaultdict[K, Signal[V]](self._null) if initial is None else defaultdict(self._null, {k: Signal(v, check_equality) for k, v in initial.items()})
        self._check_equality = check_equality

    def __getitem__(self, key: K):
        value = self._signals[key].get()
        if value is self.UNSET:
            raise KeyError(key)
        return value

    def __setitem__(self, key: K, value: V):
        with Batch():
            self._signals[key].set(value)
            self.notify()

    def __delitem__(self, key: K):
        state = self._signals[key]
        if state.get(track=False) is self.UNSET:
            raise KeyError(key)
        with Batch():
            state.set(self.UNSET)
            self.notify()

    def __iter__(self):
        self.track()
        return iter(self._signals)

    def __len__(self):
        self.track()
        return len(self._signals)

    def __repr__(self):
        self.track()
        return repr({k: v.get() for k, v in self._signals.items()})

    def items(self):
        self.track()
        return ({k: v.get() for k, v in self._signals.items()}).items()
```

å¯ä»¥çœ‹åˆ°æˆ‘è¿˜å¤šåšäº†ä¸€äº›å¤„ç†ï¼šæ¯”å¦‚è¿™ä¸ª mapping æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª Subscribableï¼Œåƒæ˜¯å¯¹`.items`çš„ä½¿ç”¨å°±ä¼šè®¢é˜…å®ƒçš„å…¨éƒ¨æ”¹åŠ¨ï¼ˆå¯ä»¥è¿™ä¹ˆç†è§£ï¼šå¦‚æœæˆ‘ç›´æ¥`str()`äº†æŸä¸ª module çš„`.__dict__`ï¼Œæˆ‘å°±ä¾èµ–äºå®ƒçš„æ‰€æœ‰å…ƒç´ ï¼‰

### ä¸€äº›ç»†èŠ‚
exec çš„æ—¶å€™ï¼Œglobals å¿…é¡»æ˜¯ dict çš„å­ç±»ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™ä¸ª Reactive ä¸èƒ½æ˜¯ dict çš„å­ç±»ï¼Œå› ä¸ºä¸€ä¸ª Subscribable å¿…é¡»æ˜¯èƒ½æ·»åŠ åˆ°ä¸€ä¸ª set é‡Œçš„ï¼Œè€Œ set é‡Œä¸èƒ½æ˜¯å¯å˜å…ƒç´ ï¼Œå¥½åƒè¿™ä¸ dict å†²çªäº†ï¼ˆæ‰€ä»¥æˆ‘å¿…é¡»å¾—åŠ ä¸€ä¸ª`__hash__`å‡½æ•°ï¼‰ã€‚å¦å¤–åæ¥æ–‡æ¡£è¯´ globals ç”šè‡³ä¸èƒ½æ˜¯ dict å­ç±»ï¼Œå¿…é¡»å¾—æ˜¯ dict ä¸¥æ ¼æœ¬èº«ï¼ˆå¦åˆ™æˆ‘å‘ç°ä¼šæœ‰ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ï¼Œå…³äºåœ¨ç±»ä¸­çš„å®šä¹‰åŸŸå•¥çš„ï¼‰ï¼Œè¯¦è§æˆ‘ç»™ CPython çš„å”¯ä¸€ä¸€ä¸ª Issueï¼š[121306](https://github.com/python/cpython/issues/121306)ï¼ˆè¯´èµ·æ¥ 3.14 æœ‰æœ› revert è¿™ä¸ªï¼Œä¸çŸ¥é“ä»–ä»¬åé¢äº‰è®ºçš„æ€ä¹ˆæ ·äº†ï¼‰

è¯´å›æ¥ï¼Œglobals å¿…é¡»æ˜¯ä¸¥æ ¼ dictï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æŠŠè¿™ä¸ª Reactive ä½œä¸º`locals`ä¼ è¿‡å»ï¼Œä½†æ˜¯ locals ä¸ä¼šç»§æ‰¿åˆ°å‡½æ•°é‡Œï¼Œæ‰€ä»¥è¿˜å¾—æŠŠå¯¹æˆ‘ä»¬è¿™ä¸ª`Reactive`çš„å†™å…¥ï¼Œå†™å›åˆ°è¿™ä¸ª`initial`é‡Œå»ã€‚

```python
class NamespaceProxy(Reactive[str, Any]):
    def __init__(self, initial: MutableMapping, check_equality=True):
        super().__init__(initial, check_equality)
        self._original = initial

    def __setitem__(self, key, value):
        self._original[key] = value
        return super().__setitem__(key, value)

    def __delitem__(self, key):
        del self._original[key]
        return super().__delitem__(key)
```

## Reactive module
è¿™ä¸ªå°± debug éº»çƒ¦ã€‚print çš„æ—¶å€™è¿˜ä¼šæœ‰å„ç§å¾ªç¯è®¿é—®çš„æŠ¥é”™ï¼Œæ€»ä¹‹å°±æ˜¯å¾ˆç—›è‹¦ï¼Œè·‘é€šäº†å°±å†ä¹Ÿä¸æƒ³ç¢°äº†ï¼š

```python
class ReactiveModule(ModuleType):
    def __init__(self, file: Path, namespace: dict, name: str, doc: str | None = None):
        super().__init__(name, doc)
        self.__is_initialized = False
        self.__dict__.update(namespace)
        self.__is_initialized = True

        self.__namespace = namespace
        self.__namespace_proxy = NamespaceProxy(namespace)
        self.__file = file

    @property
    def file(self):
        if is_called_in_this_file():
            return self.__file
        raise AttributeError("file")

    @memoized_method
    def __load(self):
        code = compile(self.__file.read_text("utf-8"), str(self.__file), "exec", dont_inherit=True)
        exec(code, self.__namespace, self.__namespace_proxy)

    @property
    def load(self):
        if is_called_in_this_file():
            return self.__load
        raise AttributeError("load")

    def __dir__(self):
        return iter(self.__namespace_proxy)

    def __getattribute__(self, name: str):
        if name == "__dict__" and self.__is_initialized:
            return self.__namespace
        return super().__getattribute__(name)

    def __getattr__(self, name: str):
        try:
            return self.__namespace_proxy[name]
        except KeyError as e:
            raise AttributeError(*e.args) from e

    def __setattr__(self, name: str, value):
        if is_called_in_this_file():
            return super().__setattr__(name, value)
        self.__namespace_proxy[name] = value
```

è¿™é‡Œç”¨åˆ°ä¸€ä¸ª`_is_called_in_this_file`ï¼Œå…¶å®å°±æ˜¯åˆ¤æ–­è°ƒç”¨è€…çš„ frame æ˜¯ä¸æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š

```python
def is_called_in_this_file() -> bool:
    frame = currentframe()  # this function
    assert frame is not None

    frame = frame.f_back  # the function calling this function
    assert frame is not None

    frame = frame.f_back  # the function calling the function calling this function
    assert frame is not None

    return frame.f_globals.get("__file__") == __file__
```

ä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Œå› ä¸ºæˆ‘è¿™ä¸ª`load`å¿…é¡»å¾—åœ¨åé¢çš„`ModuleFinder`é‡Œè°ƒç”¨ï¼Œæ‰€ä»¥ä¸èƒ½æ˜¯åŒä¸‹åˆ’çº¿å¤§å¤´çš„`__load`å½¢å¼ï¼Œä½†æ˜¯å¦‚æœæ˜¯`_load`æˆ–è€…`load`éƒ½å®¹æ˜“ä¸æ¨¡å—çš„çœŸå®çš„å±æ€§å†²çªï¼Œæ‰€ä»¥æˆ‘å°±åšäº†è¿™ä¹ˆä¸€ä¸ª hackï¼Œå®ç°äº†ç±»ä¼¼â€œpackage-private çº§å˜é‡â€çš„æ•ˆæœï¼Œæˆ‘å¯¹è¿™ä¸ªè¿˜è›®æ´‹æ´‹å¾—æ„çš„ï¼Œå“ˆå“ˆå“ˆ

## Module finder & loader
```python
class ReactiveModuleLoader(Loader):
    def __init__(self, file: Path, is_package=False):
        super().__init__()
        self._file = file
        self._is_package = is_package

    def create_module(self, spec: ModuleSpec):
        namespace = {"__file__": str(self._file), "__spec__": spec, "__loader__": self, "__name__": spec.name}
        if self._is_package:
            assert self._file.name == "__init__.py"
            namespace["__path__"] = [str(self._file.parent)]
        return ReactiveModule(self._file, namespace, spec.name)

    def exec_module(self, module: ModuleType):
        assert isinstance(module, ReactiveModule)
        module.load()


class ReactiveModuleFinder(MetaPathFinder):
    def __init__(self, includes: Iterable[str] = ".", excludes: Iterable[str] = ()):
        super().__init__()
        self.includes = [Path(i).resolve() for i in includes]
        self.excludes = [Path(e).resolve() for e in excludes]

    def _accept(self, path: Path):
        return path.is_file() and not is_relative_to_any(path, self.excludes) and is_relative_to_any(path, self.includes)

    def find_spec(self, fullname: str, paths: Sequence[str] | None, _=None):
        if fullname in sys.modules:
            return None

        for p in sys.path:
            directory = Path(p).resolve()
            if directory.is_file():
                continue

            file = directory / f"{fullname.replace('.', '/')}.py"
            if self._accept(file) and (paths is None or is_relative_to_any(file, paths)):
                return spec_from_loader(fullname, ReactiveModuleLoader(file), origin=str(file))
            file = directory / f"{fullname.replace('.', '/')}/__init__.py"
            if self._accept(file) and (paths is None or is_relative_to_any(file, paths)):
                return spec_from_loader(fullname, ReactiveModuleLoader(file, is_package=True), origin=str(file), is_package=True)
```

å¾ˆå¸¸è§„ï¼Œå¾ˆæ— èŠ

## Reload
æ ¸å¿ƒæ˜¯æˆ‘è¿™ä¸ª`on_events`ï¼Œå› ä¸º watchfiles çš„ watch å’Œ awatch yield å‡ºæ¥çš„ events éƒ½é•¿è¿™æ ·ï¼Œå°±åªç”¨å†™ä¸€ä»½äº†ã€‚

ç›®å‰åªè€ƒè™‘äº† modified äº‹ä»¶ã€‚å…¶ä»–çš„æƒ…å†µæ˜¯æœªå®šä¹‰çš„ å“ˆå“ˆå“ˆ



```python
def on_events(self, events: Iterable[tuple[int, str]]):
    from watchfiles import Change

    if not events:
        return

    path2module = get_path_module_map()

    with batch():
        for type, file in events:
            if type is Change.modified:
                path = Path(file).resolve()
                if path.samefile(self.entry):
                    self.run_entry_file.invalidate()
                elif module := path2module.get(path):
                    try:
                        module.load.invalidate()
                    except Exception as e:
                        sys.excepthook(e.__class__, e, e.__traceback__)

        for module in path2module.values():
            try:
                module.load()
            except Exception as e:
                sys.excepthook(e.__class__, e, e.__traceback__)
        self.run_entry_file()

```

è¿™é‡Œç”¨åˆ°ä¸€ä¸ª`.invalidate()`ï¼ŒåŒ…æ‹¬å‰é¢ä¹Ÿç”¨åˆ°ä¸€ä¸ª`memoized_method`ï¼Œè¿™ä¸ªç¡®å®è¿˜æ²¡è®²ï¼Œä½†å…¶å®å°±æ˜¯`createMemo`ä¸€æ ·çš„ã€‚

æˆ‘è¿™é‡Œå…¶å®æ˜¯æŠŠ memoized å½“â€œæƒ°æ€§çš„ effectâ€ç”¨äº†ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘invalidate ä¿®æ”¹çš„æ¨¡å—ï¼Œç„¶åæ¯ä¸ªæ¨¡å—éƒ½ call ä¸€ä¸‹ loadï¼Œä¿è¯å®ƒæ˜¯æœ€æ–°çš„ï¼Œå…¶ä¸­çš„ç¼“å­˜å•¥çš„å°±äº¤ç»™æœºåˆ¶äº†ï¼Œæµ‹è¯•äº†åŠå¤©æœ€åç»ˆäºæ²¡é—®é¢˜äº†

### Memoized
è€Œå…¶ä¸­`createMemo`å…¶å®å°±æ˜¯æƒ°æ€§çš„ä¸€ä¸ª`derived`è¿™æ ·çš„æ„æ€ã€‚æˆ‘è§‰å¾— memoized æ›´å¼ºè°ƒäº†è¿™ç§æƒ°æ€§æ„Ÿï¼Œæ‰€ä»¥æ²¡ç”¨ Derived è¿™ä¸ªè¯ï¼š

```python
class Memoized[T](Subscribable, BaseComputation[T]):
    def __init__(self, fn: Callable[[], T]):
        super().__init__()
        self.fn = fn
        self.is_stale = True
        self.cached_value: T
        self._recompute = False

    def trigger(self):
        self.track()
        if self._recompute:
            self._recompute = False
            self._before()
            try:
                self.cached_value = self.fn()
                self.is_stale = False
            finally:
                self._after()
        else:
            self.invalidate()

    def __call__(self):
        if self.is_stale:
            self._recompute = True
            self.trigger()
            assert not self._recompute
        return self.cached_value

    def invalidate(self):
        if not self.is_stale:
            del self.cached_value
            self.is_stale = True
```

memoized_method å…¶å®å°±æ˜¯åœ¨è¿™å¤–é¢åŒ…è£¹äº†ä¸€å±‚ descriptor è€Œå·²ï¼š

```python
class MemoizedMethod[T, I]:
    def __init__(self, method: Callable[[I], T]):
        super().__init__()
        self.method = method
        self.map = WeakKeyDictionary[I, Memoized[T]]()

    @overload
    def __get__(self, instance: None, owner: type[I]) -> Self: ...
    @overload
    def __get__(self, instance: I, owner: type[I]) -> Memoized[T]: ...

    def __get__(self, instance: I | None, owner):
        if instance is None:
            return self
        if memo := self.map.get(instance):
            return memo
        self.map[instance] = memo = Memoized(partial(self.method, instance))
        return memo
```

å”‰ï¼Œå®åœ¨æ²¡ä»€ä¹ˆæ—¶é—´ï¼Œè¦å›å»ç¡è§‰äº†ï¼Œæ‰€ä»¥å†™çš„å¾ˆåŒ†å¿™ï¼Œç®€ç›´ä»€ä¹ˆéƒ½æ²¡å†™ï¼Œä¸ç®¡äº†

---

## ç»“è¯­
æ­£å¦‚æˆ‘åœ¨é‚£ä¸ª hmr ä»“åº“é‡Œå†™çš„ï¼Œç”Ÿæ€æœ€é‡è¦ï¼Œæˆ‘è¿˜æ²¡æ‰¾ pytestï¼ˆå› ä¸ºæˆ‘ä¸å¤ªä¼šåš pytest pluginï¼Œæ‰€ä»¥æ²¡æ³•ç»™ä»–ä»¬ä¸€ä¸ªå¾ˆå¸å¼•äººçš„ demoï¼‰ï¼Œç›®å‰æ‰¾äº† FastAPI å’Œ Flaskï¼Œå…¶ä¸­ FastAPI åº•ä¸‹æœ‰ä¸ª uvicorn çš„ç»´æŠ¤è€…è¯„è®ºäº†æˆ‘å‡ å¥ï¼Œæé†’äº†æˆ‘æˆ‘æ²¡è€ƒè™‘é™æ€æ–‡ä»¶çš„è¯»å–ï¼š

[https://github.com/fastapi/fastapi/discussions/13192#discussioncomment-11796729](https://github.com/fastapi/fastapi/discussions/13192#discussioncomment-11796729)

# [å¦‚ä½•å†™å‡ºå¥½ä»£ç ](/blog/icuqa0e3yrmfcol5) (January 9)

å¼€å¯æ‰€æœ‰ lint è§„åˆ™ï¼Œç„¶åä¸€ä¸ªä¸ªçœ‹è¿‡å» å“ˆå“ˆå“ˆå“ˆ

---

å¤¸å¼ äº†ï¼Œè¿™æ ·æ•ˆç‡æ¯”è¾ƒä½ã€‚ä¸å¦‚å…ˆè€è€å®å®æŠŠ lint è§„åˆ™ä¸€æ¡æ¡çœ‹è¿‡å»ã€‚æ¯”å¦‚ ruff çš„ [rules](https://docs.astral.sh/ruff/rules/)

# [å®ç°äº† Python çš„ HMR](/blog/mwgggl2taiigch6w) (January 6)

æœ‰ç‚¹å…´å¥‹ï¼Œä½†æ˜å¤©è¿˜è¦è€ƒè¯•ï¼Œæ‰€ä»¥ä¸èƒ½è®©è‡ªå·±ä¸€è‡´å…´å¥‹ä¸‹å»ğŸ˜‚

æˆ‘åšå®¢å¥½åƒè¿˜æ²¡å®ç°ä¸Šä¼ è§†é¢‘çš„åŠŸèƒ½ï¼ˆå…¶å®æ˜¯è¯­é›€ä¸è®©æ”¾ï¼‰ï¼Œäºæ˜¯å°±éšä¾¿ä¼ äº†ä¸‹ [b ç«™](https://www.bilibili.com/video/BV1TsrVYbEb7)



<iframe src="https://player.bilibili.com/player.html?bvid=BV1TsrVYbEb7&autoplay=0" style="aspect-ratio: 33 / 20; height: auto"></iframe>

# [ååº”å¼ç¼–ç¨‹ï¼Œä½†æ˜¯ Python](/blog/tpbohtk3z0w63et9) (January 4)

è®¤è¯†æˆ‘çš„äººæˆ–å¤šæˆ–å°‘åº”è¯¥éƒ½çŸ¥é“ï¼Œæˆ‘çš„ç†æƒ³ä¹‹ä¸€å°±æ˜¯æŠŠ JavaScript çš„å¼€å‘ä½“éªŒèµ‹èƒ½ Pythonã€‚[marimo](https://marimo.io/) åšçš„ä¸é”™ï¼Œä½†æ˜¯æˆ‘è¿™ç§è¿½æ±‚ç»†èŠ‚çš„äººä¸æ­¢äºæ­¤ï¼Œæ‰€ä»¥è‡ªå·±å®ç°ä¸€å¥—ååº”å¼ç¼–ç¨‹æ˜¯é€ƒä¸è¿‡çš„ï¼ˆå¦å¤–ä¹Ÿæ˜¯å› ä¸ºï¼Œæœäº†ä¸€åœˆï¼Œä¼¼ä¹ Python çœŸæ²¡è¿™ç§ä¸œè¥¿ï¼‰

æ˜¨å¤©åœ¨åºŠä¸Šä¸€æ—¶å…´èµ·ï¼Œäº†è§£äº†ä¸€ä¸‹ signal çš„è¿™ç§é£æ ¼çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç„¶åè®© GPT ç”¨ python å®ç°äº†ä¸€éã€‚ä»Šå¤©è€ƒå®Œè¯•å°±ç«‹é©¬æ¥è¯•äº†ä¸‹ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ã€‚

![](/nlark/yuque/0/2025/png/26070246/1735984622152-47eb3884-ceae-4905-b725-75d5de1ef6dd.png)

æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼Ÿ

---

æˆ‘çš„ç›®çš„æ˜¯ï¼Œè®©ä½¿ç”¨æ–¹å¼å°½é‡ pythonicï¼Œæ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼š

```python
from reactivity import State

class Counter:
    value = State()
```

`value`çœ‹èµ·æ¥æ˜¯ä¸ªç±»å˜é‡ï¼Œä½†å…¶å®æ˜¯ä¸ª descriptorï¼Œæ˜¯ç±»ä¼¼`property`è¿™æ ·çš„ä¸œè¥¿ã€‚æ‰€ä»¥åœ¨ç±»é‡Œç±»å¤–éƒ½å¯ä»¥åƒè®¿é—®æ™®é€šçš„å˜é‡ä¸€æ ·è®¿é—®å®ƒï¼Œç±»ä¼¼`c.value``self.value`éƒ½æ˜¯å¯ä»¥çš„ï¼Œè€Œä¸”ç±»å‹æ£€æŸ¥å™¨å‹å¥½ï¼Œå®Œå…¨æ³›å‹åŒ–ã€‚

å®ç°å¦‚ä¸‹ï¼š

```python
class State[T]:
    def __init__(self, initial_value: T = None):
        self._value: T = initial_value
        self.subscribers = WeakSet[Callable[[], Any]]()

    def get(self):
        for computation in _current_computations:
            self.subscribers.add(computation)
            computation.dependencies.add(self)
        return self._value

    def set(self, value: T):
        self._value = value
        if _batches:
            _batches[-1].callbacks.extend(self.subscribers)
        else:
            for subscriber in self.subscribers:
                subscriber()

    def __get__(self, instance, owner):
        return self.get()

    def __set__(self, instance, value: T):
        self.set(value)

_current_computations = []
_batches = []
```

Computation çš„å®ç°å¦‚ä¸‹ï¼š

```python
class Computation[T]:
    def __init__(self, fn: Callable[[], T], auto_run=True):
        self.fn = fn
        self.dependencies = WeakSet[State]()

        if auto_run:
            self()

    def __call__(self):
        self.dependencies.clear()  # clear old dependencies
        _current_computations.append(self)
        value = self.fn()
        last = _current_computations.pop()
        assert last is self  # sanity check
        return value

    def dispose(self):
        for dep in self.dependencies:
            dep.subscribers.remove(self)
```

å¾ˆç®€å•å§ï¼Œä½†æ˜¯å…¶å®æ²¡æœ‰åšä»€ä¹ˆ cleanup ä¹‹ç±»çš„ã€‚

ç„¶å batch çš„å®ç°å¦‚ä¸‹ï¼š

```python
class Batch:
    def __init__(self):
        self.callbacks: list[Callable] = []

    def __enter__(self):
        _batches.append(self)

    def flush(self):
        callbacks = set(self.callbacks)
        self.callbacks.clear()
        for callback in callbacks:
            callback()

    def __exit__(self, *_):
        last = _batches.pop()
        assert last is self
        self.flush()
```

è¿™æ§åˆ¶äº†ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘å›è°ƒã€‚ä½¿ç”¨ä¸Šä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥

```python
with Batch():
    ...
```

å°±å¥½äº†ï¼Œæ‰€æœ‰çš„ callbacks ä¼šåœ¨é€€å‡ºè¿™ä¸ªå—çš„æ—¶å€™æ‰§è¡Œã€‚

å¦å¤–ï¼Œæˆ‘è¿˜å®ç°äº†ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹çš„å·¥å…·ï¼Œæ¯”å¦‚ï¼š

```python
from collections.abc import Callable
from functools import wraps
from typing import overload

from .memo import Memoized, MemoizedProperty
from .primitives import Batch, Computation, State


def create_signal[T](initial_value: T = None) -> tuple[Callable[[], T], Callable[[T], None]]:
    signal = State(initial_value)
    return signal.get, signal.set


def create_effect[T](fn: Callable[[], T], auto_run=True):
    return Computation(fn, auto_run)


def create_memo[T](fn: Callable[[], T]):
    return Memoized(fn)


def memoized_property[T, Self](method: Callable[[Self], T]):
    return MemoizedProperty(method)


@overload
def batch() -> Batch: ...
@overload
def batch[**P, T](func: Callable[P, T]) -> Callable[P, T]: ...


def batch[**P, T](func: Callable[P, T] | None = None) -> Callable[P, T] | Batch:
    if func is not None:

        @wraps(func)
        def wrapped(*args, **kwargs):
            with Batch():
                return func(*args, **kwargs)

        return wrapped

    return Batch()
```

`batch`ä¸ä»…å¯ä»¥`with`è¿™æ ·ç”¨ï¼Œä¹Ÿèƒ½`@batch`è¿™æ ·ä½œä¸ºä¸€ä¸ªè£…é¥°å™¨æ¥ç”¨ã€‚

---

ç•™ç‚¹æ‚¬å¿µã€‚è¿™é‡Œé¢è¿˜æœ‰ç”¨åˆ°ä¸¤ä¸ª`create_memo`å’Œ`memoized_property`æ²¡è®²

# [å®ç°ä¸€ä¸ªç±»å‹å®‰å…¨çš„ (f1, f2) -> f2(f1()) å‡½æ•°](/blog/pxydthha0dp6yro9) (December 29, 2024)

```python
def compose(first, second):
    return lambda: second(first())
```

æœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œå½“ä½ éœ€è¦ **ä¸²è”** ä¸¤ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿äº†ï¼Œä¸‹é¢æˆ‘ä¸¾ä¾‹ä¸€ä¸ªä½¿ç”¨åœºæ™¯

### ä¾‹å­ï¼šåºåˆ—åŒ–å¹¶ç”¨ bzip2 å‹ç¼©
å¤§å®¶éƒ½çŸ¥é“ python å¯¹è±¡çš„åºåˆ—åŒ–ç”¨`pickle.dumps`ï¼Œå‹ç¼©ç”¨`***.compress`ï¼ˆ***æ›¿æ¢æˆå„ç§åº“ï¼Œæ¯”å¦‚æ ‡å‡†åº“çš„ gzipï¼Œbz2ï¼Œlzma éƒ½æ˜¯è¿™æ ·ï¼‰

å‰è€…æ˜¯`(Any)->bytes`ï¼Œåè€…æ˜¯`bytes->bytes`ï¼Œå¦‚æœä½ è¦å°è£…ä¸€ä¸ªâ€œåºåˆ—åŒ–å¹¶å‹ç¼©â€çš„å‡½æ•°ï¼Œä½ å¾—è¿™ä¹ˆå†™ï¼š

```python
def dumps(object: Any):
    serialized = pickle.dumps(object)
    compressed = bz2.compress(serialized)
    return compressed
```

å½“ç„¶è¿™ç§ä¸€æ¬¡æ€§çš„ä»£ç ä¸€èˆ¬ä¼šç¼©å†™æˆä¸€è¡Œï¼š

```python
def dumps(object: Any):
    return bz2.compress(pickle.dumps(object))
```

å†åŠ ä¸Šååºåˆ—åŒ–çš„ä»£ç ï¼š

```python
def loads(data: bytes):
    return pickle.loads(bz2.decompress(data))
```

è¿™æ ·ï¼Œå†åŠ ä¸Šç©ºè¡Œï¼Œç›¸å½“äºä½ ä»£ç åŠ äº†8è¡Œã€‚ä¸èƒ½å¿å§

ç”¨æˆ‘ä»¬åˆšåˆšçš„`compose`å‡½æ•°ï¼Œåªè¦è¿™æ ·å°±è¡Œäº†ï¼š

```python
dumps = compose(pickle.dumps, bz2.compress)
loads = compose(bz2.decompress, pickle.loads)
```

åªè¦ä¸¤è¡Œï¼Œè€Œä¸”æ¸…æ¸…æ¥šæ¥šã€‚

### ä½†æ˜¯ç±»å‹å‘¢ï¼Ÿ
æˆ‘ä»¬åˆšåˆšçš„`compress`å‡½æ•°ï¼Œæ²¡æœ‰ç±»å‹æ³¨è§£ï¼Œä½ å¯èƒ½è§‰å¾—è¿™å¾ˆç®€å•ï¼Œè¿™æ ·å°±è¡Œäº†ï¼š

```python
def compose(first: Callable, second: Callable):
    return lambda: second(first())
```

![](/nlark/yuque/0/2024/png/26070246/1735472852005-53c15b9f-7177-4f9d-9212-fd91054c0007.png)

è¿™æ ·åªèƒ½ç¡®ä¿è¾“å…¥`compose`çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¿è¯ï¼š

1. ç¬¬äºŒä¸ªå‡½æ•°å¯ä»¥æ¥å—ç¬¬ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå‚æ•°
2. `compose`åçš„å‡½æ•°çš„è¿”å›å€¼ä¸`second`çš„è¿”å›å€¼ç›¸åŒ

![](/nlark/yuque/0/2024/png/26070246/1735473023962-6e659472-871f-4033-94a7-c2b80940befa.png)

æˆ‘ä»¬å¸Œæœ›`h()`çš„ç±»å‹æ¨æ–­æ˜¯`Literal[42]`æˆ–è€…`int`å¯¹å§

### æ³›å‹
Python æœ‰å‹‰å¼ºå¤Ÿç”¨çš„æ³›å‹æ”¯æŒï¼Œè€Œä¸”æ—©åœ¨ Python 3.12 å°±å¼€å§‹æ”¯æŒ typescript å¼çš„æ›´æ–¹ä¾¿çš„å£°æ˜æ³›å‹çš„æ–¹å¼ï¼š

[PEP 695: Type Parameter Syntax â€”â€” What's New In Python 3.12](https://docs.python.org/3/whatsnew/3.12.html#pep-695-type-parameter-syntax)

è¿™ä¹ˆå†™å°±å¯ä»¥äº†ï¼š

```python
def compose[T1, T2](first: Callable[[], T1], second: Callable[[T1], T2]):
    return lambda: second(first())
```

ä½ çœ‹æˆ‘ç”šè‡³è¿”å›å€¼éƒ½ä¸ç”¨æ ‡ï¼Œ`pyright`èƒ½æ¨ç®—å‡ºæ¥è¿”å›çš„æ˜¯`Callable[[], T2]`

![](/nlark/yuque/0/2024/png/26070246/1735473360737-9efec25a-13b0-4c23-baf4-d11174675677.png)

ä½ çœ‹ï¼Œè¿™æ ·é”™è¯¯å°±èƒ½æ£€æŸ¥å‡ºæ¥å•¦â˜€ï¸

ä¿®å¤äº†`g`ä¹‹åï¼Œç±»å‹ä¹Ÿæ­£ç¡®æ¨æ–­å•¦ï¼š

![](/nlark/yuque/0/2024/png/26070246/1735473423814-35d15f0e-6dbd-43a3-9b0f-48d14a5d6e22.png)

### å¦‚æœ `first()`æœ‰å‚æ•°å‘¢
ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ç”¨é€”ä¸å¤Ÿå¹¿æ³›ï¼Œå› ä¸ºå®ƒç”¨äºæ— å‚è°ƒç”¨ã€‚è€Œæœ‰æ—¶å€™æˆ‘å¾ˆéœ€è¦è¿™ä¸ª compose å‡ºæ¥çš„å‡½æ•°ï¼Œä»ç„¶æœ‰ç€åŸæ¥çš„ first å‡½æ•°çš„å‚æ•°å®šä¹‰

å…¶å®æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯ä¸€ä¸ªâ€œè¾“å…¥ first çš„å‚æ•°ï¼Œè¿”å› second çš„è¿”å›å€¼â€è¿™ä¹ˆä¸€ä¸ªå‡½æ•°å¯¹å§ï¼Œé‚£å°±ç®€å•äº†ï¼š

```python
def compose[T1, T2, **P](first: Callable[P, T1], second: Callable[[T1], T2]) -> Callable[P, T2]:
    return lambda *args, **kwargs: second(first(*args, **kwargs))
```

æˆ‘åªæ˜¯æŠŠ`Callable[[], T1]`æ”¹æˆäº†`Callable[P, T1]`ï¼ŒåŠ ä¸Šæ˜ç¡®æœ€åè¿”å›`Callable[P, T2]`å°±å®Œäº‹å„¿å•¦ã€‚

å½“ç„¶ï¼Œå¦‚æœä½ ä¸å–œæ¬¢ lambdaï¼Œä½ å¯ä»¥è¿™æ ·å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ ·ç”šè‡³èƒ½å°‘å†™`-> Callable[P, T2]`è¿™ä¸ªè¿”å›å€¼å£°æ˜

![](/nlark/yuque/0/2024/png/26070246/1735474084051-9b534f1c-94c8-47f8-b8ae-1a609e0ff8b4.png)

> å³è¾¹çš„è¿”å›å€¼å£°æ˜æ˜¯å®ƒè‡ªå·±ç”Ÿæˆçš„ï¼Œè¿™ä¸ªæ˜¾ç¤ºæ˜¯ IDE çš„ inlay hintï¼Œä¸æ˜¯æˆ‘æ‰“ä¸Šå»çš„
>

è¿™æ ·ä½ å°±å¯ä»¥è®©è¿™ä¸ª compose å‡ºçš„å‡½æ•°å…·æœ‰å’Œ`first`ä¸€æ ·çš„å…¥å‚ç­¾åå•¦ï¼š

![](/nlark/yuque/0/2024/png/26070246/1735474549522-11976e83-e95f-40d6-976f-de24f0a3528e.png)

è¿™ä¸ªä¾‹å­å…¶å®æŒºæ²¡ç”¨çš„ï¼Œä½†æ˜¯æˆ‘ä¸€æ—¶é—´æƒ³ä¸åˆ°å¥½ä¾‹å­ã€‚æ€»ä¹‹ä½¿ç”¨åœºæ™¯å°±æ˜¯ï¼Œå¯èƒ½å‰é¢é‚£ä¸ªå‡½æ•°æœ‰å¾ˆå¤šå‚æ•°ï¼Œè€Œä¸”ä½ æ˜¯ä¼šç”¨åˆ°è¿™äº›å‚æ•°çš„ã€‚

### åè¯ï¼šä¸ºä»€ä¹ˆåšè¿™ä¸ª
å› ä¸ºæˆ‘æƒ³è¦ä¸€ä¸ªç±»å‹å®‰å…¨çš„`json.dumps`å’Œ`json.loads`ã€‚åŸæœ¬çš„`json.dumps`ä¸æ˜¯`(Any)->str`å˜›ï¼Œæˆ‘å¸Œæœ›æ˜¯`(Input)->str`ï¼Œè€ŒåŸæœ¬çš„`json.loads`ä¸æ˜¯`(str|bytes)->Any`å˜›ï¼Œæˆ‘è¦çš„æ˜¯`(str|bytes)->Output`ï¼Œå…¶ä¸­`Input`å’Œ`Output`æ˜¯æˆ‘ä¸¤ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„`TypedDict`

å…¶ä¸­ loads å¾ˆç®€å•ï¼Œç›´æ¥ç”¨å®ƒçš„`validate_json`å°±å¥½äº†ï¼š

![](/nlark/yuque/0/2024/png/26070246/1735476062616-0dd44570-56b5-41a2-b018-09d74087e4c2.png)

è¿™ä¸ªå…¥å‚ç­¾åå’Œè¡¥å…¨ï¼Œå¤ªå®Œç¾äº†

![](/nlark/yuque/0/2024/png/26070246/1735477144398-e9119ca7-5ab3-4757-873f-8a4417e8ffb9.png)

è¾“å‡ºç±»å‹ä¹Ÿæ­£å¸¸

æœ¬æ¥ä»¥ä¸ºdumpsä¹Ÿå¯ä»¥è¿™ä¹ˆç®€å•

![](/nlark/yuque/0/2024/png/26070246/1735475811213-9e1fc51a-fb84-47af-8eae-a2c925064ea7.png)

ä½†æ˜¯`pydantic`çš„ TypeAdapter å®ä¾‹çš„ dump_json å±…ç„¶æ˜¯è¿”å› bytes çš„ï¼å±…ç„¶ä¸æ˜¯å’Œ BaseModel ä¸€æ ·åœ°è¿”å› strï¼ç®€ç›´æ˜¯å¤§å‘

ä¸è¿‡æˆ‘åˆšåˆšç¿»äº†ä¸‹[æ–‡æ¡£](https://docs.pydantic.dev/latest/concepts/type_adapter/)ï¼Œå…¶å®æœ‰æåˆ°çš„ï¼š

![](/nlark/yuque/0/2024/png/26070246/1735476611361-33108670-01b5-4943-b5f6-c8745e02cc70.png)

é‚£å°±åªå¥½è‡ªå·±è½¬æˆ str å’¯ï¼Œè™½ç„¶å°±æ˜¯`.decode()`çš„äº‹æƒ…ï¼Œä½†æˆ‘å¸Œæœ›å®ƒä»ç„¶æ˜¯ä¸€ä¸ª`dumps()`å‡½æ•°çš„å½¢å¼ï¼Œè€Œä¸”æˆ‘åœ¨ä¸åŒåœºæ™¯ä¸‹éœ€è¦ä¸åŒçš„`dumps`çš„å‚æ•°ï¼Œæœ€åå†™æˆäº†è¿™æ ·ï¼š

```python
dumps = compose(Output.dump_json, bytes.decode)
```

![](/nlark/yuque/0/2024/png/26070246/1735476936196-9039f4b9-6822-42f1-ae5e-e688ced9ce86.png)

å®Œç¾~

# [ç»™åšå®¢åŠ äº†ä¸ª giscus](/blog/iakfelvgul5yfy9t) (December 28, 2024)

[giscus](https://giscus.app/) æ˜¯ä¸€ä¸ªè¯„è®ºç³»ç»Ÿï¼Œæ‹¿ GitHub Discussion å½“ CMSï¼Œåªè¦æä¾›ä¸€ä¸ªä»“åº“ï¼Œä¸€ä¸ª discussion çš„ categoryï¼Œå°±èƒ½ç›´æ¥è·å¾—ä¸€ä¸ªè¯„è®ºåŒºï¼Œè¶…æ–¹ä¾¿

ä½†æ˜¯ä¹Ÿæœ‰ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒéœ€è¦å¡«å¾ˆå¤šå‚æ•°ï¼Œå…¶ä¸­æœ‰çš„å‚æ•°æˆ‘è§‰å¾—æ˜¯å®Œå…¨æ²¡å¿…è¦çš„ï¼Œæ¯”å¦‚æ—¢è¦ repo åˆè¦ repoIdï¼Œçºªè¦ category åˆè¦ categoryIdï¼Œè¿™ä¸ª id ä¸å¥½æ‹¿ï¼Œå°è±¡ä¸­å¾— API æ‰èƒ½æ‹¿å¾—åˆ°ï¼Œæˆ–è€…åœ¨ giscus ä¸Šæ‹¿

æˆ‘è§‰å¾—è¿™ä¸ªåº”è¯¥ä½œä¸ºé€‰å¡«ï¼Œå®ƒ API åç«¯å¦‚æœå¿…é¡»ç”¨è¿™ä¸ª id çš„è¯å°±å»è¯·æ±‚ API å» fetch äº†ç¼“å­˜ä¸‹æ¥ï¼Œä¸ç„¶è¿™éå¸¸è¿åæˆ‘â€œæ°¸è¿œä¸åœ¨ä»“åº“é‡Œæ”¾ç”Ÿæˆçš„ä¸œè¥¿â€çš„åŸåˆ™

ä¸è¿‡è¿˜æ˜¯å¦¥åäº†ï¼Œæˆ‘è§‰å¾—æˆ‘å¤ªç”»åœ°ä¸ºç‰¢äº†ï¼Œè‡ªå·±ç»™è‡ªå·±è®¾é™ï¼Œå†µä¸”è¿™å°±æ˜¯ä¸¤ä¸ª id çš„äº‹å„¿ï¼Œæˆ‘å°±ç¡¬å†™åˆ°ä»“åº“é‡Œäº†ï¼Œä¹Ÿæ²¡ç”¨ç¯å¢ƒå˜é‡

å¦ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒçš„å‚æ•°éƒ½æ˜¯ ="1" ="0" è¿™æ ·çš„ï¼Œæ—¢ä¸æ˜¯ true å’Œ falseï¼Œä¹Ÿä¸æ˜¯ control="control" è¿™æ · html åŸç”Ÿå¼çš„ï¼Œå°±å¾ˆéš¾å—ã€‚è¿˜æœ‰å°±æ˜¯ï¼Œå®ƒåªæœ‰ web componentï¼Œä¹Ÿä¸èƒ½ SSRï¼Œæˆ‘è§‰å¾—ä½“éªŒè¿˜æ˜¯ä¸é‚£ä¹ˆå¥½çš„ã€‚ä½†æ˜¯è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼Œæ–¹ä¾¿å°±è¡Œäº†ã€‚è€Œä¸”æ­£å¥½å®ƒæœ‰ä¸ªå« borderless çš„ä¸»é¢˜ï¼Œé…è‰²å’Œæˆ‘è¿™ä¸ªåšå®¢æŒºèƒ½é…åˆçš„ï¼Œå°±ç”¨èµ·æ¥å§



æ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºè·Ÿæˆ‘äº’åŠ¨å“ˆ~

# [Python è¯»å– jsonl çš„æœ€ä½³å®è·µ](/blog/tfgqal68g6th6oqf) (December 11, 2024)

å‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç»“è®ºã€‚

åœ¨ Python ä¸­è¯»å– jsonl æ–‡ä»¶ï¼Œè¯»å–ä¸ºä¸€ä¸ª `list[dict]`ï¼Œæœ€ä½³å®è·µæ˜¯æ€ä¹ˆæ ·ï¼Ÿ

åˆšå­¦ python çš„äººä¼šè¿™ä¹ˆå†™ï¼š

```python
def read_jsonl(jsonl_path: str):
    content = Path(jsonl_path).read_text()
    results = []
    for i in content.splitlines():
        results.append(json.loads(i))
    return results
```

è¿™ä¸ªäººå†™çš„å·²ç»å¤Ÿå¥½äº†ï¼Œå¦‚æœæ˜¯å­¦ä¸šä¸ç²¾çš„äººè¿˜èƒ½å†™å‡ºæ›´åƒå¥‡ç™¾æ€ªçš„å†™æ³•ï¼Œæ¯”å¦‚ç”¨ while æ‰¾`\n`ï¼Œæˆ–è€…ç”¨ range æ¥è¿­ä»£ï¼Œç„¶åç”¨ç´¢å¼•æ¥è®¿é—®ä¸€ä¸ªä¸ªå…ƒç´ ä»€ä¹ˆçš„ã€‚å¦‚æœæˆ‘æ˜¯è€å¸ˆï¼Œæˆ‘è§‰å¾—ä¸Šé¢è¿™ä¸ªå·²ç»å¯ä»¥æ‰“ 60 åˆ†äº†ã€‚åŠ ä¸Šå®ƒç”¨ Path è€Œä¸æ˜¯ open æˆ‘è§‰å¾—å¯ä»¥é¢å¤–åŠ  10 åˆ†ã€‚

ä½†ç†Ÿæ‚‰ micro optimization çš„äººä¸€çœ¼å°±èƒ½çœ‹å‡ºå„ç§é—®é¢˜ï¼Œæ¯”å¦‚å­˜åœ¨ä¸åº”è¯¥çš„æ•°æ®å¤åˆ¶ã€åˆ—è¡¨ä¸å¦‚è¿­ä»£å™¨ã€append å’Œ json.loads åå¤åœ°å¯¹è±¡å–å±æ€§ï¼Œä¼˜åŒ–ä¹‹åå¤§æ¦‚é•¿è¿™æ ·ï¼š

```python
def read_jsonl(jsonl_path: str):
    with open(jsonl_path) as f:
        return list(map(json.loads, f))
```

è¿™æ ·å†™æ„Ÿè§‰å¾ˆ pythonicï¼Œæ¯”å¦‚ç”¨åˆ°äº† python ä¸­çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨åˆ°äº† file å¯¹è±¡æ˜¯å¯ä»¥æŒ‰è¡Œè¿­ä»£çš„è¿­ä»£å™¨ï¼Œç”¨åˆ°äº† map å‡½æ•°å¼ç¼–ç¨‹ç­‰ç‰¹æ€§ã€‚å¯è¯»æ€§ä¹Ÿ up up up

å¦‚æœä¸€ä¸ªå­¦ç”Ÿå†™åˆ°è¿™ç§ç¨‹åº¦ï¼Œæˆ‘è§‰å¾—å·²ç»å¯ä»¥æ‰“ 100 åˆ†äº†ï¼Œç”šè‡³è¿˜æœ‰ç‚¹ç‚«æŠ€çš„å«Œç–‘ï¼Œæˆ‘å¯èƒ½ä¼šè®© Ta ä¸Šå°æ¥ç»™å¤§å®¶è®²ä¸€è®² å“ˆå“ˆå“ˆ

### ä½†æ˜¯ï¼
è¿™ä¸æ˜¯æœ€å¿«çš„åŠæ³•ã€‚å‡è®¾ä½ åªæ˜¯è¯»ä¸€ä¸ªå‡  MB å¤§çš„ jsonl æ•°æ®æ–‡ä»¶ï¼Œä¸å…³å¿ƒå†…å­˜ï¼ˆå‡  MB ä¹Ÿæ²¡å•¥å¥½ä¼˜åŒ–å†…å­˜çš„ï¼‰ï¼Œè¿™æ ·æ˜¯æœ€å¿«çš„

```python
def read_jsonl(path: str):
    content = Path(jsonl_path).read_text().rstrip().replace("\n", ",")
    return json.loads(f"[{content}]")
```

çœ‹æ‡‚äº†å—ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆ hackï¼Œè¿™å…¶å®æ˜¯æŠŠæ•´ä¸ª jsonl ç”¨å­—ç¬¦ä¸²æ›¿æ¢çš„æ–¹å¼å˜æˆä¸€ä¸ª json åˆ—è¡¨ï¼Œç„¶åç›´æ¥ä¸€æ¬¡æ€§ loads

### å¿«å¤šå°‘
åœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œä¸€ä¸ª 3MB çš„ jsonl æ–‡ä»¶ï¼Œä¸Šé¢ä¸¤ç§åŠæ³•åˆ†åˆ«æ˜¯ 49ms å’Œ 42msï¼Œåé¢è¿™ç§ hack æ˜¯ 19ms

å¯ä»¥è®¤ä¸ºæ˜¯ä» 3 å¸§çš„å¡é¡¿å˜æˆäº† 1 å¸§ï¼Œè¿™ä¸ªä¼˜åŒ–æ•ˆæœè¿˜æ˜¯éå¸¸æƒŠè‰³çš„

### ä¸ºä»€ä¹ˆ
Python æ€§èƒ½ä¹‹ç¦…ï¼Œèƒ½é¿å…ç”¨ python å°±é¿å…ç”¨ pythonï¼ˆæ¯”å¦‚é¿å…å¾ªç¯ï¼‰ï¼Œå³ä½¿è¿™ä¼šè®©ä½ çš„ä»£ç æ›´ç»•å¼¯è·¯

---

æœ¬æ•…äº‹æºäºæˆ‘å‰å¤©å¼€çš„ä¸€ä¸ª [PR](https://github.com/fake-useragent/fake-useragent/pull/413)ï¼š

![](https://opengraph.githubassets.com/1be1e131e658c5059fcc030df693d3c99a450e6d0632394a6fc09a6d3cde97d3/fake-useragent/fake-useragent/pull/413)

---

### æ€è€ƒé¢˜
å¦‚æœæ˜¯å¤§æ–‡ä»¶å‘¢ï¼Ÿæ¯”å¦‚ GB çº§çš„ï¼Œè‚¯å®šä¸èƒ½ä¸€æ¬¡æ€§è¯»åˆ°å†…å­˜ä¸­çš„

#### å‚è€ƒç­”æ¡ˆ
æˆ‘è§‰å¾—å¾—åˆ†ç±»è®¨è®ºï¼Œå¦‚æœæ˜¯æ¯è¡Œéƒ½å¾ˆå¤§çš„ï¼Œæ¯”å¦‚ä¸€è¡Œéƒ½æ˜¯ MB çº§çš„ï¼Œé‚£å¯èƒ½å¯ä»¥ä¸€è¡Œä¸€è¡Œåšï¼š

```python
def iter_jsonl_data(jsonl_path: str):
    with open(jsonl_path) as f:
        yield from map(json.loads, f)
```

ä½†å¦‚æœæ˜¯è¡Œæ•°å¾ˆå¤šï¼Œä½†æ¯è¡Œéƒ½ä¸å¤§çš„æƒ…å†µï¼ˆæ¯”å¦‚æ—¥å¿—æµï¼‰ï¼Œé‚£æˆ‘è§‰å¾—å°±éº»çƒ¦äº†ï¼Œå¯èƒ½å¾—åˆ† chunkï¼Œç„¶åæ¯ä¸ª chunk å†…ç”¨ä¸Šé¢ç¬¬ä¸‰ç§æ–¹æ³•æ¥ hack

å½“ç„¶ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯æˆ´ç€é•£é“è·³èˆï¼Œå¦‚æœæ¡ä»¶å…è®¸ï¼Œæœ€å¥½çš„åŠæ³•å½“ç„¶æ˜¯æ‹¿ä½çº§è¯­è¨€å†™ä¸ª pyd import è¿›æ¥ï¼Œæ•ˆç‡ç»å¯¹æ¯”è¿™äº›éƒ½å¿«

è¿™ä¸ªæ•…äº‹è¿˜æ˜¯æ•™å­¦æ„ä¹‰æ¯”å®è·µæ„ä¹‰å¤§

# [å‡†å¤‡åšä¸€äº› MCP ç›¸å…³çš„é¡¹ç›®](/blog/xcfwbwyd7tgvdbvk) (December 9, 2024)

AI#DEA ä¸»åŠæ–¹çš„ä¸€ä¸ªæœ‹å‹ä¸€ç›´åœ¨å®‰åˆ© MCPï¼Œä»Šå¤©æˆ‘ä¹Ÿç»ˆäºæŒ‰è€ä¸ä½äº†ã€‚è¯•äº†ä¸‹

![](/nlark/yuque/0/2024/png/26070246/1733751107561-d3f172dd-2eca-4c25-8bcb-f69fe61e91e2.png)

å—¯ã€‚å¾ˆç®€å•ã€‚è€æ—©ï¼ŒGPT æ’ä»¶çš„æ—¶å€™å°±åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆåªæœ‰ web ä¸Šçš„ OpenAPI å¯ä»¥ã€‚å¯¹å§ï¼Œæˆ‘å¸Œæœ›æœ¬æœºä¹Ÿå¯ä»¥ã€‚è‡³å°‘è¦èƒ½ call localhostï¼Œä½†æ˜¯å½“æ—¶æŠ€æœ¯åŠ›è¿˜ä¸è¡Œï¼Œè¿™äº‹å„¿å°±æç½®äº†ã€‚

è€Œä¸” specification è¿™ä¸œè¥¿è¿˜çœŸæ˜¯ã€‚å¤§å‚æ¨å°±æ‰å¯èƒ½æ¨æˆã€‚coze å¯èƒ½ï¼Œlogfire å¯èƒ½ï¼Œä½†å¦‚æœæˆ‘åš Prompt Hub å°±åšä¸èµ·æ¥ã€‚è¿™ä¸€å¹´è¦è¯´æˆ‘å­¦ä¼šäº†ä»€ä¹ˆï¼Œæˆ‘å­¦ä¼šäº†ä»€ä¹ˆäº‹å„¿åšä¸æˆ å“ˆå“ˆå“ˆ

# [OOP ä½•å¿…æ˜¯ COP](/blog/hbsd9puhglc8skko) (December 8, 2024)

tl;dr: é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-oriented programmingï¼‰ä¸å¿…æ˜¯é¢å‘ç±»ç¼–ç¨‹ï¼ˆClass-oriented programmingï¼‰

åƒ JavaScript è¿™ç§ï¼Œå£°æ˜å¯¹è±¡æ¯”å£°æ˜ç±»è¿˜æ–¹ä¾¿çš„è¯­è¨€ä¸­ï¼Œä½•å¿…éè¦å®šä¹‰ä¸€ä¸ªç±»ï¼Œå†å®šä¹‰å®ä¾‹å‘¢ï¼Ÿ

ä»â€œå’Œé¢å‘è¿‡ç¨‹ç›¸å¯¹â€çš„æ„ä¹‰ä¸Šè¯´ï¼Œâ€œé¢å‘å¯¹è±¡â€æŒ‡çš„æ˜¯ï¼Œå°è£…çš„æ—¶å€™ï¼Œå»å°è£…ä¸€ä¸ªåè¯è€Œä¸æ˜¯å°è£…ä¸€ä¸ªåŠ¨è¯ã€‚è‡³äºå®ç°ä¸Šï¼Œæ˜¯å»å®ç°ä¸€ä¸ªç±»ï¼Œè¿˜æ˜¯å®ç°ä¸€ä¸ªæ¥å£ï¼Œå…¶å®éƒ½æ˜¯ OOP

---

ç»å¸¸çœ‹åˆ°è¨€è®ºè¯´ JavaScript æ­£åœ¨è¿œç¦» OOPï¼Œäº‹å®ä¸Šæˆ‘è§‰å¾—è¢«è¿œç¦»çš„åªæ˜¯â€œOOPåŸæ•™æ—¨ä¸»ä¹‰â€ï¼ŒJava ä¹‹æµé‚£ç§

ä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘è§‰å¾— interface å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡åº”è¯¥æ˜¯ä»€ä¹ˆ shapeï¼Œæ¯”å¦‚ï¼Œå¦‚æœæˆ‘æ˜¯ä¸€ä¸ªçå­ï¼Œåªé å£°éŸ³è®¤ç‹—ç‹—ğŸ•ï¼Œåªè¦ä½ èƒ½æ±ªæ±ªå«å°±ç®—ä½ æ˜¯ç‹— Uâ€¢ã‚§â€¢*U

é‚£ä¼ ç»Ÿçš„ç»§æ‰¿å¼ OOP å°±è¦æ±‚ä½ è€è€å®å®ç•Œé—¨çº²ç›®ç§‘å±ç§ï¼Œä½ å¾—æ˜¯ç»§æ‰¿äº†[åŠ¨ç‰©ç•Œã€è„Šæ¤åŠ¨ç‰©é—¨ã€å“ºä¹³åŠ¨ç‰©çº²ã€é£Ÿè‚‰ç›®ã€çŠ¬ç§‘ã€çŠ¬å±](https://zh.wikipedia.org/wiki/%E7%8A%AC)ï¼Œä½†æ¥å£å¼çš„ OOP åªè¦æ±‚ä½ èƒ½ç‹—å«å°±è¡Œäº†ï¼Œç®¡ä½ æ˜¯ [äº¬ä¸­æœ‰å–„å£æŠ€è€…](https://baike.baidu.com/item/%E5%8F%A3%E6%8A%80/2193741)ï¼Œè¿˜æ˜¯éŸ³ä¹æ’­æ”¾å™¨ï¼Œä½ éƒ½æ˜¯ç‹—ã€‚åŸºäºæ¥å£çš„ OOP å¾ˆæ˜¾ç„¶å°±æ˜¯æ›´è¿›æ­¥çš„ã€å®ç”¨ä¸»ä¹‰çš„ OOP

---

```typescript
interface DogLike {
  bark: () => "Woff"
};

function getDog(): DogLike {
  return {
    bark() {
      return "Woff"
    }
  }
}

const dog = getDog()

dog.bark()
```

è¿™æ˜¯é¢å‘è¿‡ç¨‹å—ï¼Ÿè¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡ã€‚åªè¦ä½ åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸æ˜¯åœ¨ä½¿ç”¨ `doBark(dog)` è€Œæ˜¯ `dog.bark()` ä½ å°±æ˜¯åœ¨ OOP äº†ã€‚ä¸éœ€è¦ç”¨ `class` åªè¦ä½ æ˜¯åœ¨æ“ä½œä¸€ä¸ªä¸»ä½“çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨ OOP

ç›¸å¯¹çš„ï¼Œåƒè¿™ç§

```typescript
class Dog {
  bark(): "Woff"
};

function doBark(dog: Dog) {
  return dog.bark()
}

dog = Dog()

doBark(dog)
```

è¿™ç§æ‰æ˜¯æŠ«ç€é¢å‘å¯¹è±¡å¤–çš®çš„é¢å‘è¿‡ç¨‹ç¼–ç¨‹ã€‚

---

æ˜¯çš„ï¼Œåœ¨æˆ‘çš„å®šä¹‰ä¸­ï¼ŒRust ä¹Ÿå¯ä»¥æ˜¯ OOPã€‚

---

è¯´èµ·æ¥ï¼Œå‰ä¸¤å¤©æˆ‘ä¸€ä¸ª[ç»™ Gradio çš„ PR](https://github.com/gradio-app/gradio/pull/10088) è¢«åˆäº†ï¼š

![](https://opengraph.githubassets.com/c790d44cd041450e184c1791a6a532657bd99d0044625f779cb15d9ad839405a/gradio-app/gradio/pull/10088)

è¿™ä¸ª PR ä¹ŸæŒºå¥½ç©çš„ï¼Œèµ·å› æ˜¯æˆ‘å‘ç° Gradio 5 å®ç°çƒ­é‡è½½äº†ï¼Œæˆ‘ä¸€ç›´æŒºå…³å¿ƒçƒ­é‡è½½çš„ï¼ŒåŒ…æ‹¬æˆ‘ py3.online ä¸Šä¹Ÿè‡ªå·±å®ç°äº†ä¸€å¥—çƒ­é‡è½½ã€‚æˆ‘çœ‹å®ƒä»£ç æ—¶å‘ç°å®ƒçš„æ–¹æ³•å·®ä¸å¤šï¼ˆéƒ½æ˜¯åœ¨ä¸€ä¸ªæ¨¡å—çš„ `__dict__` ä¸­ exec å®ƒçš„ sourcesï¼‰ï¼Œè¿˜æ”¯æŒä¸€ä¸ª `NO_RELOAD` çš„å¸¸é‡ï¼Œ`if gr.NO_RELOAD` å—ä¸­å¯ä»¥æ‰§è¡Œä¸€äº›ä¸æƒ³è¢«çƒ­é‡è½½é‡æ–°æ‰§è¡Œçš„ä»£ç ã€‚æˆ‘è§‰å¾—è¿˜è›®æœ‰æ„æ€çš„ã€‚ç„¶åæˆ‘å°±åœ¨æƒ³ï¼šè¿™ä¸ªå€¼æ˜¯æ€ä¹ˆåšåˆ°åŠ¨æ€çš„å‘¢ï¼Ÿæ˜¯åœ¨çƒ­é‡è½½çš„æ—¶å€™ç›´æ¥æ”¹è¿™ä¸ªå€¼ï¼Œä» True æ”¹æˆ False å—ï¼Ÿé‚£å¦‚æœäººå®¶ä¸æ˜¯ç”¨ `gr.NO_RELOAD` è€Œæ˜¯ç›´æ¥ç”¨ `from gradio import NO_RELOAD` è¿™æ ·çš„æ–¹å¼å¯¼å…¥çš„å‘¢ï¼Ÿè¿™æ ·ä¸å°±å¤±å»å“åº”æ€§äº†å—ï¼Ÿ

åæ¥ä¸€è¯»æºç ï¼Œå‘ç°æ›´ç¦»è°±ï¼Œå®ƒç”šè‡³ä¸æ˜¯åŠ¨æ€çš„ boolï¼Œè€Œæ˜¯é€šè¿‡ AST æœç´¢ `if gr.NO_RELOAD` è¿™æ ·çš„å‡ºç°ï¼Œç„¶åæŠŠæ•´ä¸ª if è¯­å¥éƒ½åˆ æ‰ã€‚æˆ‘è§‰å¾—è¿™ä¹Ÿå¤ª hack äº†ï¼Œå› ä¸ºè¿™å¯¼è‡´è¿™ä¸ª if è¯­å¥æ²¡æ³•ç”¨ and / or ä¹‹ç±»çš„ç»“æ„ï¼Œä¹Ÿæ²¡æ³•ç”¨åˆ«åï¼Œç”šè‡³ else å­å¥ä¹Ÿåˆ äº†ï¼Œä¹Ÿæ²¡æ³•æŠŠè¿™ä¸ª bool å½“å‚æ•°ä¼ ç»™åˆ«å¤„ã€‚è€Œä¸”è¿™äº›ï¼Œåœ¨æ–‡æ¡£é‡Œéƒ½æ²¡æœ‰æè¿°ã€‚å®³äººä¸æµ…å•Šï¼ˆå…·ä½“çš„åå¤„æˆ‘ PR é‡Œæè¿°çš„æ›´æ¸…æ¥šï¼‰

äºæ˜¯ï¼Œæˆ‘çš„å®ç°ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå®ƒç¼–ç¨‹ä¸€ä¸ªä¼ª boolï¼Œè®©å®ƒçš„ `__bool__` æ˜¯åŠ¨æ€çš„å°±è¡Œäº†ã€‚ç®€å•çš„è¯ç›´æ¥ç”¨ list ä¹‹ç±»çš„ä¸œè¥¿å°±è¡Œï¼Œæˆ‘æ˜¯ç»§æ‰¿äº† bool ç±»ï¼ˆç®€å•æ¥è¯´æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ Python é‡Œ bool ä¸è®©ç»§æ‰¿ï¼Œæ‰€ä»¥å…¶å®æˆ‘ç»§æ‰¿çš„æ˜¯ intï¼‰ï¼ˆæ’æ’­ä¸€æ¡å†·çŸ¥è¯†ï¼ŒPython ä¸­ bool ä¹Ÿæ˜¯ int çš„å­ç±»å“¦ï¼‰ï¼Œè™½ç„¶æˆ‘è¿™æ ·ä¹Ÿ hackï¼Œä½†æˆ‘è‡³å°‘ä¸ä¼šé€ æˆå¥‡å¥‡æ€ªæ€ªçš„ bug

```python
class DynamicBoolean(int):
    def __init__(self, value: int):
        self.value = bool(value)

    def __bool__(self):
        return self.value

    def set(self, value: int):
        self.value = bool(value)
```

æœ¬æ¥ä»¥ä¸ºä»–ä»¬ä¼šä¸ä¼šå¯¹è¿™ä¸ªå‘½åæœ‰å¼‚è®®çš„ï¼Œä½†æ˜¯å±…ç„¶æ²¡æœ‰ã€‚çœ‹æ¥ä»–ä»¬å¯¹è´¡çŒ®æŒºä¸ opinionated çš„ï¼Œæ¯•ç«Ÿä¹Ÿæ˜¯[ä¸€ä¸ª utils.py æ–‡ä»¶](https://github.com/gradio-app/gradio/blob/main/gradio/utils.py) 1500+ è¡Œçš„é¡¹ç›®ã€‚å“ˆå“ˆå“ˆ

# [m ask æ”¯æŒ markdown æµå¼æ¸²æŸ“äº†](/blog/sepc2cmtiuexte3p) (December 5, 2024)

å‘ç°åŸæ¥ rich æœ‰å¯ä»¥ç”¨æ¥å®ç°æµå¼ markdown æ¸²æŸ“çš„å·¥å…·ï¼Œäºæ˜¯å°±é›†æˆäº†ä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯ä¸ªä¾‹å­ï¼Œåœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥å¯¹ ruff çš„ä¸€æ¡ lint è§„åˆ™è¿›è¡Œæé—®

![](/nlark/yuque/0/2024/png/26070246/1733365529567-3775961f-30ef-48a6-a721-7a000972e0f4.png)

ä½†æ˜¯è¶…å‡ºé«˜åº¦ä¼šé—ªçƒï¼Œäºæ˜¯æ‰‹åŠ¨å®ç°äº†ä¸‹ truncate çš„ç­–ç•¥

```python
class TruncatedMarkdown(Markdown):
    def __rich_console__(self, console, options):
        results = list(super().__rich_console__(console, options))
        height = console.height
        count = 0
        buffer = []
        for segment in reversed(results):
            count += segment.text.count("\n")  # type: ignore
            if count > height:
                break
            buffer.append(segment)

        yield from reversed(buffer)
```

å…¶å® `rich.live` çš„ç”¨æ³•è¿˜æ˜¯æ˜¨æ™šä» pydantic-ai å­¦åˆ°çš„ï¼š

[Stream markdown - PydanticAI](https://ai.pydantic.dev/examples/stream-markdown/?h=rich.live)

# [å†è°ˆä¸€è°ˆ Svelte 5](/blog/sggo21grr7odt3sn) (December 4, 2024)

Svelte 5 å‘å¸ƒä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæˆ‘å­˜é‡é¡¹ç›®å¤ªå¤šï¼Œè¿ç§»ä¸€ä¸ªé¡¹ç›®è‡³å°‘è¦åŠå°æ—¶èµ·æ­¥ï¼Œäºæ˜¯å°±æ‰“ç®—å…ˆç¼“ç¼“ã€‚

åŒæ—¶æˆ‘ä¹Ÿå‘ç°äº†ä¸å°‘ Svelte 5 éš¾ç”¨çš„åœ°æ–¹ï¼Œæ¯”å¦‚å®ƒå®æ‰“å®åœ°åœ¨ä¸€äº›å°çš„åœ°æ–¹æ›´ç¹çäº†ï¼Œæ²¡å¾—æ´—ã€‚

å°±å¥½æ¯”ï¼Œè¦æ±‚ä½ æ¯ä¸ª python é¡¹ç›®éƒ½å¿…é¡» fully typed æ‰èƒ½è¿è¡Œï¼Œè¿™æ˜¾ç„¶æ˜¯åœ¨å°é¡¹ç›®ä¸Šé™ä½äº†å¼€å‘æ•ˆç‡çš„ã€‚Python åŠ ç±»å‹è¿˜èƒ½è®© LLM æ¥å®Œæˆï¼Œä½†æ˜¯å°±æˆ‘çš„ä½“éªŒæ¥çœ‹ï¼Œç°åœ¨ LLM è‡ªåŠ¨è¡¥å…¨ Svelte 5 çš„ç”¨æ³• **å®Œå®Œå…¨å…¨** éƒ½æ˜¯é”™çš„ã€‚å®Œå…¨æ˜¯ hallucinationã€‚

æ‰€ä»¥ï¼Œå½“æˆ‘å†™ Svelte 5 ä»£ç çš„æ—¶å€™ï¼Œæˆ‘å¥½åƒå›åˆ°äº†ä¸¤å¹´å‰ï¼Œæ²¡æœ‰ Copilot çš„æ—¶ä»£ã€‚

---

![](https://opengraph.githubassets.com/6cf24547ad0e03e1259f5e95049193fe874ece74805f45183702f7f9a744d28c/sveltejs/svelte/discussions/14521)

æ˜¨å¤©æäº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å®ç°è‡ªåŠ¨ infer ç»„ä»¶ä¼ ç»™è°ƒç”¨è€…çš„ slot çš„å‚æ•°çš„ç±»å‹ [sveltejs/svelte/discussions/14521](https://github.com/sveltejs/svelte/discussions/14521)ï¼Œç»´æŠ¤è€…å‘Šè¯‰æˆ‘æ²¡æœ‰å¥½åŠæ³•ã€‚æˆ‘æ‰¿è®¤åƒ React é‚£æ ·ç”¨ typescript çš„ spread ç­‰æ–¹æ³•æ¥å‚æ•°åŒ–ç»„ä»¶æ˜¯å¥½åŠæ³•ï¼Œè€Œä¸”æ˜¯ç»´æŠ¤å¤§çš„é¡¹ç›®çš„å¿…ç»ä¹‹è·¯ï¼Œä½†æ˜¯åœ¨å°é¡¹ç›®ï¼ˆç‰¹åˆ«æ˜¯å¯¹äºæˆ‘è¿™ç§å°é¡¹ç›®å·¨å¤šçš„äººï¼‰æ¥è¯´å°±å¾ˆéš¾å—äº†ã€‚åœ¨ Python ä¸­è¿™æ˜¯ä¸€ä¸ª Tab çš„äº‹æƒ…ï¼Œä½†åœ¨ Svelte 5 ä¸­ï¼Œæˆ‘è¦èŠ± 10 å€çš„æ—¶é—´ã€‚

---

æ›¾ç»ï¼Œæˆ‘åœ¨åæ€ï¼Œä¸ºä»€ä¹ˆæˆ‘æ¯”èµ·ï¼ˆè‡ªç§°ï¼‰æ€§èƒ½æ›´ä½³çš„ SolidJs æˆ‘æ›´å–œæ¬¢ Svelteï¼Œç­”æ¡ˆæ˜¯å®ƒçš„å¼€å‘ä½“éªŒã€‚å®ƒçš„å¼€å‘æ•ˆç‡ã€‚ç°åœ¨è¿™å±‚å…‰ç¯æ²¡äº†ï¼Œæˆ‘å¾ˆå¤±æœ›ã€‚

> With more and more people building more and bigger applications with Svelte, the limitations of some of our original design decisions started to become more apparent. For example, in Svelte 4, reactivity is driven entirely by the compiler. If you change a single property of a reactive object in Svelte 4, the entire object is invalidated, because thatâ€™s all the compiler can realistically do. Meanwhile, other frameworks have adopted fine-grained reactivity based on _signals_, leapfrogging Svelteâ€™s performance.
>
> â€”â€” [Svelte 5 is alive](https://svelte.dev/blog/svelte-5-is-alive)
>

Svelte åŸæœ¬é‡‡ç”¨çš„æ˜¯æˆ‘å°¤å…¶æ¬£èµçš„â€œå³ä½¿ç¼–è¯‘å™¨ä¸å¤Ÿå¥½ï¼Œä½†æ˜¯æˆ‘ä»ç„¶ä¸è®©ä½ å†™ä¸€ç‚¹ React ä¸€èˆ¬çš„ boilerplateâ€è¿™æ ·çš„æ‰§ç€ã€‚å®ƒå¯èƒ½ä¸æ˜¯æœ€å¿«çš„ï¼Œä½†å®ƒæ˜¯æœ€æœ‰æƒ³æ³•çš„ï¼ˆæ­£å¦‚æˆ‘å¯¹æˆ‘è‡ªå·±çš„è¦æ±‚ä¸€æ ·ï¼‰ã€‚æ‰€ä»¥å®ƒä¸ä»…æ˜¯æˆ‘è¶æ‰‹çš„å…µå™¨ï¼Œæ›´æ˜¯æˆ‘çš„åº§å³é“­ä¸€èˆ¬çš„å­˜åœ¨ï¼ˆå’Œ Rust åœ¨æˆ‘å¿ƒç›®ä¸­çš„åœ°ä½å¹³èµ·å¹³åï¼‰ã€‚ç°åœ¨æ„Ÿè§‰è¢«å®ƒè¢«åˆºäº†ä¸€åˆ€ å“ˆå“ˆå“ˆ

æˆ‘æ›¾ç»å››å¤„å‘äººæ¨è Svelteï¼Œç°åœ¨åªæƒ³æ— æ¡ä»¶æ¨è Svelte 4 äº†ï¼Œè‡³å°‘æˆ‘æœ¬äººæ›´å–œæ¬¢ Svelte 4 çš„ç²¾ç¥

å½“ç„¶ï¼Œç°åœ¨è¿™æ ·çš„å‘å±•ä¹Ÿè¯æ˜äº†å½“ä»ŠæŠ€æœ¯çš„å‘å±•è¿˜æ²¡èƒ½è®©ç¼–è¯‘å™¨èªæ˜åˆ°è¿™ç§ç¨‹åº¦ï¼ŒSvelte<5 ç®—æ˜¯ä¸€ç§å°è¯•ï¼Œç°åœ¨ä»–ä»¬å†³å®š move on äº†ã€‚getting over it äº†ï¼Œä¹Ÿä¸é”™ã€‚æˆ‘å¯èƒ½ä¹Ÿä¸ä¼šåœ¨æ€€æ—§æœå¾…å¤ªä¹…å§ã€‚

---

æœ€åé‡ç”³ä¸€ä¸‹ï¼Œæˆ‘çš„è§‚ç‚¹æ˜¯ï¼ŒSvelte 5 ç»å¯¹åœ¨æ•ˆç‡ã€ä¸Šé™ä¸Šéƒ½æ˜¯æ¯” Svelte 4 é«˜çš„ã€‚å”¯ä¸€å¯æƒœçš„æ˜¯ï¼Œé—¨æ§›æé«˜äº†ï¼Œå¦ä¸€æ–¹é¢ç¼–ç æ•ˆç‡ä¸€å®šç¨‹åº¦ä¸‹é™äº†ï¼Œå°¤å…¶å°é¡¹ç›®çš„ç¼–ç æ•ˆç‡å¤§å¹…åº¦ä¸‹é™ã€‚

# [ä¸€è¨€ä¸åˆå°± fork](/blog/hb4w5vspmvuncrpk) (November 30, 2024)

ä½œä¸ºæ€¥æ€¥æ€¥æ€¥æ€¥å›½ç‹ï¼Œæˆ‘é‡åˆ°ç”¨ä¸é¡ºæ‰‹çš„åº“æˆ‘å°± forkï¼ç”šè‡³å†å‘ä¸€ä¸ªåŒ…ï¼licence ä»€ä¹ˆçš„éƒ½ä¸ç®¡ï¼æˆ‘æ˜¯å¼€æºå¸¦æ¶äºº

---

[html2text](https://github.com/Alir3z4/html2text/issues/418) ä¸€ä¸ªçº¯ python åŒ…æ‰‹åŠ¨ä¸Šä¼ ï¼Œè¿˜å¿˜äº† wheel distributionï¼Œæäº† issue æ²¡äººç®¡ï¼æœæ–­ fork äº† CI ä»€ä¹ˆçš„å…¨éƒ¨éƒ½ç°ä»£åŒ–ï¼Œå‘äº†ä¸ª [html2text2](https://cnseniorious000.github.io/html2text/README.html)ã€‚ä¸¤å‘¨å‰åŸä»“åº“çªç„¶æœ‰äº†ä¸‰ä¸ªåŠ¨æ€ï¼Œä½†æ˜¯ä¹Ÿæ˜¯è¯´äº†è¦å¹²åˆæ²¡å¹²ï¼ˆè¯¶ï¼Œå¥½åƒå’Œæˆ‘å¾ˆåƒï¼Œæƒ­æ„§æƒ­æ„§ï¼‰

![](/nlark/yuque/0/2024/png/26070246/1732947184744-463b56d6-0bd2-462e-aa36-183a0b9da5f7.png)

---

[pythonmonkey](./yh3cd64t6111ubux) å°±æ˜¯éä¸æ‰“åŒ… wheelsï¼Œæˆ‘ä¹Ÿæ˜¯ç›´æ¥ forkï¼Œè¿™æ¬¡ç›´æ¥å« [pythonmonkey-fork](https://py3.online/pypi/pythonmonkey-fork)

---

[solid-markdown](https://github.com/andi23rosca/solid-markdown/pull/36#issuecomment-2503715812) ä¸€ä¸ªç‰ˆæœ¬çš„ bug ä¸€ç›´ä¸ä¿®å¤ï¼Œç”šè‡³å‰ä¸¤å¤©ä¹Ÿæœ‰äººæ¥å‚¬äº†ã€‚ä½†è¿™ä¸ªæˆ‘å€’æ˜¯æ²¡å¦å¤–å‘åŒ…ï¼Œå› ä¸º JavaScript ç”Ÿæ€æœ‰ [pkg.pr.new](https://github.com/stackblitz-labs/pkg.pr.new) å¯ä»¥ç”¨ï¼Œä¸ç”¨å•ç‹¬å‘åŒ…ä¹Ÿèƒ½ç›´æ¥ç”¨ä¸Š PR åˆ†æ”¯çš„ build äº§ç‰©

---

ä¹‹æ‰€ä»¥æƒ³èµ·è¿™ä»¶äº‹å„¿ï¼Œæ˜¯å› ä¸ºæ˜¨å¤©é‡åˆ° diskcache çš„ [typing çš„é—®é¢˜](https://github.com/grantjenks/python-diskcache/issues/323)ï¼Œå†³å®š[å½»åº•ä¿®ä¸€ä¸‹](https://github.com/grantjenks/python-diskcache/issues/202#issuecomment-2507938693)ï¼Œåæ¥å‘äº†ä¸ª [diskcache2](https://github.com/CNSeniorious000/diskcache2)ï¼Œåƒ[è¿™æ ·](https://github.com/CNSeniorious000/diskcache2/commit/84bb105e7b04c6af0b8949bf2799e57a78bd3678#diff-9b4c246156917dc93ea44dada8ba4b8db1cb2e7606b3e976dc978b66261b68acR1111-R1128)çš„ overloads å†™äº†ä¸‰ç™¾å¤šè¡Œï¼Œå¤ªå¯æ€•äº†ã€‚ä¸è¿‡å¥½åœ¨æ•ˆæœå¾ˆèˆ’æœï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æŠŠ Cache å¯¹è±¡å½“ MutableMapping ç”¨äº†

![](/nlark/yuque/0/2024/png/26070246/1732947970927-a2155416-a35c-4f85-bdc5-8c94dd09c85b.png)

# [æ„Ÿè§‰ gpt çš„ vision èƒ½åŠ›ä¸å¤ªè¡Œ](/blog/ttm4y2q7w3o6etrm) (November 27, 2024)

å¯¹ gpt çš„ vision èƒ½åŠ›æŒæ€€ç–‘æ€åº¦äº†ã€‚

æœ€è¿‘æœ‰åœ¨åšæ¯•è®¾é¡¹ç›®ï¼ˆå‰æ®µæ—¶é—´ç»ç†äº†å¾ˆä¸¥é‡çš„æ€ æƒ°æœŸï¼‰ï¼Œéœ€è¦ç”¨åˆ°å¯¹ PDF çš„ RAGï¼Œæˆ‘æƒ³åœ¨è¿™æ–¹é¢å°è¯•ä¸€ç‚¹å½»åº•çš„ä¸œè¥¿ï¼Œäºæ˜¯å°±å‡†å¤‡ç”¨ LLM è¿‡ä¸€éæŠ½å–å‡ºæ¥çš„å†…å®¹ï¼ˆç›¸å½“äºé‡æ–°æ’ç‰ˆï¼‰ï¼Œç„¶åè§£æ markdown çš„ AST æ¥åš chunkingï¼Œè¿˜èƒ½åŠ ä¸Šç›®å½•ä¿¡æ¯æ¥å®ç° contextual embedding

æ–‡æœ¬çš„æ•ˆæœå¾ˆå¥½ï¼Œéå¸¸å¥½ï¼Œä½†æ˜¯å›¾ç‰‡æœ‰é—®é¢˜ã€‚ä¼¼ä¹ PDF æŠ½å–ä¹‹åå›¾ç‰‡æ‘†æ”¾çš„ä½ç½®æ˜¯é¡µçš„å¼€å¤´è¿˜æ˜¯ç»“å°¾ï¼Œæ€»ä¹‹ä¸æ˜¯ä¸­é—´ï¼Œæ‰€ä»¥éœ€è¦ LLM æ¥æ’å…¥ã€‚å¦å¤–ä¼¼ä¹å›¾ç‰‡éƒ½æ²¡æœ‰ alt ä¹‹ç±»çš„ä¸œè¥¿ï¼Œæ‰€ä»¥åªæœ‰ä¸ªåºå·ï¼Œå¦‚æœè¦ LLM æ¥æ’çš„è¯è‚¯å®šå¾—æŠŠå†…å®¹æ˜¾ç¤ºç»™å®ƒçœ‹ã€‚

äºæ˜¯å†™äº†ä¸€å¥— vision çš„ utilityï¼Œæœ€åçš„æ ¼å¼æ˜¯ï¼Œ![]() ç´§æ¥ç€å°±ä¼šè‡ªåŠ¨æ’å…¥å›¾ç‰‡ã€‚

ä½†æ˜¯æ•ˆæœéå¸¸ä¸æ»¡æ„ã€‚

1. æˆ‘ä¸€ç›´ fail to è®© LLM ä¿ç•™æ‰€æœ‰çš„å›¾ç‰‡ï¼Œæ’å…¥çš„ä½ç½®ä¹Ÿä¸å¯¹
2. LLM ä¼¼ä¹è®¤ä¸ºå›¾æ ‡ã€å¹¿å‘Šé‚£äº›å…ƒç´ æ¯”æ’å›¾æ›´é‡è¦ã€‚æˆ‘ä¹Ÿæ˜¯æœäº†

å¯èƒ½æ˜¯æˆ‘ç¡®å®åœ¨å†™ prompt ä¸Šä½äººä¸€ç­‰å§ï¼Œæ€»ä¹‹æˆ‘æ˜¯æ”¾å¼ƒäº†



åŠ ä¸Šæˆ‘ä¹‹å‰ä¸€ç›´æ²¡å¹²æ´»ï¼Œå¸ˆå…„å¯¹æˆ‘åº”è¯¥ä¹Ÿæ˜¯æ²¡ä»€ä¹ˆè€å¿ƒã€‚ç°åœ¨å†³å®šæ”¾å¼ƒå›¾ç‰‡äº†ï¼ˆå°±å½“æ˜¯æ¨¡å‹èƒ½åŠ›è¿˜ä¸å¤Ÿï¼‰

ç„¶ååˆšåˆšåœ¨åˆ ä»£ç ï¼Œå‘ç°çœŸçš„è¦åˆ äº†å¥½å¤šå·§æ€ï¼Œæœ‰ç‚¹ä¼¤å¿ƒï¼Œå°±æ¥è®°å½•ä¸€ä¸‹



---

å½“ç„¶ï¼Œæˆ‘è§‰å¾—æœ‰å¯èƒ½è·Ÿ gpt å¯¹å›¾ç‰‡çš„ tokenizing æ–¹å¼æœ‰å…³ã€‚ä¸€æ–¹é¢æˆ‘æ²¡è¯•è¿‡åˆ«çš„ VLMï¼Œå¦ä¸€æ–¹é¢ä¼¼ä¹åªæœ‰ gpt ç€é‡æœ‰ä¸€ç« è®²ä»–ä»¬å¯¹å›¾ç‰‡çš„å¤„ç†ï¼Œå°±æ˜¯ low åˆ†è¾¨ç‡æœ‰ä¸€éƒ¨åˆ† tokenï¼Œç„¶å high åˆ†è¾¨ç‡çš„è¯æ˜¯åˆ†æˆå¤šä¸ª tile è¿™æ ·ã€‚æˆ‘ä¸å¤ªæ‡‚æ¨¡å‹æ‰€ä»¥ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¹²ã€‚ä½†æˆ‘æ„Ÿè§‰è¿™æ ·å­å¯èƒ½ä¼šå¯¹ä½åˆ†è¾¨ç‡çš„å›¾æ ‡å•Šå¤´åƒå•Šlogoå•Šè¿™äº›ä¸œè¥¿åè€Œæ›´å…³æ³¨ã€‚

# [Fork äº† PythonMonkey](/blog/yh3cd64t6111ubux) (November 24, 2024)

![](/nlark/yuque/0/2024/png/26070246/1732452458406-daefb64f-d071-4c03-a73f-4aed0342b917.png)

PythonMonkey ä¸€ä¸ªå¤šæœˆæ²¡åŠ¨äº†ã€‚3.13 é€‚é…é¥é¥æ— æœŸã€‚

å¦å¤–ï¼Œä¹‹å‰è·Ÿä»–ä»¬èŠçš„å»é™¤åœ¨ post install é˜¶æ®µ npm install çš„äº‹æƒ…ï¼Œæˆ‘ä¹Ÿç»ˆäºå¿ä¸äº†äº†

![](/nlark/yuque/0/2024/png/26070246/1732452637924-cba21ddf-0d21-4cab-b851-9445565e35ab.png)

äºæ˜¯ç‹ ä¸‹å¿ƒæ¥ fork äº† PythonMonkeyã€‚ä½†æ˜¯æˆ‘åœ¨ CodeSpaces é‡Œå‘ç° build å¾ˆä¹…è€Œä¸”å¥½åƒä¼šå¤±è´¥ï¼ŒCI ä¹Ÿè¿è¡Œä¸èµ·æ¥ï¼ˆä¼¼ä¹ä»–ä»¬è¿˜æœ‰ä¸€äº›ç¯å¢ƒå˜é‡è¦é…ç½®ï¼‰

### å®ç°
äºæ˜¯å°±åªå¥½æ–½å±•é­”æ³•äº†ã€‚ä»¥å‰éƒ½ä¸æ•¢æƒ³è¿™ç§æ€è·¯ã€‚é¦–å…ˆçœ‹çœ‹åŸæœ¬çš„ pythonmonkey æ˜¯æ€ä¹ˆå®‰è£…çš„ï¼š

1. pythonmonkey åŒ…æ˜¯ spidermonkey çš„åˆ†æ”¯çš„ build äº§ç‰©ï¼ŒåŠ ä¸Šä¸€äº› python èƒ¶æ°´å’Œç±»å‹å®šä¹‰ï¼Œå®ƒæä¾›äº†å…¨é¢çš„ wheel distribution
2. ä½†æ˜¯ pythonmonkey è¦ç”¨åˆ°ä¸€äº›ï¼ˆåº”è¯¥ä¸»è¦ç›®çš„æ˜¯ polyfill çš„ï¼‰JavaScript åº“ï¼Œæ‰€ä»¥ä»–ä»¬æäº†ä¸€ä¸ª pminit åŒ…ï¼Œåªæä¾› sdistï¼Œåœ¨ builld çš„æ—¶å€™å¾€ pythonmonkey åŒ…çš„æ–‡ä»¶å¤¹é‡Œè¿è¡Œ npm install

æˆ‘çš„ç¬¬ä¸€ä¸ªç›®æ ‡å°±æ˜¯ï¼Œå»æ‰è¿™ä¸ª npm install çš„è¿‡ç¨‹ï¼Œå› ä¸ºï¼š

1. å¾ˆæ…¢ï¼Œå°¤å…¶æ˜¯åœ¨å›½å†…ï¼Œæˆ‘å¦‚æœä¸å¼€å…¨å±€ä»£ç†æˆ–è€…ç”¨é•œåƒæºå°±ä¼šå¤±è´¥
2. å¯¹ nodejs æœ‰ä¾èµ–ã€‚è¿™å¾ˆå¯ç¬‘ã€‚å‡­ä»€ä¹ˆæˆ‘å®‰è£…ä¸€ä¸ª JavaScript è¿è¡Œæ—¶è¿˜éœ€è¦å¦ä¸€ä¸ª JavaScript è¿è¡Œæ—¶

çœ‹äº†çœ‹ [pminit çš„ä»£ç ](https://github.com/Distributive-Network/PythonMonkey/blob/main/python/pminit/pminit/cli.py)ï¼Œå‘ç°å®ƒçœŸçš„å°±åªæ˜¯æ‰§è¡Œ npm installã€‚æˆ‘å†³å®šå¯ä»¥ç›´æ¥æŠŠ node_modules åœ¨ CI ä¸­ç¡®å®šå¥½ï¼Œå¹¶å•ç‹¬ç”¨ä¸€ä¸ªåŒ…åˆ†å‘ã€‚

è¿™ä¸ªä¸éš¾ï¼Œè™½ç„¶åœ¨ä¸€äº›ç»†èŠ‚çš„æŠ‰æ‹©ä¸ŠèŠ±äº†ä¸å°‘æ—¶é—´ï¼Œä½†æ€»ä¹‹æ˜¯å¾ˆç®€å•çš„äº‹ã€‚

ä½†æ˜¯ç”±äºæˆ‘æ²¡æ³•æ„å»º pythonmonkey å•Šï¼Œæ‰€ä»¥æˆ‘æ²¡æ³•å»æ‰ pminit çš„ requirementsï¼Œæ›´æ²¡æ³•æ”¯æŒ 3.13 äº†ã€‚è¿™ä¸æ˜¯ç™½è´¹å·¥å¤«å˜›ã€‚äºæ˜¯æˆ‘å°±å’¬å’¬ç‰™ï¼Œå†³å®šç”¨ monkey patch å·²æœ‰çš„ wheel æ–‡ä»¶ï¼Œæ¥æ›¿æ¢æ‰ä¾èµ–

---

æœ€åé€šè¿‡å°†è¿‘ 200 è¡Œçš„ä»£ç ï¼Œä¸å¤ªä¼˜é›…åœ°å®ç°äº†ï¼š[patch.py](https://github.com/CNSeniorious000/PythonMonkey/blob/main/patch.py)

![](https://opengraph.githubassets.com/5509e1d2f5cf2aa3d8764409517cb24ca9d1180ca8b2ea094f4e8eba7e067938/CNSeniorious000/PythonMonkey)

è¿˜é‡åˆ°äº†ä¸€äº›å‘ï¼Œæ¯”å¦‚ï¼š

+ å¸¦åŠ å·çš„ version æ˜¯ä¸èƒ½ä¸Šä¼ åˆ° PyPI çš„ï¼Œæ€ªä¸å¾— torch å•Šä»€ä¹ˆçš„å¾—æœ‰è‡ªå·±çš„ index
+ http1.1 æœ‰æ—¶æ¯” http2 å¿«ï¼Œè€Œä¸” http2 æ¯” http3 ä¹Ÿå¿«ã€‚æˆ‘æ€€ç–‘æ˜¯å› ä¸ºéƒ½æ˜¯ä¸‹è½½ä¸å¤šä¸ªå¤§æ–‡ä»¶ã€‚ä½†æ˜¯å…¶å®è¿™ä¸ªç»“æœä¹Ÿè›®åå¸¸çš„ï¼Œæˆ‘ä¸å¤ªæ¸…æ¥šä¸ºä»€ä¹ˆ
+ Python çš„ ZipFile å¯ä»¥ä»¥ append æ¨¡å¼æ‰“å¼€ zipï¼Œä½†æ˜¯åªèƒ½ appendï¼Œä¸èƒ½ updateï¼Œå¦å¤– TarFile äºŒè€…éƒ½ä¸èƒ½
+ Windows ä¸‹çš„ `tar` å‘½ä»¤å’Œ Linux ä¸Šçš„è¿˜è›®å…¼å®¹çš„ï¼Œä½†æ˜¯ `.tar.gz` æ–‡ä»¶éƒ½ä¸èƒ½ append æˆ– update
+ å¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘ç”¨ `zip` å‘½ä»¤æ‰“çš„ zip åŒ…æ¯”åŸæœ¬çš„ whl æ–‡ä»¶å¤§ã€‚ä¸è¿‡æ²¡ç ”ç©¶äº†ï¼Œå¯èƒ½æ˜¯å¸¦äº†ä¸€äº›å…ƒæ•°æ®å§

---

### ç»“æœ
+ å‘å¸ƒäº† [pythonmonkey_node_modules](https://pypi.org/project/pythonmonkey_node_modules/)ï¼Œåªæœ‰ 2 MB å·¦å³
+ å‘å¸ƒäº† [pythonmonkey-fork](https://pypi.org/project/pythonmonkey-fork/)ï¼Œç”šè‡³æ”¯æŒäº† 3.13ï¼ˆé€šè¿‡ patch pythonmonkey.io ä¸Šçš„ nightly releaseï¼‰
+ ä¸€å¥— CIï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ° patch æ–°ç‰ˆæœ¬ï¼Œæˆ–è€…æ›´æ–° JavaScript ä¾èµ–

æ¥ä¸‹æ¥å‡†å¤‡æŠŠå„ç§ JavaScript åº“å¼•å…¥ python äº†ï¼

é¦–å½“å…¶å†²çš„æ˜¯æŠŠ readability åŠ åˆ° m é‡Œï¼Œç”šè‡³å¯ä»¥è”ç³»ä¸Šç¿»è¯‘æˆ–è€…æ˜¯ ask çš„å†…å®¹ã€‚ä¹Ÿå¯ä»¥å¤ç”¨ä¸€éƒ¨åˆ† [llm-web-reader-demo](https://github.com/CNSeniorious000/llm-web-reader-demo) çš„ä¸œè¥¿ã€‚

![](https://opengraph.githubassets.com/5cb8fd41bd2852c811e2178d7057e72f3f7afc11a73ac652a320e596ec08fd74/CNSeniorious000/llm-web-reader-demo)

å¦å¤–ï¼Œæœ€è¿‘ä¹Ÿä¸€ç›´åœ¨å°è¯•å„ç§ JavaScript åº“èƒ½ä¸èƒ½ç§»æ¤è¿‡æ¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç‚¹å­ï¼š

+ åœ¨ python ä¸­ç”¨ unocss æ¥æ¸²æŸ“é‚®ä»¶
+ åœ¨ python ä¸­ç”¨ shiki æ¥é«˜äº®ä»£ç ï¼Œç”¨äºæ¸²æŸ“é‚®ä»¶ / æ¸²æŸ“ OG å›¾ï¼Œæˆ–è€…ç»™ mkdocs åšæ’ä»¶ï¼Œæ”¯æŒ pygments ä¸æ”¯æŒçš„è¯­è¨€ï¼ˆæ¯”å¦‚ Svelteï¼‰
+ ç”¨ remark åš markdown AST è§£æï¼Œæ¯”å¦‚ç”¨åœ¨ [pyth-on-line](https://github.com/promplate/pyth-on-line) ä¸­ï¼Œå®ç° js å’Œ py ä¾§ä¸€æ ·çš„ markdown AST è§£æ
+ ç”¨ [showdown](https://github.com/promplate/pyth-on-line) æˆ–è€… [turndown](https://github.com/mixmark-io/turndown) åš html è½¬ markdownï¼ŒåŠ ä¸Š python ç³»çš„ markdownify å’Œ html2text æä¸ªåŒå°ç«æŠ€ï¼ˆç±»ä¼¼ [markdownify-demo](https://markdownify-demo.vercel.app/) è¿™æ ·ï¼‰ï¼ˆç”šè‡³å¯ä»¥å’Œ [llm-web-reader-demo](https://github.com/CNSeniorious000/llm-web-reader-demo) ä¹Ÿæ¯”ä¸€æ¯”ï¼‰

---

è¯´èµ·æ¥ï¼Œåˆšåˆšæ‰“**ä¸€èµ·**å·®ç‚¹æ‰“æˆäº†**ä»ªå™¨**ã€‚ä¸è¿‡åº”è¯¥æ²¡æœ‰äººçŸ¥é“è¿™ä¸ªæ¢—ï¼Œç­‰[è¿™ä¸ªé¡¹ç›®](https://comments-generation-mock-ui.vercel.app/slides/charts/pie)åšæˆäº†å†è¯´å§ã€‚

---

![](/nlark/yuque/0/2024/png/26070246/1732454650678-fa788f86-2e56-4934-ba82-3b36f7a26453.png)

æœ‰ç‚¹å¥½ç¬‘ï¼Œæ˜¨å¤©è°ƒè¯•è¿™ä¸ª patch çš„æ—¶å€™å¯èƒ½ä¸‹è½½äº†å¾ˆå¤šæ¬¡ï¼Œç»™ä»–ä»¬åˆ·å‡ºäº† 4K çš„ä¸‹è½½é‡

![](/nlark/yuque/0/2024/png/26070246/1732454764191-90c9ae73-4738-42c9-b148-fc79daf55d62.png)

åœ¨æµ‹ HTTP/2 å•Š HTTP/3 é‚£äº›çš„æ—¶å€™ä¹Ÿç»™ vercel è¿™å„¿çš„æœåŠ¡åˆ·äº†åå‡  GB çš„æµé‡è´¦å•ï¼ˆä¹‹å‰çš„éƒ½æ˜¯ç™¾ MB çº§åˆ«çš„ï¼‰

![](/nlark/yuque/0/2024/png/26070246/1732454874277-c2ab25c4-39c7-41ec-8f72-582eb109b4cb.png)

Netlify è¿™å„¿çš„æœåŠ¡åˆ·äº†å·®ä¸å¤šç­‰é‡çš„â€¦â€¦

# [Cloudflare Zaraz çš„å¼€æºæ‰˜ç®¡ç»„ä»¶](/blog/bzzswty7glvkrwcw) (November 14, 2024)

> æœ€è¿‘å†³å®šæŠŠä¸€äº›æˆ‘è§‰å¾—æŒºæœ‰æ„æ€çš„æ–‡ç« ç¿»è¯‘ä¸€ä¸‹ï¼Œä¸€æ˜¯è‡ªå·±çœ‹ï¼ŒäºŒæ˜¯ä»¥åè·Ÿåˆ«äººè®²æŸä¸ªè§‚ç‚¹çš„æ—¶å€™ä¸ç”¨é€¼åˆ«äººçœ‹è‹±æ–‡ã€‚å½“ç„¶è‚¯å®šä¸æ˜¯æˆ‘è‡ªå·±ç¿»è¯‘çš„è€Œæ˜¯ gpt ç¿»è¯‘çš„
>



åŸæ–‡ï¼š[Open source Managed Components for Cloudflare Zaraz](https://blog.cloudflare.com/zaraz-open-source-managed-components-and-webcm/) â€”â€” [Yo'av Moshe](https://blog.cloudflare.com/author/yoav)



åœ¨2020å¹´åˆï¼Œæˆ‘ä»¬å°è¯•æ€è€ƒæ˜¯å¦æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åœ¨ä¸å‡æ…¢ç½‘ç«™é€Ÿåº¦ã€ä¸é™ä½å®‰å…¨æ€§å¹¶ä¸”ä¸ç‰ºç‰²ç”¨æˆ·éšç§çš„æƒ…å†µä¸‹åŠ è½½äº’è”ç½‘ä¸Šçš„ç¬¬ä¸‰æ–¹å·¥å…·ã€‚æ™šä¸Šï¼Œåœ¨æ‰«æäº†æ•°ä»¥åƒè®¡çš„ç½‘ç«™åï¼Œæˆ‘ä»¬çš„ç­”æ¡ˆæ˜¯â€œå—¯ï¼Œç®—æ˜¯å§â€ã€‚è¿™ä¼¼ä¹æ˜¯å¯èƒ½çš„ï¼šè®¸å¤šç±»å‹çš„ç¬¬ä¸‰æ–¹å·¥å…·ä»…ä»…æ˜¯åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¿¡æ¯ï¼Œç„¶åå°†å…¶å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå®ƒä»¬æ­£åœ¨æ”¶é›†ä»€ä¹ˆï¼Œç„¶ååªéœ€é«˜æ•ˆåœ°æ”¶é›†ä¸€æ¬¡ï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯å°†å…¶å‘é€åˆ°ä»–ä»¬çš„æœåŠ¡å™¨ï¼Œæ¨¡ä»¿ä»–ä»¬çš„æ•°æ®æ¨¡å¼ã€‚å¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨åœ°é¿å…åœ¨ç½‘ç«™å†…åŠ è½½ä»–ä»¬çš„JavaScriptä»£ç ã€‚è¿™æ„å‘³ç€ä¸å†æœ‰æ¶æ„è„šæœ¬çš„é£é™©ï¼Œä¸å†æœ‰æ€§èƒ½æŸå¤±ï¼Œéšç§é—®é¢˜ä¹Ÿä¼šå‡å°‘ã€‚

ä½†ç­”æ¡ˆå¹¶ä¸æ˜¯ä¸€ä¸ªæ˜ç¡®çš„â€œæ˜¯ï¼â€å› ä¸ºæˆ‘ä»¬æ„è¯†åˆ°è¿™å°†ä¼šéå¸¸å¤æ‚ã€‚æˆ‘ä»¬è°ƒæŸ¥äº†ä¸»è¦ç¬¬ä¸‰æ–¹è„šæœ¬çš„ç½‘ç»œè¯·æ±‚ï¼Œå¾€å¾€æ˜¾å¾—æ™¦æ¶©éš¾æ‡‚ã€‚æˆ‘ä»¬ä¸ºè‡ªå·±è®¾å®šäº†å¤§é‡å·¥ä½œï¼Œç ”ç©¶å·¥å…·æ‰€å‘å‡ºçš„ç½‘ç»œè¯·æ±‚ï¼Œè¯•å›¾å¼„æ¸…æ¥šå®ƒä»¬åœ¨åšä»€ä¹ˆâ€”â€”è¿™ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªç½‘ç»œè¯·æ±‚ä½•æ—¶å‘é€ï¼Ÿè¿™ä¸ªå€¼æ˜¯å¦‚ä½•æ•£åˆ—çš„ï¼Ÿæˆ‘ä»¬å¦‚ä½•ä»¥æ›´å®‰å…¨ã€å¯é å’Œé«˜æ•ˆçš„æ–¹å¼å®ç°ç›¸åŒçš„ç»“æœï¼Ÿæˆ‘ä»¬çš„å›¢é˜Ÿæ¯å¤©éƒ½åœ¨é¢ä¸´è¿™äº›é—®é¢˜ã€‚

å½“æˆ‘ä»¬åŠ å…¥Cloudflareæ—¶ï¼Œä¸€åˆ‡çš„è§„æ¨¡éƒ½å‘ç”Ÿäº†å˜åŒ–ã€‚çªç„¶ä¹‹é—´ï¼Œæˆ‘ä»¬åœ¨æˆåƒä¸Šä¸‡çš„ç½‘ç«™ä¸Šï¼Œæ¯ç§’ä¸ºè¶…è¿‡10,000ä¸ªè¯·æ±‚æä¾›æœåŠ¡ã€‚ç”¨æˆ·æ¯å¤©éƒ½é€šè¿‡æˆ‘ä»¬çš„Discordé¢‘é“ã€ç¤¾åŒºè®ºå›ï¼Œæœ‰æ—¶ç”šè‡³ç›´æ¥åœ¨Twitterä¸Šä¸æˆ‘ä»¬äº¤æµã€‚ä»–ä»¬çš„æ¶ˆæ¯é€šå¸¸ä¼šæ˜¯è¿™æ ·çš„ï¼šâ€œä½ å¥½ï¼ä½ èƒ½æ”¯æŒXå—ï¼Ÿâ€Cloudflare Zarazä¸Šçº¿æ—¶ï¼Œå…¶åº“ä¸­æœ‰å¤§çº¦30ä¸ªå·¥å…·ï¼Œä½†è¿™ä¸ªå¸‚åœºéå¸¸åºå¤§ï¼Œæ–°å·¥å…·ä¸æ–­æ¶Œç°ã€‚

### æ”¹å˜æˆ‘ä»¬çš„ä¿¡ä»»æ¨¡å¼
åœ¨æˆ‘ä¹‹å‰å…³äº[Zarazå¦‚ä½•ä½¿ç”¨Cloudflare Workers](https://llm-web-reader.vercel.app/zaraz-use-workers-to-make-third-party-tools-secure-and-fast/)çš„åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘åŒ…å«äº†ä¸€äº›å…³äºZarazä¸­å·¥å…·é›†æˆçš„ç¼–å†™æ–¹å¼çš„ä¾‹å­ã€‚é€šå¸¸ï¼ŒZarazä¸­çš„â€œå·¥å…·â€æ˜¯ä¸€ä¸ªå‡†å¤‡æœ‰æ•ˆè´Ÿè½½å¹¶å‘é€å®ƒçš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªä¸œè¥¿â€”â€”`clientJS`ï¼Œå³æµè§ˆå™¨ç¨åä¼šæ‰§è¡Œçš„JavaScriptä»£ç ã€‚æˆ‘ä»¬å°½åŠ›åšåˆ°è¿™æ ·ï¼Œå³å·¥å…·ä¸ä¼šä½¿ç”¨`clientJS`ï¼Œé™¤éçœŸçš„æœ‰å¿…è¦ï¼Œå®é™…ä¸Šå¤§å¤šæ•°Zarazæ„å»ºçš„å·¥å…·é›†æˆéƒ½æ²¡æœ‰ä½¿ç”¨`clientJS`ã€‚

è¿™è¿ä½œå¾—å¾ˆå¥½ï¼Œåªè¦æˆ‘ä»¬æ˜¯ç¼–å†™æ‰€æœ‰å·¥å…·é›†æˆçš„äººï¼Œå®¢æˆ·ä¿¡ä»»æˆ‘ä»¬ä¼šç¼–å†™æ€§èƒ½å’Œå®‰å…¨çš„ä»£ç ï¼Œå¹¶ä¿¡ä»»ä»–ä»¬åœ¨å°è¯•Zarazæ—¶çœ‹åˆ°çš„ç»“æœã€‚åŠ å…¥Cloudflareåï¼Œè®¸å¤šç¬¬ä¸‰æ–¹å·¥å…·ä¾›åº”å•†è”ç³»äº†æˆ‘ä»¬ï¼Œè¦æ±‚ç¼–å†™Zarazé›†æˆã€‚æˆ‘ä»¬å¾ˆå¿«æ„è¯†åˆ°æˆ‘ä»¬çš„ç³»ç»Ÿå¹¶æ²¡æœ‰å¼ºåˆ¶æ‰§è¡Œé€Ÿåº¦å’Œå®‰å…¨æ€§â€”â€”ä¾›åº”å•†å¯ä»¥ç®€å•åœ°å°†ä»–ä»¬æ—§çš„æµè§ˆå™¨ç«¯JavaScriptå€’å…¥æˆ‘ä»¬çš„`clientJS`å˜é‡ï¼Œç„¶åè¯´â€œæˆ‘ä»¬æœ‰ä¸€ä¸ªCloudflare Zarazé›†æˆï¼â€ï¼Œè¿™å®Œå…¨ä¸æ˜¯æˆ‘ä»¬çš„æ„¿æ™¯ã€‚

æˆ‘ä»¬å¸Œæœ›ç¬¬ä¸‰æ–¹å·¥å…·ä¾›åº”å•†èƒ½å¤Ÿç¼–å†™ä»–ä»¬è‡ªå·±çš„é«˜æ•ˆã€å®‰å…¨çš„æœåŠ¡å™¨ç«¯é›†æˆã€‚æˆ‘ä»¬å¸Œæœ›ä½¿ä»–ä»¬æœ‰å¯èƒ½ä»¥æ›´å¥½çš„æ–¹å¼é‡æ–°æ„æƒ³ä»–ä»¬çš„å·¥å…·ã€‚æˆ‘ä»¬è¿˜å¸Œæœ›ç½‘ç«™æ‰€æœ‰è€…èƒ½å¤Ÿäº†è§£ä»–ä»¬ç½‘ç«™ä¸Šå‘ç”Ÿçš„äº‹æƒ…ï¼Œèƒ½å¤Ÿç®¡ç†å’Œæ§åˆ¶å®ƒï¼Œå¹¶ç›¸ä¿¡å¦‚æœä¸€ä¸ªå·¥å…·é€šè¿‡Zarazè¿è¡Œï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå¥½çš„å·¥å…·â€”â€”è¿™ä¸æ˜¯å› ä¸ºæ˜¯è°ç¼–å†™çš„ï¼Œè€Œæ˜¯å› ä¸ºå®ƒæ‰€æ„å»ºçš„æŠ€æœ¯ã€‚æˆ‘ä»¬æ„è¯†åˆ°ï¼Œä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å®šä¹‰ç¬¬ä¸‰æ–¹å·¥å…·çš„æ ¼å¼ã€‚

### å¼•å…¥Managed Components
æˆ‘ä»¬å¼€å§‹é‡æ–°æ€è€ƒå¦‚ä½•ç¼–å†™ç¬¬ä¸‰æ–¹ä»£ç ã€‚ä»Šå¤©ï¼Œå®ƒæ˜¯ä¸€ä¸ªé»‘åŒ£å­â€”â€”ä½ é€šå¸¸ä¼šåœ¨ä½ çš„ç½‘ç«™ä¸Šæ·»åŠ ä¸€ä¸ªè„šæœ¬ï¼Œè€Œä½ å®Œå…¨ä¸çŸ¥é“å®ƒåœ¨åšä»€ä¹ˆä»¥åŠä½•æ—¶åšã€‚ä½ æ— æ³•æ­£ç¡®é˜…è¯»æˆ–åˆ†æç¼©å°åçš„ä»£ç ã€‚ä½ ä¸çŸ¥é“å®ƒçš„è¡Œä¸ºæ˜¯å¦ä¸ä½ åœ¨åˆ«å¤„çœ‹åˆ°çš„ä¸€æ ·ã€‚ä½ ä¸çŸ¥é“å®ƒä½•æ—¶ä¼šæ”¹å˜ã€‚å¦‚æœä½ æ˜¯ç½‘ç«™æ‰€æœ‰è€…ï¼Œä½ å®Œå…¨åœ¨é»‘æš—ä¸­ã€‚

å·¥å…·åšå¾ˆå¤šä¸åŒçš„äº‹æƒ…ã€‚ç®€å•çš„å·¥å…·åªæ˜¯æ”¶é›†ä¿¡æ¯å¹¶å°†å…¶å‘é€åˆ°æŸå¤„ã€‚é€šå¸¸ï¼Œå®ƒä»¬ä¼šè®¾ç½®ä¸€äº›cookiesã€‚æœ‰æ—¶ï¼Œå®ƒä»¬ä¼šåœ¨é¡µé¢ä¸Šå®‰è£…ä¸€äº›äº‹ä»¶ç›‘å¬å™¨ã€‚åŸºäºå°éƒ¨ä»¶çš„å·¥å…·å¯ä»¥çœŸæ­£æ“çºµé¡µé¢DOMï¼Œæä¾›æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç¤¾äº¤åª’ä½“åµŒå…¥æˆ–èŠå¤©æœºå™¨äººã€‚æˆ‘ä»¬çš„æ–°æ ¼å¼éœ€è¦æ”¯æŒæ‰€æœ‰è¿™äº›ã€‚

Managed Componentsæ˜¯æˆ‘ä»¬æƒ³è±¡çš„åœ¨çº¿ç¬¬ä¸‰æ–¹å·¥å…·çš„æœªæ¥ã€‚å®ƒä¸ºä¾›åº”å•†æä¾›äº†ä¸€ä¸ª[API](https://www.cloudflare.com/learning/security/api/what-is-an-api/)ï¼Œå…è®¸ä»–ä»¬åšæ¯”æ™®é€šè„šæœ¬æ›´å¤šçš„äº‹æƒ…ï¼ŒåŒ…æ‹¬å°†ä»£ç æ‰§è¡Œä¿æŒåœ¨æµè§ˆå™¨ä¹‹å¤–ã€‚æˆ‘ä»¬ä¸ä¾›åº”å•†ä¸€èµ·è®¾è®¡äº†è¿™ä¸ªæ ¼å¼ï¼Œä¸ºä¾›åº”å•†è®¾è®¡ï¼ŒåŒæ—¶è€ƒè™‘åˆ°ç”¨æˆ·çš„æœ€å¤§åˆ©ç›Šæ˜¯æ¯ä¸ªäººçš„é•¿æœŸæœ€å¤§åˆ©ç›Šã€‚

ä»ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ„å»ºManaged Componentsä»¥ä½¿ç”¨åŸºäºæƒé™çš„ç³»ç»Ÿã€‚æˆ‘ä»¬å¸Œæœ›æä¾›æ¯”Zarazä»Šå¤©æ›´å¤šçš„é€æ˜åº¦ã€‚ç”±äºæ–°APIå…è®¸å·¥å…·è®¾ç½®cookieã€æ›´æ”¹DOMæˆ–æ”¶é›†IPåœ°å€ï¼Œæ‰€æœ‰è¿™äº›èƒ½åŠ›éƒ½éœ€è¦è·å¾—æƒé™ã€‚å®‰è£…åœ¨ä½ ç½‘ç«™ä¸Šçš„ç¬¬ä¸‰æ–¹å·¥å…·ç±»ä¼¼äºåœ¨ä½ çš„æ‰‹æœºä¸Šå®‰è£…åº”ç”¨ç¨‹åºâ€”â€”ä½ ä¼šå¾—åˆ°å·¥å…·å¯ä»¥åšä»€ä¹ˆå’Œä¸èƒ½åšä»€ä¹ˆçš„è§£é‡Šï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç»†ç²’åº¦æ°´å¹³ä¸Šå…è®¸æˆ–ä¸å…è®¸åŠŸèƒ½ã€‚æˆ‘ä»¬ä¹‹å‰å†™è¿‡å…³äº[å¦‚ä½•ä½¿ç”¨Zarazä¸å‘Google Analyticså‘é€IPåœ°å€](https://llm-web-reader.vercel.app/keep-analytics-tracking-data-in-the-eu-cloudflare-zaraz/)ï¼Œç°åœ¨æˆ‘ä»¬æ­£åœ¨åŠ å€åŠªåŠ›æœè¿™ä¸ªæ–¹å‘å‘å±•ã€‚è¿™æ˜¯ä½ çš„ç½‘ç«™ï¼Œè¿™æ˜¯ä½ çš„å†³å®šã€‚

æ¯ä¸ªManaged Componentæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—ã€‚ä¸ä»Šå¤©ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªJavaScriptä»£ç ä¸ä¼šè¢«å‘é€åˆ°æµè§ˆå™¨ã€‚ç›¸åï¼Œå®ƒç”±ä¸€ä¸ªComponents Manageræ‰§è¡Œã€‚è¿™ä¸ªç®¡ç†å™¨å®ç°äº†ç»„ä»¶ä½¿ç”¨çš„APIã€‚å®ƒè°ƒåº¦æ¥è‡ªæµè§ˆå™¨çš„æœåŠ¡å™¨ç«¯äº‹ä»¶ï¼Œä¸ºç»„ä»¶æä¾›ä¿¡æ¯è®¿é—®ï¼ŒåŒæ—¶ä¿æŒå®ƒä»¬çš„æ²™ç›’åŒ–å’Œé«˜æ•ˆæ€§ã€‚å®ƒå¤„ç†ç¼“å­˜ã€å­˜å‚¨ç­‰â€”â€”æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä¸ºäº†è®©Managed Componentsèƒ½å¤Ÿå®ç°å…¶é€»è¾‘ï¼Œè€Œä¸å¿…è¿‡å¤šæ‹…å¿ƒå‘¨å›´çš„ç¯å¢ƒã€‚

ä¸€ä¸ªç¤ºä¾‹åˆ†æManaged Componentå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```javascript
export default function (manager) {
  manager.addEventListener("pageview", ({ context, client }) => {
    fetch("https://example.com/collect", {
      method: "POST",
      data: {
        url: context.page.url.href,
        userAgent: client.device.userAgent,
      },
    });
  });
}
```

ä¸Šè¿°ç»„ä»¶åœ¨å‘ç”Ÿé¡µé¢æµè§ˆæ—¶ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œç„¶åå®ƒä¼šåˆ›å»ºä¸€äº›åŒ…å«è®¿é—®è€…ç”¨æˆ·ä»£ç†å’Œé¡µé¢URLçš„æœ‰æ•ˆè´Ÿè½½ï¼Œå¹¶å°†å…¶ä½œä¸ºPOSTè¯·æ±‚å‘é€åˆ°ä¾›åº”å•†çš„æœåŠ¡å™¨ã€‚è¿™ä¸ä»Šå¤©çš„åšæ³•éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯è¿™ä¸éœ€è¦åœ¨æµè§ˆå™¨ä¸­è¿è¡Œä»»ä½•ä»£ç ã€‚

ä½†Managed Componentsä¸ä»…ä»…æ˜¯åšä»¥å‰å¯èƒ½çš„äº‹æƒ…ï¼Œè€Œæ˜¯æ›´å¥½åœ°åšåˆ°ï¼Œå®ƒä»¬è¿˜æä¾›äº†æˆå‰§æ€§çš„æ–°çš„åŠŸèƒ½ã€‚çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•å…¬å¼€æœåŠ¡å™¨ç«¯ç«¯ç‚¹çš„ä¾‹å­ï¼š

```javascript
export default function (manager) {
  const api = manager.proxy("/api", "https://api.example.com");
  const assets = manager.serve("/assets", "assets");
  const ping = manager.route("/ping", (request) => new Response(204));
}
```

è¿™ä¸‰è¡Œä»£ç æ˜¯ç¬¬ä¸‰æ–¹å¯èƒ½æ€§çš„å®Œå…¨è½¬å˜ã€‚å¦‚æœè·å¾—æƒé™ï¼Œå®ƒä»¬å¯ä»¥ä»£ç†ä¸€äº›å†…å®¹ï¼Œæä¾›å’Œå…¬å¼€å®ƒä»¬è‡ªå·±çš„ç«¯ç‚¹â€”â€”æ‰€æœ‰è¿™äº›éƒ½åœ¨è¿è¡Œç½‘ç«™çš„åŒä¸€åŸŸä¸‹ã€‚å¦‚æœä¸€ä¸ªå·¥å…·éœ€è¦è¿›è¡Œä¸€äº›å¤„ç†ï¼Œç°åœ¨å¯ä»¥å®Œå…¨å¸è½½æµè§ˆå™¨ï¼Œè€Œä¸éœ€å¼ºåˆ¶æµè§ˆå™¨ä¸ç¬¬ä¸‰æ–¹æœåŠ¡å™¨é€šä¿¡ã€‚

### æ¿€åŠ¨äººå¿ƒçš„æ–°åŠŸèƒ½
æ¯ä¸ªç¬¬ä¸‰æ–¹å·¥å…·ä¾›åº”å•†éƒ½åº”è¯¥èƒ½å¤Ÿä½¿ç”¨Managed Components APIæ¥æ„å»ºå…¶å·¥å…·çš„æ›´å¥½ç‰ˆæœ¬ã€‚æˆ‘ä»¬è®¾è®¡çš„APIæ˜¯å…¨é¢çš„ï¼Œå¯¹ä¾›åº”å•†çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š

+ **åŒä¸€åŸŸï¼š** Managed Componentså¯ä»¥ä»ä¸ç½‘ç«™æœ¬èº«ç›¸åŒçš„åŸŸæä¾›èµ„äº§ã€‚è¿™å…è®¸æ›´å¿«å’Œæ›´å®‰å…¨çš„æ‰§è¡Œï¼Œå› ä¸ºæµè§ˆå™¨åªéœ€ä¿¡ä»»å’Œä¸ä¸€ä¸ªæœåŠ¡å™¨é€šä¿¡ï¼Œè€Œä¸æ˜¯è®¸å¤šã€‚è¿™ä¹Ÿå¯ä»¥é™ä½ä¾›åº”å•†çš„æˆæœ¬ï¼Œå› ä¸ºä»–ä»¬çš„å¸¦å®½å°†ä¼šé™ä½ã€‚
+ **ç½‘ç«™èŒƒå›´çš„äº‹ä»¶ç³»ç»Ÿï¼š** Managed Componentså¯ä»¥æŒ‚é’©åˆ°ç½‘ç«™ç”¨äºè·Ÿè¸ªäº‹ä»¶çš„é¢„å…ˆå­˜åœ¨çš„äº‹ä»¶ç³»ç»Ÿã€‚ä¸ä»…ä¸éœ€è¦ä¸ºä½ çš„å·¥å…·æä¾›æµè§ˆå™¨ç«¯APIï¼Œè€Œä¸”å¯¹ç”¨æˆ·æ¥è¯´æ›´å®¹æ˜“å‘é€ä¿¡æ¯åˆ°ä½ çš„å·¥å…·ï¼Œå› ä¸ºä»–ä»¬ä¸éœ€è¦å­¦ä¹ ä½ çš„æ–¹æ³•ã€‚
+ **æœåŠ¡å™¨é€»è¾‘ï¼š** Managed Componentså¯ä»¥åœ¨ä¸ç½‘ç«™åŒä¸€åŸŸä¸Šæä¾›æœåŠ¡å™¨ç«¯é€»è¾‘ã€‚è¿™åŒ…æ‹¬ä»£ç†ä¸åŒçš„æœåŠ¡å™¨ï¼Œæˆ–æ·»åŠ ç”ŸæˆåŠ¨æ€å“åº”çš„ç«¯ç‚¹ã€‚è¿™é‡Œçš„é€‰é¡¹æ˜¯æ— ç©·æ— å°½çš„ï¼Œè¿™ä¹Ÿå¯ä»¥å‡è½»ä¾›åº”å•†æœåŠ¡å™¨çš„è´Ÿè½½ã€‚
+ **æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„å°éƒ¨ä»¶å’ŒåµŒå…¥ï¼š** ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œå½“ä½ åœ¨ç½‘ä¸ŠåŠ è½½ä¸€ç¯‡æ–‡ç« é¡µé¢æ—¶ï¼Œå½“ä¸€äº›YouTubeæˆ–TwitteråµŒå…¥çªç„¶å‡ºç°åœ¨æ®µè½ä¹‹é—´æ—¶ï¼Œå†…å®¹ä¼šè·³åŠ¨ï¼ŸManaged Componentsæä¾›äº†ä¸€ä¸ªAPIç”¨äºæ³¨å†ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„å°éƒ¨ä»¶å’ŒåµŒå…¥ã€‚è¿™æ„å‘³ç€å½“é¡µé¢åˆ°è¾¾æµè§ˆå™¨æ—¶ï¼Œå®ƒå·²ç»åœ¨å…¶ä»£ç ä¸­åŒ…å«äº†å°éƒ¨ä»¶ã€‚æµè§ˆå™¨ä¸éœ€è¦ä¸å¦ä¸€ä¸ªæœåŠ¡å™¨é€šä¿¡ä»¥è·å–ä¸€äº›æ¨æ–‡ä¿¡æ¯æˆ–æ ·å¼ã€‚å®ƒç°åœ¨æ˜¯é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æœŸå¾…æ›´å¥½çš„CLSåˆ†æ•°ã€‚
+ **å¯é çš„è·¨å¹³å°äº‹ä»¶ï¼š** Managed Componentså¯ä»¥è®¢é˜…å®¢æˆ·ç«¯äº‹ä»¶ï¼Œæ¯”å¦‚ç‚¹å‡»ã€æ»šåŠ¨ç­‰ï¼Œè€Œæ— éœ€æ‹…å¿ƒæµè§ˆå™¨æˆ–è®¾å¤‡æ”¯æŒã€‚ä¸ä»…å¦‚æ­¤â€”â€”è¿™äº›ç›¸åŒçš„äº‹ä»¶å°†åœ¨æµè§ˆå™¨ä¹‹å¤–ä¹Ÿèƒ½å·¥ä½œâ€”â€”ä½†æˆ‘ä»¬ç¨åå†è°ˆã€‚
+ **é¢„å“åº”åŠ¨ä½œï¼š** Managed Componentså¯ä»¥åœ¨ç½‘ç»œå“åº”ç”šè‡³åˆ°è¾¾æµè§ˆå™¨ä¹‹å‰æ‰§è¡ŒæœåŠ¡å™¨ç«¯åŠ¨ä½œã€‚é‚£äº›åŠ¨ä½œå¯ä»¥è®¿é—®å“åº”å¯¹è±¡ï¼Œè¯»å–å®ƒæˆ–æ›´æ”¹å®ƒã€‚
+ **é›†æˆçš„åŒæ„ç®¡ç†å™¨æ”¯æŒï¼š** Managed Componentsæ˜¯å¯é¢„æµ‹çš„å’ŒèŒƒå›´ç•Œå®šçš„ã€‚Component ManagerçŸ¥é“å®ƒä»¬éœ€è¦ä»€ä¹ˆï¼Œå¹¶å¯ä»¥é¢„æµ‹è¿è¡Œå®ƒä»¬éœ€è¦å“ªç§åŒæ„ã€‚

### æ­£ç¡®çš„é€‰æ‹©ï¼šå¼€æº
å½“æˆ‘ä»¬å¼€å§‹ä¸ä¾›åº”å•†åˆä½œä¸ºä»–ä»¬çš„å·¥å…·åˆ›å»ºManaged Componentæ—¶ï¼Œæˆ‘ä»¬å¬åˆ°ä¸€ä¸ªåå¤å‡ºç°çš„æ‹…å¿§â€”â€”â€œæœ‰ä»€ä¹ˆComponents Managersï¼Ÿè¿™æ˜¯å¦ä»…å¯¹Cloudflare Zarazå®¢æˆ·æœ‰ç”¨ï¼Ÿâ€è™½ç„¶Cloudflare Zarazç¡®å®æ˜¯ä¸€ä¸ªComponents Managerï¼Œå¹¶ä¸”å®ƒæœ‰ä¸€ä¸ªæ…·æ…¨çš„å…è´¹è®¡åˆ’ï¼Œæˆ‘ä»¬æ„è¯†åˆ°æˆ‘ä»¬éœ€è¦è€ƒè™‘å¾—æ›´å¤§ã€‚æˆ‘ä»¬å¸Œæœ›ä½¿Managed Componentså¯¹äº’è”ç½‘çš„æ¯ä¸ªäººéƒ½å¯ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›æ•´ä¸ªäº’è”ç½‘å˜å¾—æ›´å¥½ã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬å®£å¸ƒçš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ–°æ ¼å¼ã€‚

WebCMæ˜¯Managed Components APIçš„å‚è€ƒå®ç°ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„Components Managerï¼Œæˆ‘ä»¬å°†å¾ˆå¿«å‘å¸ƒå’Œç»´æŠ¤ã€‚æ‚¨å°†èƒ½å¤Ÿåœ¨æ„å»ºManaged Componentæ—¶å°†å…¶ç”¨ä½œSDKï¼Œå³ä½¿æ‚¨ä¸æ˜¯Cloudflareç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒæ¥åŠ è½½æ‚¨ç½‘ç«™ä¸Šçš„Managed Componentsã€‚WebCMä½œä¸ºä¸€ä¸ªä»£ç†å·¥ä½œâ€”â€”æ‚¨å°†å…¶æ”¾åœ¨æ‚¨ç½‘ç«™ä¹‹å‰ï¼Œå¹¶åœ¨å¿…è¦æ—¶é‡å†™æ‚¨çš„é¡µé¢å¹¶æ·»åŠ å‡ ä¸ªç«¯ç‚¹ã€‚è¿™ä½¿å¾—WebCM 100%æ¡†æ¶æ— å…³ç´§è¦â€”â€”æ— è®ºæ‚¨çš„ç½‘ç«™åœ¨åå°ä½¿ç”¨Node.jsã€Pythonè¿˜æ˜¯Rubyï¼šåªè¦æ‚¨å‘é€HTMLï¼Œå®ƒéƒ½æ”¯æŒã€‚

ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼æˆ‘ä»¬è¿˜å°†å¼€æºä¸€äº›æˆ‘ä»¬è‡ªå·±çš„Managed Componentsã€‚æˆ‘ä»¬å°†ä¸€äº›ç»å…¸çš„Zarazé›†æˆè½¬æ¢ä¸ºManaged Componentsï¼Œå®ƒä»¬å°†å¾ˆå¿«å¯ä¾›æ‚¨ä½¿ç”¨å’Œæ”¹è¿›ã€‚æ‚¨å°†èƒ½å¤Ÿè·å–æˆ‘ä»¬çš„Google Analytics Managed Componentï¼Œä¾‹å¦‚ï¼Œå¹¶ä½¿ç”¨WebCMåœ¨æ‚¨çš„ç½‘ç«™ä¸Šè¿è¡ŒGoogle Analyticsï¼Œ100%æœåŠ¡å™¨ç«¯ï¼Œè€Œæ— éœ€Cloudflareã€‚

### æŠ€æœ¯é¢†å…ˆçš„ä¾›åº”å•†å·²ç»åŠ å…¥
åœ¨äº’è”ç½‘ä¸Šé©å‘½æ€§åœ°æ”¹å˜ç¬¬ä¸‰æ–¹å·¥å…·æ˜¯æˆ‘ä»¬åªèƒ½ä¸ç¬¬ä¸‰æ–¹ä¾›åº”å•†ä¸€èµ·å®Œæˆçš„äº‹æƒ…ã€‚æˆ‘ä»¬å–œæ¬¢ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒä»¬æ›´åŠ æµè¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€äº›é¢†å…ˆå…¬å¸ç´§å¯†åˆä½œï¼Œåˆ›å»ºä»–ä»¬è‡ªå·±çš„Managed Componentsã€‚è¿™äº›æ–°çš„Managed Componentså°†Zarazçš„èƒ½åŠ›æ‰©å±•åˆ°è¿œè¿œè¶…å‡ºç°åœ¨çš„å¯èƒ½æ€§ï¼Œå¹¶ä¸ºè¿™äº›å·¥å…·çš„æ–°ç”¨æˆ·æä¾›å®‰å…¨å’Œå¯é çš„å…¥é—¨ä½“éªŒã€‚

![](https://cf-assets.www.cloudflare.com/zkvhlag99gkb/L2kX7uZuER3EvC7cVOdjK/2a6e905a734309e17052ff7cf7f5175f/Screenshot-2022-05-09-at-12.10.17.png)

**Drift** â€“ [Drift](http://www.drift.com/)å¸®åŠ©ä¼ä¸šåœ¨æœ€é‡è¦çš„æ—¶åˆ»ä¸å®¢æˆ·å»ºç«‹è”ç³»ã€‚Driftçš„é›†æˆå°†è®©å®¢æˆ·ä½¿ç”¨Driftå¼ºå¤§çš„å¯¹è¯äº‘â€”â€”å°†å¯¹è¯è¥é”€ã€å¯¹è¯é”€å”®å’Œå¯¹è¯æœåŠ¡æ•´åˆåˆ°ä¸€ä¸ªå¹³å°ä¸­â€”â€”åŒæ—¶ä¿æŒå®Œå…¨çš„æ²™ç›’åŒ–ï¼Œå¹¶ä¸”æ— éœ€è¿›è¡Œç¬¬ä¸‰æ–¹ç½‘ç»œè¿æ¥ï¼Œä»è€Œæé«˜ç”¨æˆ·çš„éšç§å’Œå®‰å…¨æ€§ã€‚

![](https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3SXN13Pzn2NeXEi6r46s4V/0dd48a1d3fa5bca132bd5463a89b0df3/Screenshot-2022-05-09-at-12.10.25.png)

**CrazyEgg** â€“ [Crazy Egg](https://crazyegg.com/zaraz)é€šè¿‡è§†è§‰çƒ­å›¾ã€A/Bæµ‹è¯•ã€è¯¦ç»†è®°å½•ã€è°ƒæŸ¥ç­‰æ–¹å¼å¸®åŠ©å®¢æˆ·æ”¹è¿›ä»–ä»¬çš„ç½‘ç«™ã€‚ç½‘ç«™æ‰€æœ‰è€…ã€Cloudflareå’ŒCrazy Eggéƒ½éå¸¸å…³å¿ƒæ€§èƒ½ã€å®‰å…¨æ€§å’Œéšç§ã€‚Managed Componentsä½¿Crazy Eggèƒ½å¤Ÿå®ç°ä½¿ç”¨ç¬¬ä¸‰æ–¹JavaScriptæ ¹æœ¬ä¸å¯èƒ½çš„äº‹æƒ…ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„å…±åŒå®¢æˆ·å°†è·å¾—æœ€å…·æ€§èƒ½å’Œå®‰å…¨çš„ç½‘ç«™ä¼˜åŒ–å·¥å…·ä¹‹ä¸€ã€‚

æˆ‘ä»¬ä¹Ÿå·²ç»æœ‰å®¢æˆ·æ¸´æœ›å®ç°Managed Componentsï¼š

![](https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4PSbj0jBesji7Ns7kSidoF/45b0159b70fe9fbe7158a3cb11c1e8e2/Screenshot-2022-05-09-at-12.10.38.png)

**Hopin Quote:**

> â€œæˆ‘å¯¹Cloudflareçš„Zarazèƒ½å¤Ÿå°†Driftçš„JSåº“ç§»åˆ°Edge Workerå¹¶å°†å…¶åŠ è½½ç¦»å¼€DOMå°è±¡æ·±åˆ»ã€‚ç”±äºé¡µé¢åŠ è½½æ—¶é—´çš„èŠ‚çœï¼Œæˆ‘çš„å·¥ä½œæ›´ä¸ºæœ‰æ•ˆã€‚ä¸ç§¯æå¯»æ±‚æ›´å¥½æ–¹æ³•æ¥å¢åŠ å¤§å‹MarTechå †æ ˆçš„é¡µé¢é€Ÿåº¦å’ŒåŠ è½½æ—¶é—´çš„ä¸¤å®¶å…¬å¸åˆä½œæ˜¯ä¸€ç§ä¹è¶£ã€‚â€â€“ Sean Gowingï¼Œå‰ç«¯å·¥ç¨‹å¸ˆï¼Œ[Hopin](http://hopin.com/)
>

å¦‚æœæ‚¨æ˜¯ç¬¬ä¸‰æ–¹ä¾›åº”å•†ï¼Œå¹¶å¸Œæœ›åŠ å…¥è¿™äº›æŠ€æœ¯é¢†å…ˆçš„å…¬å¸ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šå¾ˆä¹æ„æ”¯æŒæ‚¨ç¼–å†™è‡ªå·±çš„Managed Componentã€‚

### Managed Componentsçš„ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ
æˆ‘ä»¬ç°åœ¨æ­£åœ¨è®¸å¤šæ–¹é¢ä¸Šå¼€å‘Managed Componentsã€‚åœ¨å¼€å‘å’Œç»´æŠ¤WebCMã€ä¸ä¾›åº”å•†åˆä½œå¹¶å°†Managed Componentsé›†æˆåˆ°Cloudflare Zarazä¸­æ—¶ï¼Œæˆ‘ä»¬å·²ç»åœ¨æ€è€ƒæœªæ¥çš„å¯èƒ½æ€§ã€‚

æˆ‘ä»¬çœ‹åˆ°æœªæ¥æœ‰è®¸å¤šå¼€æºè¿è¡Œæ—¶å­˜åœ¨äºManaged Componentsä¸­ã€‚ä¹Ÿè®¸æ‚¨çš„åŸºç¡€è®¾æ–½ä¸å…è®¸æ‚¨ä½¿ç”¨WebCMï¼Ÿæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°Managed Componentsè¿è¡Œæ—¶è¢«åˆ›å»ºä¸ºæœåŠ¡å·¥ä½œè€…ã€HTTPæœåŠ¡å™¨ã€ä»£ç†å’Œæ¡†æ¶æ’ä»¶ã€‚æˆ‘ä»¬ä¹Ÿåœ¨åŠªåŠ›ä½¿Managed Componentsåœ¨ç§»åŠ¨åº”ç”¨ä¸­å¯ç”¨ã€‚æˆ‘ä»¬æ­£åœ¨åŠªåŠ›å…è®¸åœ¨Cloudflare Zarazä¸Šå®‰è£…éå®˜æ–¹çš„Managed Componentsã€‚æˆ‘ä»¬æ­£åœ¨è§£å†³WWWçš„ä¸€ä¸ªé•¿æœŸé—®é¢˜ï¼Œè¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšã€‚

æˆ‘ä»¬å¾ˆå¿«å°†å‘å¸ƒManaged Componentsçš„å®Œæ•´è§„æ ¼ã€‚æˆ‘ä»¬ä¹Ÿå°†å¼€æºWebCMï¼Œå‚è€ƒå®ç°æœåŠ¡å™¨ï¼Œä»¥åŠè®¸å¤šæ‚¨å¯ä»¥è‡ªå·±ä½¿ç”¨çš„ç»„ä»¶ã€‚å¦‚æœè¿™å¯¹æ‚¨å¾ˆæœ‰è¶£ï¼Œè¯·é€šè¿‡[zaraz@cloudflare.com](mailto:zaraz@cloudflare.com)ä¸æˆ‘ä»¬è”ç³»ï¼Œæˆ–åŠ å…¥æˆ‘ä»¬çš„[Discord](https://discord.gg/cloudflaredev)ã€‚

# [Emoji è½®æ’­ç»„ä»¶](/blog/my4e6uttc2qxo8vh) (November 12, 2024)

ä¸ºäº†è¿‡å‡ å¤©ä¼ æ’­å­¦é™¢çš„æ¯”èµ›çš„è·¯æ¼”ï¼Œè¿™å‡ å¤©åœ¨ç”¨ä»£ç åšåŠ¨ç”»

ä¸‹é¢æ˜¯ä¸´æ—¶å†™çš„ä¸€ä¸ª emoji è½®æ’­ç»„ä»¶ï¼š

<iframe src="https://comments-generation-mock-ui.vercel.app/demo/emoji-carousel" style="height:200px"></iframe>

<br>

ç›®å‰æ˜¯ç”¨ svelte è‡ªå¸¦çš„ transition çš„ç®€å•å®ç°ï¼Œä½†æ˜¯è¿™æ ·æ€§èƒ½ä¸é«˜ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼š

<iframe src="https://comments-generation-mock-ui.vercel.app/demo/emoji-carousel/grid" style="height:330px"></iframe>

<br>

ç»„ä»¶ä»£ç ï¼š

```plain
<script>
  import { afterUpdate, onMount } from "svelte";
  import { blur, scale } from "svelte/transition";

  export let emoji = "";
  export let start = 0.65;
  export let delay = 100;
  export let amount = 1;

  let first = true;
  let show = false;

  onMount(() => {
    show = true;
  });

  afterUpdate(() => {
    (first && emoji && show) && (first = false);
  });
</script>

<div class="relative aspect-1 [&>*]:(absolute left-1/2 top-1/2 -translate-1/2)">
  {#if emoji && show}
    {#key emoji}
      <div in:blur|global={{ delay: first ? 0 : delay, opacity: 1, amount }} out:blur={{ opacity: 1, amount }}>
        <div in:scale|global={{ delay: first ? 0 : delay, start }} out:scale={{ start }} class={emoji} />
      </div>
    {/key}
  {/if}
</div>

```

# [åœ¨ terminal ä¸­ç›´æ¥æé—® LLMï¼](/blog/nvqivxall3y2gmgf) (November 8, 2024)

æœ€è¿‘è¦èµ¶æ¯•è®¾å¼€é¢˜å’Œæ¯”èµ›è·¯æ¼”çš„äº‹æƒ…äº†ï¼Œä»Šå¤©å¯èƒ½æ˜¯è¿‘æœŸæœ€åæ›´æ–°ä¸€ä¸‹ `m` çš„ä¸œè¥¿ã€‚ä»Šå¤©æ–°åŠ äº†æœ€åŸºæœ¬çš„ ask çš„åŠŸèƒ½å’Œ config å‘½ä»¤ï¼Œé•¿è¯çŸ­è¯´ï¼Œç°åœ¨ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨

```shell
pip install muspi-merol[all] -U

m config chat.options.model Qwen/Qwen2.5-7B-Instruct
m config chat.openai_base_url https://promplate-api.free-chat.asia
m config chat.openai_api_key from-blog

m --help | m ask "ä»‹ç»ä¸‹æ€ä¹ˆç”¨è¿™ä¸ª CLI"
```

è¿™æ˜¯ä¸ªç”¨è‡ªå·±è§£é‡Šè‡ªå·±çš„ä¾‹å­ã€‚

1. ç¬¬ä¸€è¡Œæ˜¯å®‰è£…è¿™ä¸ªåº“ï¼Œ`muspi-merol[all]`ä¼šå®‰è£…ä»Šå¤©æ–°å‘å¸ƒçš„å­åŒ… `mm-chat`ï¼Œå…¶ä¸­ç›®å‰åªæœ‰ ask è¿™ä¸€ä¸ªåŸºæœ¬çš„è°ƒç”¨ llm çš„å‘½ä»¤ï¼Œç›®å‰ä¸åŒ…å«ä»»ä½•æç¤ºå·¥ç¨‹
2. åé¢æ˜¯å¸®ä½ è®¾ç½®äº†ä¸€äº›é…ç½®é¡¹ï¼Œä½¿ç”¨æˆ‘æ­å»ºçš„å…è´¹ OpenAI APIï¼Œä½¿ç”¨ Qwen 2.5 7B ä½œä¸ºé»˜è®¤æ¨¡å‹
3. ç„¶åæŠŠ m --help çš„ç»“æœ PIPE ç»™ m askï¼Œä½ è¿è¡Œä¸‹å°±çŸ¥é“æ˜¯ä»€ä¹ˆæ•ˆæœäº†



åªè¦ä½ æä¾› base_url å’Œ api_key å°±å¯ä»¥æ”¯æŒä»»ä½• OpenAI APIï¼Œæ‰€ä»¥ Ollama å•Š vllm ä»€ä¹ˆçš„æœ¬åœ°æ¨¡å‹éƒ½æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼



å¾ˆå¤šæ—¶å€™ï¼Œç”¨æŸäº›å‘½ä»¤è¡Œå·¥å…·é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œæ²¡æ—¶é—´çœ‹æ–‡æ¡£ï¼Œåªæƒ³ç›´æ¥è§£å†³ã€‚é€šå¸¸éœ€è¦è‡ªå·±å¤åˆ¶åˆ°æŸä¸ª AI Chat çš„ç½‘ç«™å»é—®ï¼Œç°åœ¨åªéœ€è¦ ... | m ask å°±å¯ä»¥ç›´æ¥æé—®äº†

# [å°è¯•åŒçº¿ç¨‹èŠå¤©](/blog/srl3lm75eu2tzdsz) (November 7, 2024)

ä¸Šå‘¨åˆè¢«å¥³æœ‹å‹åˆ äº†å¾®ä¿¡ï¼Œåæ¥å°±åœ¨ QQ äº¤æµï¼Œç›´åˆ°ä»Šå¤©æ‰åŠ å›æ¥ã€‚å¥¹å«æˆ‘ QQ ä¹Ÿè¦ä¿æŒè”ç³»ï¼ŒåŸæ¥æƒ³è¿˜è§‰å¾—æŒºéº»çƒ¦ï¼Œä»Šå¤©å¿½ç„¶å‘ç°æŒºå¥½çš„

æˆ‘ä»¥å‰ä¸€ç›´è§‰å¾—å›½å†…çš„èŠå¤©è½¯ä»¶å¤ªåˆçº§äº†ï¼Œå±…ç„¶è¿ä¸€ä¸ª thread çš„åŠŸèƒ½éƒ½æ²¡æœ‰ï¼Œæƒ³ç›¸åŒçš„äººç¾¤ä¸­å¹¶å‘å‡ ä¸ªè¯é¢˜åŸºæœ¬ä¸Šä¸å¯èƒ½ã€‚æˆ‘ä»¥å‰è¯•è¿‡åŒæ ·å‡ ä¸ªäººå»ºå¾ˆå¤šç¾¤ï¼Œä½†æ˜¯åæ¥ç”±äºä¸èƒ½æŠ˜å ç­‰åŸå› ï¼Œæ—©æ—©å°±ä½œç½¢äº†ï¼Œæ”¶æ•›åˆ°ä»…å‰©å‡ ä¸ªç¾¤

æ‰€ä»¥ç»“è®ºæ˜¯ç”¨ç¾¤æ¥åˆ†ç±»æ˜¯å¾ˆéš¾çš„ï¼Œä½†æ˜¯å¦‚æœåªæœ‰åŒè´¨åŒ–ï¼ˆéå‘½åçš„ï¼‰å¤šä¸ªèŠå¤©æ¡†å‘¢ï¼Ÿæˆ‘è§‰å¾—æ˜¯å¯ä»¥å°è¯•çš„ã€‚

æˆ‘æ‰“ç®—å°±æ‹¿æˆ‘è·Ÿæˆ‘å¥³æœ‹å‹åšå®éªŒï¼Œè¯•è¯•é€šè¿‡ä¸¤ä¸ªå¹³å°åŒæ—¶ç»´æŠ¤ä¸¤ä¸ªè¯é¢˜æ˜¯å¦å¯è¡Œã€‚

å¯ä»¥æƒ³åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸¤ä¸ªè¯é¢˜æ²¡æ³•äº’ç›¸å¼•ç”¨ï¼ˆå¾®ä¿¡å’Œ QQ çš„æ¶ˆæ¯ï¼‰ã€QQ ä¸æ–¹ä¾¿è½¬å‘å¾®ä¿¡å…¬ä¼—å·å’Œå°ç¨‹åºçš„å†…å®¹ç­‰

ä½†æ˜¯ QQ ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒçš„è¡¨æƒ…æ¯”è¾ƒæœ‰å¼‚åŸŸé£æƒ…

# [m çš„è¯ç”Ÿ](/blog/kya1tmyz86lsyaae) (November 6, 2024)

æœ€è¿‘æ­ªæ¥¼å»åšäº†ä¸€ä¸ªé¡¹ç›®ï¼Œæºäºæˆ‘è‹±è¯­ä¸å¤ªå¥½ï¼Œcommit message æ€»æƒ³ä¸åˆ°æœ€å‡†ç¡®çš„è¡¨è¾¾ï¼Œè€Œ Copilot ä¸çŸ¥é“æŠ½ä»€ä¹ˆé£ï¼Œç»å¸¸ç”Ÿæˆä¸­æ–‡çš„ commit messageï¼Œè¦ä¹ˆå°±æ˜¯è´¼é•¿ï¼Œè€Œä¸”å¤§å°å†™ã€åŠ¨è¯è¿˜æ˜¯åè¯éƒ½ä¸ç¬¦åˆæˆ‘åŒä¸€ä¸ªé¡¹ç›®çš„å†™æ³•ã€‚

äºæ˜¯æ‰“ç®—è‡ªå·±åšä¸€ä¸ª CLIï¼Œç”¨æ¥ç”Ÿæˆ commit messageï¼Œå€’ä¸ä¸€å®šè¦ä¸€æ­¥åˆ°ä½ç›´æ¥å¸®æˆ‘ commitï¼Œå¯ä»¥å†™å…¥å‰ªè´´æ¿ï¼Œæ„Ÿè§‰è¿™æ˜¯ä¸ªå¾ˆèˆ’æœçš„å·¥ä½œæµã€‚åæ¥è§‰å¾—è¿™ä¸ª CLI å·¥å…·å¯ä»¥æ‹“å±•ä¸‹ï¼ŒåŠ ä¸Šä¸€äº›æˆ‘æ¯”è¾ƒéœ€è¦çš„åŠŸèƒ½ã€‚ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯ alias çš„åŠŸèƒ½ï¼Œä»¥å‰éƒ½æ˜¯ç”¨ pdm scriptsï¼Œéå¸¸å¥½ç”¨ï¼Œä½†æ˜¯ç°åœ¨ä¸ç”¨æ…¢ååçš„ pdm æ”¹ç”¨ uv äº†ï¼Œè€Œ uv æ²¡æœ‰ç°åœ¨è¿˜æ²¡æœ‰ scripts ç®¡ç†çš„åŠŸèƒ½

å¦å¤–å°±æ˜¯ï¼Œç¡®å®å¥½åƒæ²¡æœ‰ä¸ªè·¨å¹³å°çš„ alias å·¥å…·ã€‚

![](/nlark/yuque/0/2024/png/26070246/1730905644578-ab63d6fd-5e41-4364-a018-616640d68fe3.png)

äºæ˜¯æˆ‘å®ç°äº†ä¸ªã€‚å°±å«å®ƒ `m` å§ã€‚å®ƒçš„é…ç½®å­˜åœ¨ä¸‰ä¸ªåœ°æ–¹ï¼Œç”¨æˆ·ç›®å½•ã€venv ä¸­ m è‡ªå·±çš„æ–‡ä»¶å¤¹ä¸‹ã€pyproject.toml ä¸­ã€‚è¿™ç®—æ˜¯æœ€ä½³å®è·µäº†ã€‚python ä¸­ä¼¼ä¹æ²¡æœ‰è¿™æ ·çš„åº“ï¼Œæˆ‘æ‰“ç®—ä¹‹åå®Œå–„äº†ä¹‹åè¿™ä¸€éƒ¨åˆ†ä¹Ÿå¯ä»¥å•ç‹¬å°è£…ä¸ªåº“æ¥ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼š

```shell
m alias x "a b c d"
```

è¿™æ ·å°±è®¾ç½®äº† `x` ä¸º `a b c d` çš„åˆ«åã€‚å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```shell
m x --p v  # ç›¸å½“äº a b c d --p v
```

æ˜¨å¤©é…ç½®äº† uv workspaceï¼Œç¬¬ä¸€æ¬¡å°è¯•ç”¨ä¸€ä¸ª monorepo çš„æ¶æ„ç»´æŠ¤ python åº“å“ˆå“ˆå“ˆã€‚ä»Šå¤©è§£å†³äº†ä¸€äº›é—®é¢˜ï¼ŒåŸºæœ¬ä¸Š `alias` çš„åŠŸèƒ½ç®—æ˜¯åšå®Œäº†ã€‚è¿˜å‘ç°äº† typer çš„ä¸€ä¸ª tab completion çš„ bugï¼Œæ‰€ä»¥æŠŠ completion çš„åŠŸèƒ½å…³äº†ï¼Œè¿™æ ·è¿˜å‡å°‘äº†ä¸€ä¸ªä¾èµ– å“ˆå“ˆå“ˆ

---

![](/nlark/yuque/0/2024/png/26070246/1730905226438-aebbe690-f17f-499e-9242-cb98fc229432.png)

æˆ‘ç›®å‰å·²ç»åŠ äº†å¥½å¤š alias äº†ï¼Œç¡®å®éƒ½æ˜¯æˆ‘æ—¥å¸¸ä¼šç”¨åˆ°çš„ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ¯”è¾ƒå¥‡ç‰¹çš„

+ amend ä¸€ä¸ªæäº¤ï¼Œç„¶åå¼ºæ¨ï¼Œæˆ–è€…å¼ºåˆ¶åŒæ­¥ origin HEAD
+ ä¸€é”®æ›´æ–°å„ç§åŒ…ç®¡ç†è½¯ä»¶å’Œä»–ä»¬ç®¡ç†çš„åŒ…
+ ssh åˆ°å¼€å‘æœåŠ¡å™¨

---

ç”±äº PyPI ä¸ŠçŸ­åå­—éƒ½è¢«å äº†ï¼Œæˆ‘çš„åŒ…åè¿˜æ˜¯ `muspi-merl`ï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…ç•¥å¾®éº»çƒ¦ï¼š

```shell
pip install muspi-merol
```

æ„Ÿè§‰æœ‰ç‚¹é•¿ï¼Œä¸ç†Ÿæ‚‰æˆ‘åå­—çš„å¯èƒ½ä¸å¥½è¾“å…¥ã€‚æˆ‘ä¹Ÿå‘é‚®ä»¶é—®äº†è‡ª 2014 å¹´å äº†èŒ…å‘ä¸æ‹‰å±çš„ `M` åŒ…çš„ä½œè€…èƒ½ä¸èƒ½ç™½é€æˆ‘ï¼Œç›®å‰æ²¡æ”¶åˆ°å›å¤ã€‚ç­‰è¿™ä¸ªåŒ…å˜å¾—æ›´å¤šåŠŸèƒ½äº†ä¹‹åå†è€ƒè™‘å§~

---

è¿™å‡ å¤©å‡†å¤‡åŠ ä¸Šï¼š

+ ç®¡ç†ç¯å¢ƒå˜é‡
    - m env set / get / del
+ ä»æ–‡ä»¶è¯»å–åˆ°å‰ªè´´æ¿ / ä»å‰ªè´´æ¿ç²˜è´´åˆ°æ–‡ä»¶
    - m copy / paste
+ chat çš„åŠŸèƒ½ï¼ˆè¿™ä¹Ÿæ˜¯æœ€åˆåšè¿™ä¸ªé¡¹ç›®çš„ç›®çš„ï¼‰
    - ... | m ask ""
+ ç”Ÿæˆ commit message
    - m gen commit
+ ç”Ÿæˆ README
    - m gen readme
+ å‘èµ· HTTP è¯·æ±‚ï¼Œç±»ä¼¼ `httpx[cli]`ï¼Œä½†æ˜¯æ”¯æŒæµå¼å“åº”å’ŒæŸ¯é‡ŒåŒ–ä¼ å‚ï¼ˆä¸­é€” inputï¼‰
    - m get / post / ...

# [æ°´äº†ä¸¤å‘¨ï¼ˆç¡äº†ä¸¤å‘¨ï¼‰](/blog/capn1i7nvvat7k95) (November 4, 2024)

è¿™ä¸¤å‘¨çŠ¶æ€ä¸å¤ªå¥½ï¼Œæ¯å¤©åŠå¤œæ‰ç¡ï¼Œä¸­åˆ/ä¸‹åˆæ‰èµ·åºŠï¼Œå¥½å¤šè¯¾éƒ½æ²¡ä¸Šæˆã€‚æœ¬æ¥å’Œå‡ ä¸ªä¼ æ’­å­¦çš„å¸ˆå§ä¸€èµ·æ‰“äº†ä¸ªä¼ æ’­å­¦ä¸AIäº¤å‰çš„åˆ›æ–°åˆ›ä¸šæ¯”èµ›ï¼ˆpptå‘çš„ï¼‰ï¼Œä½†æ˜¯æ€»ä½“ä¸å¤ªé¡ºåˆ©ã€‚å¸Œæœ›èƒ½è¿›å¤èµ›å§ï¼Œå¸Œæœ›èƒ½å»åŒ—äº¬è·¯æ¼” :)

<iframe src="https://comments-generation-mock-ui-demo.vercel.app/design/right"></iframe>

è¿™æ¬¡é¦–æ¬¡å°è¯•äº†ç”¨ä»£ç æ¥åšè®¾è®¡ç¨¿ï¼Œè¿˜è›®æœ‰æ„æ€çš„ï¼Œå¯èƒ½ä¹‹åä¼šæŠŠè¿™ä¸ªé£æ ¼çš„è®¾è®¡ç”¨åˆ°åˆ«çš„é¡¹ç›®ä¸­ã€‚

æè¿™ä¸ªé¡¹ç›®è¿˜è·Ÿå¥³æœ‹å‹é—¹äº†ä¸å°‘çŸ›ç›¾ï¼Œæ­£å¥½åœ¨å¤§å®¶éƒ½å¿™çš„æ—¶å€™ï¼Œæå‡ºä¸å°‘éº»çƒ¦äº‹å„¿ã€‚åŠ ä¸Šä¸Šä¸Šå‘¨ migrate åˆ° Svelte 5 çš„æ—¶å€™ç”µè„‘çªç„¶åäº†ï¼Œè€½è¯¯äº†å¥½å¤šæ—¶é—´ï¼Œåæ¥å»å°ç±³å®˜æ–¹ç»´ä¿®äº†ï¼ŒæŠŠæ‰€æœ‰æ•°æ®éƒ½ä¸è¦äº†åˆ·æœºï¼Œç»“æœé‚£æ¬¡ migrate è¿˜æ²¡ commitï¼Œæ— ç¼˜ Svelte 5 å“ˆå“ˆå“ˆ

ä¸Šå‘¨ä¼¼ä¹å‡ ä¹æ²¡æœ‰ä»€ä¹ˆæˆå°±ã€‚å“¦ï¼Œåšäº†ä¸ª`@mozilla/readability`çš„ python wrapperï¼Œåœ¨ pyodide ç¯å¢ƒå°±æ˜¯ç”¨åŸç”Ÿ js è¿è¡Œæ—¶è¿è¡Œ js ä»£ç ï¼Œå¦åˆ™ç”¨ pythonmonkeyï¼Œpythonmonkey çš„ staff ä¼¼ä¹æœ¬æ¥è¿˜æŒºæœ‰çƒ­æƒ…çš„ï¼Œä½†æ˜¯æˆ‘é‚£æ®µæ—¶é—´å¾ˆ downï¼Œä¼¼ä¹æµªè´¹äº†ä¸€æ¬¡åˆä½œæœºä¼š

![](/nlark/yuque/0/2024/png/26070246/1730712595761-b582cf4c-9271-4231-bb2e-029a454868d6.png)

ä¹Ÿæ²¡æ—¶é—´ç»™å®ƒåšä¸ª web demo å”‰

---

â˜€è¿™å‘¨å¼€å§‹è¦æ¢å¤çŠ¶æ€ï¼

æ‰‹å¤´ä¸Šæœ‰ä¸ªè‡ªåŠ¨åŒ–æ“ä½œæµè§ˆå™¨çš„é¡¹ç›®ï¼Œè¿˜æœ‰ä¸ª pdf è½¬ md çš„é¡¹ç›®ï¼Œå¸Œæœ›èƒ½åšå¥½ã€‚å¸Œæœ›èƒ½è¿™å‘¨å†…åšå¥½ã€‚

# [é˜…è¯» Svelte 5 çš„ migration guide](/blog/pi761sbi9wqddvh5) (October 25, 2024)

[Svelte 5 migration guide â€¢ Docs â€¢ Svelte](https://svelte.dev/docs/svelte/v5-migration-guide)

æ€»ä¹‹ï¼ŒSvelte 5 çš„å¾ˆå¤šè®¾è®¡çœ‹èµ·æ¥æ˜¯è®©é—¨æ§›é«˜äº†ï¼Œä½†æ˜¯å®ƒçš„å¥½å¤„ä¹Ÿå¾ˆç›´æ¥ï¼Œå½“é¡¹ç›®å°ºå¯¸ä¸Šæ¥äº†å°±æœ‰ç³–åƒäº†ã€‚

å½“ç„¶ä¹Ÿæœ‰ä¸€äº›æˆ‘è®¤ä¸ºå¾ˆä¸ç¾è§‚çš„ï¼Œæ¯”å¦‚

![](/nlark/yuque/0/2024/png/26070246/1729856938041-afea9bce-6fc5-4dfd-88c8-a22e00626d5d.png)

å¦å¤–ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¾ˆå–œæ¬¢ç¼–è¯‘çš„äººï¼Œä½†æ˜¯ Svelte 5 æ›´å¤šçš„é­”æ³•å»æ‰äº†ï¼Œå˜æˆäº† runtime çš„ Signalsï¼Œæˆ‘æƒ³äº†æƒ³ï¼Œå…¶å®æ€§èƒ½æˆ–è€…è¯´ç¼–è¯‘ä¹‹åçš„è¿˜æ˜¯é‚£æ ·ï¼Œè¿™ä¹ˆçœ‹æ¥ä¹‹å‰çš„ä¸€äº›è®¾è®¡å…¶å®æœ‰ä¸€å®šè¿‡åº¦è®¾è®¡äº†ã€‚

---

è¿™ä¸ªä¹Ÿå¤ª JSX äº†ï¼š

![](/nlark/yuque/0/2024/png/26070246/1729857339105-4f6b9077-e4f1-4ef5-9292-0599175e9987.png)

> Snippets instead of slots
>

è¿™ä¸€æ®µæˆ‘è§‰å¾—å¤ªæœ‰æ„æ€äº†ã€‚çœŸçš„å°±æ˜¯å¤§å¤§æå‡äº†ä¸€è‡´æ€§ã€‚è¿™ä¸€ç‚¹æˆ‘ä»¥å‰ä¹Ÿè¯Ÿç—…è¿‡

å°±æ˜¯ç°åœ¨æ„Ÿè§‰ Svelte markup è¶Šæ¥è¶Šåƒ JSX äº†ï¼Œæœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œä»¥åç›´æ¥å°±ç”¨ JSX äº†å‘¢ï¼Ÿ

---

![](/nlark/yuque/0/2024/png/26070246/1729860170123-5d95ef9e-b98d-4b39-8103-624e9d408f34.png)

è¿˜çœŸæ˜¯ã€‚æˆ‘çš„ç¼–è¯‘æ¢¦ç ´äº†

---

å‡çº§æ—¶å‘ç° bits-ui æ”¹äº†å¥½å¤šï¼Œå”‰å¥½éº»çƒ¦

# [useDefaultParameterLast å’Œ noDelete](/blog/myu26q4csq17vw22) (October 23, 2024)

ä»Šå¤©å°è¯•æŠŠ bundle è¿‡åçš„ä¸‘é™‹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œå½“æ—¶å¼€å¯äº†`performance/noDelete`å’Œ`style/useDefaultParameterLast`è¿™ä¸¤é¡¹ï¼Œç»“æœå°±å‡ºé—®é¢˜äº†ï¼Œè™½ç„¶å…·ä½“æ²¡å‘ç°æ˜¯æ€ä¹ˆä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯ç°åœ¨ç®—æ˜¯çŸ¥é“è¿™ä¸œè¥¿ä¸å®‰å…¨äº†

# [æ€ä¹ˆç”¨ late chunking åµŒå…¥é•¿æ–‡æ¡£](/blog/lo3irk3souedpl0h) (October 22, 2024)

çœ‹äº† [Jina Embeddings v3: A Frontier Multilingual Embedding Model](https://jina.ai/news/jina-embeddings-v3-a-frontier-multilingual-embedding-model/#parameter-dimensions) äº†è§£åˆ° late chunkingï¼ˆè¿Ÿåˆ†ï¼‰çš„æŠ€æœ¯ï¼Œæ­£å¥½æ¯•è®¾è¿™è¾¹è¦åšè®ºæ–‡ RAGï¼Œæˆ‘è§‰å¾—å¯ä»¥ç”¨ä¸Šã€‚

ä½†æ˜¯å®ƒä¸€ä¸ªåå¤„æ˜¯ï¼Œæ¨¡å‹æœ¬èº«åªèƒ½ embed 8192 tokens çš„æ–‡æœ¬ï¼Œæ‰€ä»¥å¤©ç”Ÿåœ°ä¸é€‚åˆåšè®ºæ–‡è¿™ç§å¤§ä½“é‡çš„ embedding

![](/nlark/yuque/0/2024/png/26070246/1729574643206-21f09bfa-24c5-466d-be37-1be2fe5d7d05.png)

äºæ˜¯æˆ‘æƒ³äº†ä¸ªåŠæ³•ï¼Œå°±æ˜¯ç”¨æ»‘åŠ¨çª—å£ã€‚åå¤„å°±æ˜¯ï¼Œè¿™æ ·çš„æˆæœ¬ä¼šé£™å‡ï¼Œæ¯•ç«Ÿç›¸å½“äº embed æ¯ä¸ªå—éƒ½è¦ç”¨ 8192 tokensã€‚ä½†è¿™ä¸å¤±ä¸ºä¸€ç§åŠæ³•ã€‚è€Œä¸”åšæ¯•è®¾åº”è¯¥ä¸ç”¨è‡ªå·±æé’±å§ï¼Œå¦‚æœå­¦æ ¡ä¸€æ¯›ä¸æ‹”çš„è¯é‚£ä¸å¤ªå¯èƒ½ã€‚

åˆšåˆšæƒ³åˆ°ä¸€äº›é™ä½æˆæœ¬çš„æ–¹å¼ï¼š

+ ç”±äºæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ markdown è¿›è¡Œ indexingï¼Œæ‰€ä»¥å…¶å®æ¯ä¸ªå—å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š
    1. è·¯å¾„ä¿¡æ¯ï¼ˆç±»ä¼¼é¢åŒ…å±‘å¯¼èˆªï¼ŒæŸæŸå¤§æ ‡é¢˜æŸæŸå°æ ‡é¢˜è¿™æ ·ï¼‰ï¼ˆè¿™ä¸€éƒ¨åˆ†æ˜¯ sticky çš„ï¼Œæ¯ä¸ª chunk éƒ½è¦å¸¦ä¸Šè¿™ä¸ªï¼‰
    2. ç›´åˆ°ä¸‹ä¸€ä¸ªå°æ ‡é¢˜ä¹‹å‰çš„æ‰€æœ‰æ–‡æœ¬
+ ç„¶åæ¯ä¸ªæ ‡é¢˜ä¹‹é—´çš„é•¿åº¦å¯èƒ½è¶…è¿‡ 8192 å¯èƒ½ä¸è¶…è¿‡ï¼Œæ‰€ä»¥ä¸ä¼šæ¯æ¬¡éƒ½ä¸€å®šè¦é¡¶æ»¡ 8192ï¼ˆæš‚ä¸”è®¤ä¸ºåªè¦å¸¦äº†æ ‡é¢˜å°±å¸¦ä¸Šä¸Šä¸‹æ–‡äº†ï¼‰
+ è¿™æ˜¯ä¸æ˜¯å°±æ˜¯ä¸€ç§ contextual retrieval äº†å‘¢ï¼Ÿå¦‚æœæˆ‘å‡è®¾é¢åŒ…å±‘ä¿¡æ¯å°±æ˜¯æ‰€éœ€çš„ä¸Šä¸‹æ–‡çš„è¯ï¼Ÿ[Introducing Contextual Retrieval \ Anthropic](https://www.anthropic.com/news/contextual-retrieval)

---

è¿™ä¹ˆä¸€æƒ³ï¼Œè§‰å¾—åº”è¯¥å‘ä¸ªåº“ï¼Œç”¨æ¥è§£å†³ markdown chunking çš„äº‹æƒ…ã€‚å®ƒé™¤äº†ç”¨ AST åˆ†å‰²æ ‡é¢˜ã€ç„¶åæ’å…¥é¢åŒ…å±‘å¤–ï¼Œè¿˜è¦åšä¸‹é¢ä¸¤ä»¶äº‹æƒ…ï¼š

+ å¦‚æœæŸä¸ªå—è¿˜æ˜¯å¤ªé•¿ï¼Œåˆ™è¦æˆå°å—
+ å¦‚æœæŸä¸ªå—å¤ªçŸ­ï¼Œåˆ™ç›¸é‚»å‡ ä¸ªåˆå¹¶æˆå¤§å—
    - é˜ˆå€¼æ€ä¹ˆé€‰æ‹©ï¼Ÿæˆ‘è§‰å¾—å’Œé¢åŒ…å±‘é•¿åº¦ç›¸æ¯”æ˜¯ä¸ªåŠæ³•ã€‚å¦‚æœæ¯”é¢åŒ…å±‘è¿˜çŸ­ï¼Œé‚£åŸºæœ¬ä¸Šå°±æ²¡å¿…è¦å•ç‹¬ä¸€å—äº†

å¯¹ è¿™ä¸ªæ‰æ˜¯æœ€å…ˆå†³çš„æ¡ä»¶ã€‚åŸºæœ¬ä¸Šæˆ‘ä»€ä¹ˆ RAG éƒ½æ˜¯å…ˆè½¬æˆ markdown å†æ”¹

æ›´ä½•å†µæœ€è¿‘ä¹Ÿå‡†å¤‡æ¨ä¸€ä¸‹æˆ‘è¿™ä¸ª [LLM Web Reader Demo](https://llm-web-reader.vercel.app/read) é¡¹ç›®

# [ä¹é˜³ä¸å°å®¶ç”µ](/blog/nl1doi3d8ywpbu17) (October 19, 2024)

> [ä¹é˜³è‚¡ä»½æŠ•èµ„ä»·å€¼åˆ†ææŠ¥å‘Š](https://llm-web-reader.netlify.app/read?engine=llm&preview=iframe&result=rendered&url=https%3A%2F%2Fwww.sohu.com%2Fa%2F442500469_99933228)
>
> ä»ä¸Šé¢çš„å†…å®¹çœ‹ï¼Œä¹é˜³æœ‰å“ªäº›ç‹¬ç‰¹ä¼˜åŠ¿ï¼Ÿç›¸å¯¹äºå°å®¶ç”µè¡Œä¸šçš„å…¶å®ƒå“ç‰Œ
>

1. **å“ç‰Œè®¤çŸ¥åº¦**ï¼šä¹é˜³ä½œä¸º<font style="color:rgb(195,136,67);">è±†æµ†æœºçš„å‘æ˜è€…</font>ï¼ŒæˆåŠŸå°†è‡ªèº«å“ç‰Œä¸è±†æµ†æœºç´§å¯†ç»‘å®šï¼Œå½¢æˆäº†å¼ºå¤§çš„å“ç‰Œè®¤çŸ¥åº¦ã€‚æ¶ˆè´¹è€…å¯¹ä¹é˜³çš„è®¤çŸ¥ä¸»è¦é›†ä¸­åœ¨è±†æµ†æœºåŠç›¸å…³äº§å“ä¸Šï¼Œè¿™ä¸ºå…¶åœ¨å¸‚åœºä¸­å»ºç«‹äº†è‰¯å¥½çš„å£ç¢‘å’Œä¿¡ä»»åº¦ã€‚
2. **ä¸°å¯Œçš„ä¸“åˆ©æŠ€æœ¯**ï¼šä¹é˜³æ‹¥æœ‰å¤§é‡çš„ä¸“åˆ©æŠ€æœ¯ï¼ˆ6,521é¡¹ï¼‰ï¼Œå…¶ä¸­å®ç”¨æ–°å‹ä¸“åˆ©å æ¯”è¶…è¿‡80%ã€‚è¿™è¡¨æ˜ä¹é˜³åœ¨äº§å“ç ”å‘å’Œåˆ›æ–°æ–¹é¢å…·æœ‰è¾ƒå¼ºçš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿä¸æ–­æ¨å‡ºç¬¦åˆå¸‚åœºéœ€æ±‚çš„æ–°äº§å“ã€‚
3. **ç ”å‘æŠ•å…¥**ï¼šä¹é˜³çš„ç ”å‘å æ¯”ä¸º3.5%ï¼Œé«˜äºè¡Œä¸šå†…å…¶ä»–å“ç‰Œï¼ˆå¦‚å°ç†Šçš„2.3%ï¼‰ï¼Œå¹¶ä¸”æ‹¥æœ‰ç›¸å¯¹è¾ƒé«˜æ¯”ä¾‹çš„ç ”å‘äººå‘˜ï¼ˆçº¦20%ï¼‰ã€‚è¿™ä½¿å¾—ä¹é˜³åœ¨äº§å“åŠŸèƒ½å’ŒæŠ€æœ¯ä¸Šèƒ½å¤Ÿä¿æŒç«äº‰ä¼˜åŠ¿ã€‚
4. ~~**è½»èµ„äº§è¿è¥æ¨¡å¼**~~~~ï¼šä¹é˜³çš„èµ„äº§è´Ÿå€ºè¡¨æ˜¾ç¤ºå…¶å›ºå®šèµ„äº§å æ¯”è¾ƒå°ï¼ŒæµåŠ¨èµ„äº§å æ¯”é«˜ï¼Œå±äºè½»èµ„äº§è¿è¥æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä½¿å¾—ä¹é˜³åœ¨èµ„é‡‘è¿ç”¨å’Œé£é™©æ§åˆ¶ä¸Šå…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚~~
5. ~~**å¤šå…ƒåŒ–äº§å“çº¿**~~~~ï¼šä¹é˜³åœ¨å°å®¶ç”µé¢†åŸŸçš„äº§å“çº¿è¦†ç›–å¹¿æ³›ï¼ŒåŒ…æ‹¬è±†æµ†æœºã€ç”µé¥­ç…²ã€ç ´å£æœºç­‰ï¼Œå½¢æˆäº†å¤šå…ƒåŒ–çš„äº§å“ç»„åˆï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒæ¶ˆè´¹è€…çš„éœ€æ±‚ã€‚~~
6. **å¸‚åœºæ‹“å±•èƒ½åŠ›**ï¼šä¹é˜³ä¸SharkNinjaçš„ååŒæ•ˆåº”ä½¿å…¶èƒ½å¤Ÿåœ¨æ¸…æ´å®¶å±…å¸‚åœºå’Œå¨æˆ¿ç”µå™¨é¢†åŸŸè¿›è¡Œæœ‰æ•ˆå¸ƒå±€ï¼Œå€ŸåŠ©Sharkçš„å“ç‰Œå½±å“åŠ›å’Œæ¸ é“ä¼˜åŠ¿ï¼Œè¿›ä¸€æ­¥æ‹“å±•å¸‚åœºä»½é¢ã€‚
7. **è‰¯å¥½çš„ç°é‡‘æµå’ŒæµåŠ¨æ€§**ï¼šä¹é˜³çš„æµåŠ¨èµ„äº§å æ¯”è¾ƒé«˜ï¼Œä¸”ç°é‡‘æµçŠ¶å†µè‰¯å¥½ï¼Œè¿™ä¸ºå…¶åœ¨å¸‚åœºç«äº‰ä¸­æä¾›äº†å……è¶³çš„èµ„é‡‘æ”¯æŒï¼Œèƒ½å¤Ÿå¿«é€Ÿå“åº”å¸‚åœºå˜åŒ–ã€‚
8. **é€‚åº”å¸‚åœºè¶‹åŠ¿çš„èƒ½åŠ›**ï¼šä¹é˜³èƒ½å¤ŸåŠæ—¶æŠŠæ¡å¸‚åœºè¶‹åŠ¿ï¼Œå¦‚ç–«æƒ…å¸¦æ¥çš„â€œä¸‹å¨çƒ­â€ï¼Œå¹¶é€šè¿‡äº§å“æ•™è‚²å’Œå¸‚åœºæ¨å¹¿æ¥æ»¡è¶³æ¶ˆè´¹è€…çš„éœ€æ±‚ï¼Œå¢å¼ºäº†å…¶å¸‚åœºç«äº‰åŠ›ã€‚

# [No. 923](/blog/xc88oixrmv3qnl9v) (October 18, 2024)

å±…ç„¶ä¹Ÿæ˜¯ 7 çš„å€æ•° å“ˆå“ˆå“ˆ

# [å…³äº SharedWorker è¸©çš„å‘](/blog/pf8sggn8lw2cgfdb) (October 16, 2024)

## å¼€å‘æ–¹é¢
### `console.log`ä¸æ–¹ä¾¿
å¿…é¡»åˆ° <chrome://inspect/#workers> å»ç‚¹ inspect æ‰èƒ½çœ‹åˆ°å®ƒçš„`console.log`æ‰€ä»¥åŸºæœ¬é ä¸äº†è¿™ä¸ªæ¥ debug äº†

ç›¸æ¯”ä¹‹ä¸‹ worker å°±æ²¡é—®é¢˜

### `port`ä¸å¥½æ‹¿
1. åœ¨ onconnect æ—¶ä¼¼ä¹æœ‰ä¸€ä¸ª`event.ports`ï¼Œä½†æ˜¯å¾€å¾€åªæœ‰ä¸€ä¸ª portï¼Œè€Œä¸”ç†è®ºä¸Šå°±åº”è¯¥åªæœ‰ä¸€ä¸ªï¼Œæä¸æ‡‚ä¸ºä»€ä¹ˆæ˜¯ ports è€Œä¸æ˜¯ port
2. åœ¨ message event ä¸­ï¼Œä¹Ÿæœ‰ä¸ª ports çš„å±æ€§ï¼Œä½†æ˜¯æ°¸è¿œæ˜¯ç©ºçš„ï¼Œå¾—é€šè¿‡`event.currentTarget`æ¥æ‹¿ï¼ŒçœŸå¤Ÿå¥‡æ€ªçš„

## éƒ¨ç½²æ–¹é¢
ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„æƒ…å†µä¸å¤ªä¸€æ ·ï¼Œåæ­£æˆ‘å°±æ˜¯æ²¡æ³•ç”¨é module çš„æ–¹å¼æ‰“åŒ…ï¼Œæ‰€ä»¥`new SharedWorker()`çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®š `{ type: "module" }`ã€‚å¦å¤–ï¼Œåœ¨`vite.config.ts`ä¸­ä¹Ÿå¾—æ”¹ï¼š

```typescript
export default defineConfig({
  worker: {
    format: "es",
    plugins() {
      return [sveltekit(), dir2json({ include: ["**/*.py", "**/*.j2"] })];
    },
  },
});
```

ä¸€æ˜¯å¾—æŒ‡å®š format ä¸º "es"ï¼ŒäºŒæ˜¯å¾—é‡æ–°æŒ‡å®šä¸€é pluginsï¼Œæå¾—æˆ‘ debug äº†å¥½ä¹…



---

è¿™ä¸ªé¡¹ç›®æºäºæˆ‘æƒ³æŠŠ pyodide è¿è¡Œåœ¨ SharedWorker ä¸­ï¼Œè¿™æ ·ä¸€æ˜¯å¯åŠ¨æ—¶ä¸ä¼š block UI äº†ï¼ŒäºŒæ˜¯å¤šä¸ªæ ‡ç­¾é¡µä¸­å¯ä»¥å…±äº«ä¸€ä¸ª python å®ä¾‹ï¼š

![](https://opengraph.githubassets.com/9d22557e1832bd9cdf60c0d7271a6ee5183729718400532f995149934059221d/promplate/pyth-on-line/pull/101)

æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œä»¥åå…è®¸ä¸‰ç§æ–¹å¼å¯åŠ¨ pyodideï¼š

| | ä¸»çº¿ç¨‹ | Worker | SharedWorker |
| --- | --- | --- | --- |
| åŠ è½½ | ä¼šé˜»å¡ | åªç”¨ç­‰å¾… | ç”šè‡³å¯èƒ½ä¸ç”¨ç­‰å¾… |
| éš”ç¦»æ€§ | å…±äº« | å¯ä»¥éš”ç¦» | å¯ä»¥éš”ç¦»ä½†æ›´è›®çƒ¦ |
| å¯ä»¥æ‰“æ–­ | ä¸å¯ä»¥ | å¯ä»¥ | å¯ä»¥ä½†æ›´éº»çƒ¦ |
| ç”Ÿå‘½å‘¨æœŸ | é¡µé¢ | é¡µé¢ | ä¸å¥½æ§åˆ¶ |
| ä½œç”¨åŸŸ | window | DedicatedWorkerGlobalScope | SharedWorkerGlobalScope |


è¿™ä¹ˆçœ‹æ¥ä¸»è¦æ˜¯ç”Ÿå‘½å‘¨æœŸä¸å¥½ç®¡ç†ï¼Œè€Œä¸”å¦‚æœè¦éš”ç¦»çš„è¯å°±å¾ˆéº»çƒ¦ã€‚ä»¥åå†åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå†™å§

ä¸è¿‡ç›®å‰çœ‹æ¥ï¼Œé™¤äº†éº»çƒ¦ï¼Œç”¨ Worker å…¶å®æ²¡ä»€ä¹ˆä¼˜åŠ¿ å“ˆå“ˆå“ˆ

# [Promplate ç›®å‰çš„æˆæœæ€»ç»“](/blog/yeg4r445lgqz5dg8) (October 10, 2024)

æ­£å¥½è¦ç»™ä¸€ä¸ªæœ‹å‹ä»‹ç»ä¸€ä¸‹ï¼Œäºæ˜¯è‡ªå·±å°±æ•´ç†ä¸€ä¸‹ï¼š

|  é¡¹ç›®  |  é¢å‘  |  è¿›åº¦  | ä»‹ç» |
| --- | --- | --- | --- |
| [promplate](https://github.com/promplate/core) | å¼€å‘è€… | stable | ä¸€ä¸ªç”¨äºç”¨åˆ°æç¤ºå·¥ç¨‹çš„é¡¹ç›®çš„ python åº“ï¼ˆæœªæ¥å¯èƒ½ä¹Ÿå®ç°ä¸€ä¸ª JavaScript ç‰ˆæœ¬çš„ï¼Œåº”è¯¥ä¸éš¾ï¼‰ï¼ŒåŒ…å«ä¸€ä¸ªæ¨¡æ¿å¼•æ“ã€ä¸€ä¸ªåŸºäºçŠ¶æ€æœºçš„ LLM agent æ¡†æ¶ã€ä¸€ä¸ªè°ƒç”¨ OpenAI API çš„ chat completions å®¢æˆ·ç«¯ã€‚äº‹å®ä¸Šï¼Œpromplate çš„åå­—å°±æ˜¯ prompt + templateï¼Œå› ä¸ºè¿™å°±æ˜¯æç¤ºå·¥ç¨‹çš„æ ¸å¿ƒ |
| [promplate-demo](https://github.com/promplate/demo) | å¼€å‘è€…ã€æ™®é€šç”¨æˆ· | stable, development | ä¸€ä¸ªæç¤ºå·¥ç¨‹æœåŠ¡ç«¯é¡¹ç›®ï¼Œæœ¬æ„æ˜¯ä½œä¸ºä½¿ç”¨ promplate åšæç¤ºå·¥ç¨‹é¡¹ç›®çš„ä¸€ä¸ª demoï¼Œç°åœ¨ä½œä¸ºæˆ‘[ä¸€ä¸ªå…è´¹çš„ç®€å• LLM chat æœåŠ¡ç½‘ç«™](https://github.com/CNSeniorious000/free-chat)çš„åç«¯ã€‚å…¶ä¸­åŒ…å«åå‡ ä¸ª LLM ä¾›åº”å•†çš„é›†æˆã€ä¸€äº›å®ç”¨çš„æç¤ºå·¥ç¨‹å®ç°ï¼Œæ¯”å¦‚ç¿»è¯‘ã€æå–ã€æ€»ç»“ï¼Œä»¥åŠæœ‰ä¸€ä¸ª WIP é€šç”¨é¢†åŸŸ agent å®ç° |
| [reasonify](https://github.com/promplate/reasonify) | æ™®é€šç”¨æˆ·ã€ç ”ç©¶è€… | beta | ä¸€ä¸ªéå¸¸å®éªŒæ€§çš„ agentï¼Œå®ƒä¸ç”Ÿæˆæ–‡æœ¬ï¼Œè€Œæ˜¯åªç”Ÿæˆä»£ç ã€‚å®ƒç”Ÿæˆçš„ä»£ç ä¼šç«‹å³è¿è¡Œï¼Œå®ç°ä¸ç”¨æˆ·çš„äº¤äº’ã€‚åº”ç”¨åœºæ™¯æ˜¯ä¸€äº›ä»£ç ä»»åŠ¡ï¼Œè¿™ä¸ªé¡¹ç›®ç›®å‰å®Œæˆåº¦è¿˜ä¸å¤ªé«˜ |
| [partial-json-parser](https://github.com/promplate/partial-json-parser) | å¼€å‘è€… | stable | ä¸€ä¸ªç”¨äºè§£ææµå¼ä¼ è¾“ä¸­çš„ JSON çš„ parserï¼Œç°è¢«ç”¨äº vllm ç­‰å¤šä¸ªåº“ä¸­ |
| [partial-json-parser-js](https://github.com/promplate/partial-json-parser-js) | å¼€å‘è€… | stable | åŒä¸Šï¼Œä½†æ˜¯æ˜¯ JavaScript å®ç°çš„ |
| [promplate-pyodide](https://github.com/promplate/pyodide) | å¼€å‘è€… | stable | ä¸€ä¸ªå¯¹ promplate çš„ monkey patchï¼Œä½¿å…¶èƒ½åœ¨ pyodide ç¯å¢ƒä¸­è¿è¡Œ |
| [promptools](https://github.com/promplate/toolkit) | å¼€å‘è€… | stable | ä¸€äº›ä¸ promplate ä¸ç»‘å®šçš„å·¥å…·å‡½æ•°ï¼Œå¯¹ promplate æ²¡æœ‰å¼ºåˆ¶ä¾èµ– |
| [promplate-trace](https://github.com/promplate/trace) | å¼€å‘è€… | unmaintained | å°† promplate ä¸ LLM observation å¹³å°çš„é›†æˆï¼Œç›®å‰æ”¯æŒ langsmithã€langfuseï¼Œæœªæ¥å‡†å¤‡æ”¯æŒ literalã€lunaryã€logfire ç­‰ï¼Œè®©ä½¿ç”¨ promplate çš„æç¤ºå·¥ç¨‹é¡¹ç›®å¯ä»¥ä»¥ä¸€è¡Œä»£ç è·å¾—è¿™äº›å¹³å°çš„ tracing æˆ–è€…è¯´ logging |
| [isomorphic-fetch](https://github.com/promplate/isomorphic-fetch) | å¼€å‘è€… | alpha | ä¸€ä¸ªåœ¨ pyodide å’Œé pyodide ç¯å¢ƒéƒ½æœ‰ä¸€æ ·çš„ API çš„ http è¯·æ±‚åº“ |
| [pyth-on-line](https://github.com/promplate/pyth-on-line) | å¼€å‘è€… | development | æˆ‘ç›®å‰ä¸»è¦åœ¨åšçš„é¡¹ç›®ï¼Œç›®æ ‡æ˜¯æˆä¸º Stackblitzã€Bolt.new è¿™æ ·çš„ä¸œè¥¿ |


æ­¤å¤–è¿˜æœ‰ä¸€äº›é¢å‘å¼€å‘è€…çš„åº“ï¼Œåœ¨è¿™é‡Œå°±ä¸æäº†

# [ç»†ç²’åº¦å‘åŒ…](/blog/wzrh6ikbgmz32fh2) (October 9, 2024)

æˆ‘è§‰å¾—æ¯ä¸ªåŒ…å°±åº”è¯¥ atomicï¼Œä¸€ä¸ªåŒ…å°±å®Œæˆæœ€å°çš„ä¸€ä¸ªä»»åŠ¡ã€‚

# [æ— æ ‡é¢˜æ–‡æ¡£](/blog/xsgfhq3ylcek1k0q) (October 8, 2024)

è„æ•°æ®

+ ä¸å®Œæ•´ï¼ˆç¼ºå¤±ï¼‰
+ å™ªéŸ³
+ ä¸ä¸€è‡´

æ•°æ®è´¨é‡çš„æµ‹åº¦

+ å‡†ç¡®æ€§ accuracy
+ å®Œæ•´æ€§ completeness
+ ä¸€è‡´æ€§ consistency
+ æ—¶æ•ˆæ€§ timeliness
+ ç›¸å…³æ€§ relevance
+ å¯ä¿¡æ€§ believability
+ å¯è§£é‡Šæ€§ interpretability

# [åœ¨è€ƒè™‘æ¢ä¸€ä¸ª markdown parser äº†](/blog/yly2o4u65xusvx5u) (September 30, 2024)

ä¹‹å‰éšç€å†™å‰ç«¯çš„ç»éªŒå’Œè€å¿ƒè¶Šæ¥è¶Šå¤šï¼Œé€æ¸å°è¯•äº†ä¸åŒçš„ markdown rendererï¼š

+ è¯­é›€ blog è¿™è¾¹ç”¨çš„æ˜¯ markdownit + highlight.jsï¼ˆå‰æ®µæ—¶é—´åè€…æ”¹æˆ shiki äº†ï¼‰
+ Free Chat ç”¨çš„æ˜¯åŸé¡¹ç›®çš„ markdownit + highlight.jsï¼ˆä½†æ˜¯æ˜¯åŒæ­¥çš„ï¼‰
+ Anse ç”¨çš„æ˜¯ remark-rehype + rehype-prismï¼Œç°åœ¨æƒ³æ¥æ€ªä¸å¾—æ…¢ï¼æ„Ÿè§‰æ‰å¸§çš„é˜ˆå€¼æ¯” Free Chat è¿™è¾¹ä½ä¸€äº›
+ Promplate Docs ç”¨çš„æ˜¯ remark-rehype + shiki + mdsvexï¼Œç”±äºç”¨äº† mdsvex æ‰€ä»¥å…¶å®æ˜¯æ¸²æŸ“å‡º svelte æ¨¡æ¿äº†ï¼Œç†è®ºä¸Šçµæ´»æ€§æœ€å¤§ï¼Œä½†æ—¢æ²¡æœ‰ markdown çš„ lint ä¹Ÿæ²¡æœ‰ svelte çš„è‡ªåŠ¨è¡¥å…¨ï¼Œæ‰€ä»¥å…¶å®ä¸å¤ªå¥½ç”¨ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨ Generative UI çš„æ—¶ä»£ï¼Œmdsvex è¿™ç§ä¸èƒ½æµå¼æ¸²æŸ“çš„å°±æœ‰ç¡¬ä¼¤äº†ï¼ˆé™¤éæ¥å— svelte ç¼–è¯‘å™¨åœ¨ runtime è¿è¡Œï¼‰
+ Pythonline ç”¨åˆ°æ˜¯ remark-parse ç„¶åæ‰‹åŠ¨ä» ast æ¸²æŸ“åˆ° HTMLï¼Œè¿™ä½¿å¾—æœ‰å‡ ä¹è¶³å¤Ÿçš„è‡ªå®šä¹‰æ€§ï¼Œå¯ä»¥è®©ä¸€äº›å…ƒç´ ï¼ˆinlineæˆ–blockçš„ä»£ç ï¼‰å…·æœ‰ä¸€äº›å“åº”æ€§ï¼Œå¦å¤–è¿™æ ·ä¸ä¼šé‡å¤ä¿®æ”¹ DOMï¼Œæ€§èƒ½æå¤§ç¨‹åº¦ä¸Šæé«˜äº†ï¼Œè¿™ä¸‹åŸºæœ¬ä¸Šåªæœ‰ parse çš„ cost äº†

è‡ªä»å°è¯•è¿‡ä» AST æ¸²æŸ“åˆ°ç»„ä»¶ï¼Œå°±æ‰“ç®—æŠŠå®ƒè¿ç§»åˆ° Free Chatï¼ˆæ¯•ç«Ÿè¿™ä¸ªé¡¹ç›®æˆ‘å¤©å¤©å¾—ç”¨ï¼Œæœ‰æ—¶å€™æ‰å¸§è¿˜æ˜¯å¾ˆçƒ¦çš„ï¼‰ï¼Œçªç„¶æƒ³åˆ°ï¼Œæ¯ç§ markdown parser / renderer è‚¯å®šéƒ½å¯ä»¥æ‹¿åˆ° AST å•Šï¼Œä½•å¿…ç”¨ remark-parseï¼ˆæ¯•ç«Ÿæˆ‘ä¹Ÿæ²¡ç”¨ä¸Šå®ƒä»€ä¹ˆæ’ä»¶ï¼Œå¦‚æœå®ƒæ€§èƒ½ä¸å¥½çš„è¯ï¼Œå°±æ²¡å¿…è¦ç”¨å®ƒäº†ï¼‰

[marked vs markdown-it vs remark vs showdown: Which is Better Markdown Parsing Libraries? (npm-compare.com)](https://npm-compare.com/markdown-it,marked,remark,showdown)

æ²¡æƒ³åˆ° remark çš„ star æ•°å’Œ download è¿™ä¹ˆå°‘ã€‚ä¸€ç›´ä»¥ä¸ºå®ƒæ‰æ˜¯æœ€ç°ä»£çš„ best practice å‘¢

![](/nlark/yuque/0/2024/png/26070246/1727703669249-a7c817d6-cc8f-4263-857f-9fcd741d0b6a.png)

# [åšäº†ä¸€ä¸ªé€‚åˆ Safari çš„ banner æ•ˆæœ](/blog/rkklkxr3pcggrgh6) (September 29, 2024)

å‘äº†å°çº¢ä¹¦ï¼š[https://www.xiaohongshu.com/discovery/item/66f96cee000000001a021da7](https://www.xiaohongshu.com/discovery/item/66f96cee000000001a021da7?app_platform=ios&app_version=8.55.2&apptime=1727622385&share_from_user_hidden=true&type=video&appuid=62f77a47000000001902f89a&author_share=1&xsec_token=DBy9gPVv8q0HSJQJtZK1_8lFNVibPnSK32ZmJvbz-nRb0=&xsec_source=app_share&xhsshare=WeixinSession&shareRedId=ODhINzpGOEA2NzUyOTgwNjc8OTlKPT9K)

ç»†èŠ‚æ”¾å¤§ç‰ˆï¼š[https://www.xiaohongshu.com/explore/66f971bb000000001b0203ab](https://www.xiaohongshu.com/explore/66f971bb000000001b0203ab?app_platform=ios&app_version=8.55.2&share_from_user_hidden=true&xsec_source=app_share&type=video&xsec_token=CB03Swx9lV_mChzCvp3F31gxgnOQtUgc0MLG0vTkKJonE=&author_share=1&xhsshare=WeixinSession&shareRedId=ODhINzpGOEA2NzUyOTgwNjc8OTlKPT9K&apptime=1727623705&wechatWid=fdf45b01a2ed62a229dfc15218e51334&wechatOrigin=menu)

çµæ„Ÿæ¥æºäºï¼š[Banners that adapt the theme-color / X](https://x.com/pacocoursey/status/1675667770502176768)

# [è®°ä¸€ä¸ª Safari çš„ bug](/blog/nty6i6khptngh1y1) (September 29, 2024)

input çš„`click`/`select`çš„ eventHandler ä¼šé˜»æ­¢å®ƒè¢«é€‰ä¸­ï¼Œå¯èƒ½æ˜¯è¦ç­‰åˆ°è¿™ä¸ª handler å¤„ç†å®Œäº†æ‰ä¼šè¢«é€‰ä¸­

å‘ç°çš„åŸå› ï¼šå½“æ—¶åœ¨ç»™ä¸€ä¸ª`<label>`å…ƒç´ åŠ äº† ripple çš„æ•ˆæœä¹‹åï¼Œå‘ç° iOS ä¸Šå˜å¡äº†

```html
<input type="radio" name="model" {id} hidden on:select={() => setModel(id)} checked={$model === id}/>

<label use:ripple={{ color: 'var(--c-fg-70)' }} for={id}>
  <h4>{name}</h4>
  <h5>{title}</h5>
</label>
```

åæ¥çš„è§£å†³åŠæ³•ï¼Œæ˜¯æ”¹æˆç”¨`<button>`ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆå–œæ¬¢ç”¨ label å’Œ input è¿™æ ·ï¼Œæ‰€ä»¥åæ¥è¿˜æ˜¯ä¿ç•™äº† label ä¸º `sr-only`

# [â€œåˆ›æ–°é¢„ç®— (innovation budget)â€ä¹‹äºæˆ‘](/blog/on-innovation-tokens) (September 28, 2024)

![](/nlark/yuque/0/2024/png/26070246/1727495918730-bb65e3d7-a46d-44d1-8c66-4a84359a6047.png)

ä¹‹å‰ä¸€ä½æ±‡ä¸°çš„æœ‹å‹æ¨èæˆ‘ä¸€ç¯‡å¾ˆæœ‰è¶£çš„æ–‡ç«  â€”â€” [Choose Boring Technology](https://boringtechnology.club/)ï¼ˆ[é¸æ“‡ç„¡èŠçš„æŠ€è¡“](https://boringtechnology.club/index_zh_TW.html)ï¼‰

ä»Šå¤©åˆåœ¨[ä¸€ä¸ªåœ°æ–¹](https://www.reddit.com/r/solidjs/comments/18wawnm/comment/kfyg4ka/)çœ‹åˆ°æåˆ°è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘åˆæƒ³èµ·æ¥å®ƒï¼Œäºæ˜¯å‡†å¤‡å†™ä¸€å†™æˆ‘çš„çœ‹æ³•ã€‚æˆ‘å½“æ—¶æ˜¯è¿™ä¹ˆå›å¤ä»–çš„ï¼š

> I like the idea that each project has "a limited number of innovation tokens to spendâ€œ. For me, however, I am more oriented towards technology rather than specific projects. So, technologies I chose are never unknown to me, and they don't waste my innovation tokens. For enterprises, I don't like competing against rival products in front of them. I always (overconfidently) believe there are currently no alternatives in the market segment where my product is positioned.
>

æˆ‘çš„æ„æ€æ˜¯ï¼Œæˆ‘è‡ªå·±çš„é¡¹ç›®ï¼Œä»æ¥ä¸æ˜¯ç›®æ ‡å¯¼å‘ï¼Œè€Œæ˜¯**æŠ€æœ¯å¯¼å‘**ã€‚æˆ‘å¹¶ä¸æ˜¯æƒ³åšä»€ä¹ˆäº§å“ï¼Œäºæ˜¯å»å­¦ä¹ å®ƒéœ€è¦çš„æŠ€æœ¯ï¼Œè€Œæ˜¯è‡ªå·±å‡­å…´è¶£å»å­¦ä¸€äº›æŠ€æœ¯ï¼ŒåŒæ—¶æƒ³æƒ³ä»–ä»¬èƒ½åšä»€ä¹ˆé¡¹ç›®å‡ºæ¥ã€‚å½“ç„¶ï¼Œè¿™äº›é¡¹ç›®å¯èƒ½ä¼šéœ€è¦ä¸€äº›æˆ‘è¿˜æ²¡å­¦çš„æŠ€æœ¯ï¼Œè¿™æ—¶æˆ‘ä¼šå»åˆ¤æ–­æˆ‘å¯¹é‚£äº›å…´è¶£æ˜¯å¦æ„Ÿå…´è¶£ï¼Œå¦‚æœä¸æ„Ÿå…´è¶£æˆ–è€…å¤ªå¤šå¤ªéš¾æˆ–è€…ä¸é€‚åˆæˆ‘ï¼Œæˆ‘å°±ä¸ä¼šç«‹å³å»åšè¿™äº›é¡¹ç›®ã€‚

åæ¥å½“æˆ‘è·Ÿå¥³æœ‹å‹èŠèµ·è¿™ä¸ªè§‚ç‚¹çš„æ—¶å€™ï¼Œæƒ³åˆ°ï¼Œæˆ‘å¤§å­¦æ—¶å¾ˆå¤šé¡¹ç›®ä¸äº†äº†ä¹‹äº†ï¼Œå…¶å®å°±æ˜¯è¿™ä¸ªä¸ªæ€§çš„å¿…ç„¶ç»“æœã€‚å¯¹äºå¾ˆå¤šé¡¹ç›®ï¼Œæˆ‘å…¶å®å¹¶æ²¡æœ‰å¯¹ä»–ä»¬çš„æŠ€æœ¯é‚£ä¹ˆæœ‰å…´è¶£ã€‚åœ¨åšç€åšç€ï¼Œå‘ç°æˆ‘åœ¨ä¸ºäº†è¿™ä¸ªç›®æ ‡ï¼Œæ¶ˆè€—äº†è¿‡å¤šçš„ innovation tokensï¼Œè¶…è¿‡äº†æˆ‘çš„åˆ›æ–°é¢„ç®—ï¼Œè€Œæˆ‘æœ‰æ˜¯ä¸€ä¸ªä¸å¥½æ„æ€è·Ÿåˆ«äººè¯´ä¸åšäº†çš„äººï¼Œäºæ˜¯å±¡æ¬¡å‘ç”Ÿäº†è·‘è·¯çš„äº‹ä»¶ğŸ˜‚åœ¨æ­¤å†æ¬¡å‘å¤§å®¶æŠ±æ­‰ä¸€ä¸‹~æˆ‘ä¿è¯åœ¨ä»¥åå¯èƒ½çš„åˆä½œä¸­ï¼Œæˆ‘å¦‚æœè§‰å¾—åšä¸ä¸‹å»äº†æˆ‘ä¼šåŠæ—¶è¯šå®ç›¸å‘Šã€‚

# [Cerebras ä¸ Groq](/blog/rek9u3gmic663ack) (September 25, 2024)

![](/nlark/yuque/0/2024/png/26070246/1727280704638-5d515c2d-7d78-4d92-b671-7f75487c300d.png)

![](/nlark/yuque/0/2024/png/26070246/1727280715882-ba5b226d-077f-4039-8ab9-7a65673c1db2.png)

# [æ–°ç®€å† èµ·è‰](/blog/ydr1wtyhwn2hdoo3) (September 25, 2024)

æˆ‘æ˜¯ Muspi Merol (abbr)ï¼Œåº„æ¯…è¾‰ï¼Œä¸€å[åŒ—å¸ˆç ](https://www.bnuzh.edu.cn/)çš„ undergraduateï¼Œä¸€å[å¼€æº**çˆ±å¥½è€…**](https://muspi-merol.nuxt.dev/)

æˆ‘å…³æ³¨ LLM åº”ç”¨ã€å¼€å‘è€…å·¥å…·ã€æ•™è‚²ã€è®¾è®¡ (icons)

ä½œä¸ºä¸€ä¸ªæŠ€æœ¯æ ˆä¸°å¯Œï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸€å®šå·¥ä½œç»éªŒçš„ä¸ªäººï¼Œæˆ‘çš„ç†æƒ³å·¥ä½œæ˜¯ äº§å“ç»ç† / å…¨æ ˆå¼€å‘è€… / å—èµåŠ©çš„å…¨èŒå¼€æºè€…ã€‚æˆ‘éœ€è¦ä¸€ä»½èƒ½ç»´æŒç”Ÿè®¡çš„è–ªé…¬ï¼Œä½†æ˜¯æ°›å›´æ´»æ³¼ã€æŠ€æœ¯å‰æ²¿ï¼Œä¸”ä¸€å®šç¨‹åº¦ä¸Šæ”¯æŒasync



### é¡¹ç›®ç»å†
+ ä¸ºäº†é‡äº§æç¤ºå·¥ç¨‹é¡¹ç›®ï¼Œæˆ‘æœ‰ä¸€å¥—å¼€æºæ¡†æ¶ã€‚æˆ‘ç§‰æŒ atomic çš„ç²¾ç¥ï¼Œåœ¨å®Œæˆä¸»çº¿ä»»åŠ¡çš„åŒæ—¶ä¹Ÿè®©æ”¯çº¿ä»»åŠ¡â€æ¡ƒææ»¡å¤©ä¸‹â€œâ€”â€” partial json åº“ js å’Œ py stats å‘¨åä¸‡ä¸‹è½½é‡é“¾æ¥
+ ç›®å‰æ­£åœ¨åšä¸€ä¸ª Stackblitz + Codepen for Python çš„é¡¹ç›®ã€‚åœ¨åšè¿™ä¸ªé¡¹ç›®çš„è¿‡ç¨‹ä¸­ä¸º upstream è´¡çŒ®äº†æ•°ä¸ª PRï¼Œæˆä¸ºäº† 10K+ stars é¡¹ç›®çš„ member
+ åœ¨å­¦æ ¡æ­£åœ¨å¼‚æ­¥è¿›è¡Œå‡ ä¸ªä¸ç”Ÿç‰©å­¦ã€ç¤¾ä¼šå­¦äº¤å‰çš„çš„é¡¹ç›®
+ æœ‰ä¸€ä¸ªæŒç»­ä¸€å¹´å¤šçš„åŠå…¬ç›Šé¡¹ç›®
+ æœªå®Œå¾…ç»­â€¦â€¦



### å®ä¹ ç»å†
#### å…¨æ ˆå·¥ç¨‹å¸ˆã€æç¤ºå·¥ç¨‹å¸ˆ
å¤§ä¸‰æ—¶æˆ‘åœ¨**ä¸Šæµ·å®ˆæ‰£ç§‘æŠ€**æœ‰ä¸€æ®µå¿«ä¹çš„å®ä¹ ç»å†ï¼ŒåŒäº‹æ°›å›´è½»æ¾ï¼Œå·¥ä½œå†…å®¹å¼€æ”¾ã€‚åŒæ—¶åœ¨**æ­å·æ§²ä¸°ç§‘æŠ€**æœ‰ä¸€æ®µæœ‰æ”¶è·ä¸”ç‰¹åˆ«çš„å®ä¹ ç»å†ã€‚ç¦»å¼€ä¸Šæµ·æ˜¯å› ä¸ºè‡ªç”±åº¦ä¸å¤Ÿé«˜ï¼Œä¸”é¡¹ç›®ç®¡ç†ç¼ºä¹å·¥ç¨‹åŒ–ã€‚æ­å·çš„è€æ¿å’Œå·¥ä½œå†…å®¹åœ¨å„ç§æ–¹é¢éƒ½å¾ˆå¥½ï¼Œä½†æ˜¯åšçš„æ˜¯ toB çš„ç”Ÿæ„ï¼Œä¸ªäººä¸å¤ªæœ‰å…´è¶£è€Œä¸”ä¸­é€”å› ä¸ºä¸€äº›é”™è¯¯å†³å®šå°±é€€å‡ºäº†ã€‚ä¹Ÿæœ‰ä¸€æ®µåœ¨**æˆéƒ½çˆ±è¿›åŒ–ç§‘æŠ€**çš„çŸ­æš‚çš„å®ä¹ ç»å†ï¼Œç›®å‰æ„Ÿåˆ°å”¯ä¸€çš„ç¼ºæ†¾æ˜¯åŒäº‹ä¸å¤Ÿå¹´è½»ï¼Œåæ¥ç”±äºä¸ªäººå®‰æ’æš‚æ—¶æ²¡æœ‰ç»§ç»­ã€‚

#### è®¾è®¡æ€»ç›‘ã€ç ”ç©¶åŠ©ç†
åœ¨å¤§äºŒæ—¶å‚åŠ äº†å­¦æ ¡é‡Œçš„ 6+ ä¸ªå®£ä¼ éƒ¨é—¨ï¼Œè´Ÿè´£å¹³é¢è®¾è®¡ã€æ‘„å½±ç­‰å·¥ä½œï¼Œæœ‰åšç®¡ç†çš„ç»éªŒï¼Œæœ‰ä¸€å®šè‡ªåª’ä½“çš„ç»éªŒï¼ˆä½†ä¸ªäººä¸å–œæ¬¢è¡Œä¸šæ°›å›´ï¼‰ã€‚



---

å¯ä»¥æœ‰ä¸€ä¸ªå‘æˆ‘æé—®çš„æŒ‰é’®ï¼Œä¸€æ–¹é¢ç”¨ä¸€ä¸ª Q&A åˆ—è¡¨ RAGï¼Œå¦ä¸€æ–¹é¢å¯ä»¥ç›´æ¥å‘é‚®ä»¶é€šçŸ¥æˆ‘

# [OpenAI æ¬ºéª—æ¶ˆè´¹è€…](/blog/phgapuy9ylf3t77p) (September 25, 2024)

![](/nlark/yuque/0/2024/png/26070246/1727244703744-eecbb8d3-026f-4309-896b-b7b898145083.png)

![](/nlark/yuque/0/2024/png/26070246/1727244341676-666f03ee-94fc-431b-88d6-9aa097e8c3db.png)

å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªçš„ä»·æ ¼æ˜¯ä¸€æ ·çš„ï¼Œä½†å…¶å®ä¸Šé¢æ˜¯ gpt-4oï¼Œä¸‹é¢æ˜¯ gpt-4o-mini

In [calculating-costs](https://platform.openai.com/docs/guides/vision/calculating-costs) it is documented that:

> Each of those squares costs 170 tokens. Another 85 tokens are always added to the final total.â€
>

But on [pricing](https://openai.com/api/pricing/) only the gpt-4o's price is right, the gpt-4o-mini's is larger, which makes the price equals the gpt-4o's.

If I can use 4o at the same price compared to 4o-mini, why am I using 4o-mini?

As a consumer who has been trusted OpenAI for more than a year, I feel deceived to certain degree.

æœæ–­æŠ•è¯‰ï¼

![](/nlark/yuque/0/2024/png/26070246/1727244615495-1c499783-213d-4e16-9132-07474d403233.png)

---

æ²¡æˆªå›¾ï¼Œä½†æ˜¯å…¶å®å³ä½¿ä¸å¼€`{"detail": "low"}`è®¡ç®—å‡ºæ¥çš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘è§‰å¾—è¦ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªé”™è¯¯ï¼ˆé€€é’±ï¼ï¼‰è¦ä¹ˆå°±æ˜¯å­˜å¿ƒçš„ï¼

| è®¡è´¹é¡¹ç›® | ä»·æ ¼ / æ•°é‡ |
| --- | --- |
| Price per 1M tokens (fixed) | $5.00 |
| Resized width | 1000 |
| Resized height | 500 |
| 512 x 512 tiles | 2 Ã— 1 |
| Total tiles | 2 |
| Base tokens | 85 |
| Tile tokens | 170 Ã— 2 = 340 |
| Total tokens | 425 |
| Total price | $0.002125 |

# [æ— æ ‡é¢˜æ–‡æ¡£](/blog/exs4wapv3wxhk8wi) (September 23, 2024)

MPI æ¶ˆæ¯ä¼ é€’æ¥å£

æ˜¾å¼é€šä¿¡

# [ã€Šæ•°å­—å›¾åƒå¤„ç†ã€‹ç¬”è®°](/blog/cbtg1wi0wnpu40d3) (September 23, 2024)

### è§†è§‰è¿‡ç¨‹
1. å…‰å­¦è¿‡ç¨‹
2. åŒ–å­¦è¿‡ç¨‹
3. ç¥ç»å¤„ç†è¿‡ç¨‹

æ•´ä½“è§†è§‰è¿‡ç¨‹

å›¾åƒæˆåƒæ¨¡å‹

+ 2D äº®åº¦å‡½æ•°ï¼šäº®åº¦æ˜¯èƒ½é‡çš„äº®åº¦

é‡‡æ ·å’Œé‡åŒ–

æ˜¾ç¤ºåˆ†è¾¨ç‡ / è§‚æµ‹åˆ†è¾¨ç‡

### ç°åº¦æ’å€¼
å‰å‘æ˜ å°„ï¼šä¸€ä¸ªå¤±çœŸå›¾çš„åƒç´ æ˜ å°„åˆ°ä¸å¤±çœŸå›¾çš„å››ä¸ªåƒç´ ä¹‹é—´ï¼Œæœ€åç°åº¦æ˜¯ç”±è®¸å¤šå¤±çœŸå›¾åƒç´ çš„è´¡çŒ®ä¹‹å’Œå†³å®š

+ å‰å‘æ˜ å°„æ˜¯ä»å·²çŸ¥å›¾åƒå‡ºå‘çš„ï¼Œç”±å·²çŸ¥å›¾åƒå‘æœªçŸ¥å›¾åƒçš„æ˜ å°„

åå‘æ˜ å°„ï¼šä»æœªçŸ¥å›¾åƒå‡ºå‘

### ç›´æ¥ç°åº¦æ˜ å°„ï¼ˆç‚¹è¿ç®—ï¼‰
è®²$ f(x, y) $æŒ‰$ E_H $å˜æ¢æˆ$ g(x, y) $

ç›´æ¥ç°åº¦æ˜ å°„æ˜¯ä¸€ç§ç‚¹æ“ä½œ

å¸¸è§çš„ç°åº¦æ˜ å°„

+ å›¾åƒæ±‚å
+ å¢å¼ºå¯¹æ¯”åº¦
+ åŠ¨æ€èŒƒå›´å‹ç¼©
+ ç°åº¦åˆ‡åˆ†

# [æ‰‹æœºæ·‹é›¨å±å¹•åäº†](/blog/le7xqyco71b8vwmh) (September 22, 2024)

ä¼¼ä¹ä»€ä¹ˆéƒ½å¹²å¾—äº†ï¼Œå°±æ˜¯å±å¹•æ˜¾ç¤ºå’Œè§¦æ‘¸å±æ²¡ååº”

å¥½çƒ¦ æ„Ÿè§‰è¦ä½“éªŒä¸€ä¸‹æ²¡æœ‰æ‰‹æœºçš„æ—¥å­äº†

# [ã€Šå¤§æ•°æ®åˆ†æã€‹ ç¬”è®°](/blog/ki77xyom1usp381t) (September 20, 2024)

## ç‰¹å¾å·¥ç¨‹
#### å±æ€§ç±»å‹
1. æ ‡ç§°å±æ€§
    - äºŒå…ƒå±æ€§æ˜¯ç‰¹æ®Šçš„æ ‡ç§°å±æ€§
    - éå¯¹ç§°äºŒå…ƒå±æ€§æŒ‡æ¦‚ç‡ä¸åŒçš„äºŒå…ƒå±æ€§
2. åºæ•°å±æ€§
    - ç›¸ç»§å€¼ä¹‹é—´çš„å·®æ˜¯æœªçŸ¥çš„
3. æ•°å€¼å±æ€§
    - ç¦»æ•£å±æ€§ã€è¿ç»­å±æ€§
    - â€œæ— é™å¯æ•°â€ï¼šæ¯”å¦‚å­¦å·

#### ç‰¹å¾å·¥ç¨‹
1. ç‰¹å¾æå–
2. ç‰¹å¾å˜æ¢
3. ç‰¹å¾é€‰æ‹©

### ç‰¹å¾å˜æ¢
![](/nlark/yuque/0/2024/png/26070246/1726811528559-7d9705c9-dd16-49f1-9340-b90a1a326aa2.png)

+ z-score æ ‡å‡†åŒ–ï¼šå‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1
+ æœ€å¤§æœ€å°å½’ä¸€åŒ–

![](/nlark/yuque/0/2024/png/26070246/1726811988327-a9c9e98d-184c-4b26-bc41-09f5d9c426aa.png)

##### åˆ†ç®±ç¦»æ•£åŒ–
+ ç­‰å®½åˆ†ç®±ï¼šâ€œç®±å­çš„å®½åº¦â€ç›¸åŒ
+ ç­‰æ·±åˆ†ç®±ï¼šæ¯ç®±å®ä¾‹æ•°ç§°ä¸ºâ€œç®±å­çš„æ·±åº¦â€

åˆ†ç®±åï¼Œç”¨ç®±å‡å€¼ã€ä¸­ä½æ•°æˆ–è¾¹ç•Œå€¼æ›¿æ¢ç®±ä¸­çš„æ¯ä¸ªå€¼ï¼Œå®ç°å±æ€§å€¼çš„ç¦»æ•£åŒ–

![](/nlark/yuque/0/2024/png/26070246/1726812771038-5e13413f-16fb-44bf-9a10-179fbdf71f75.png)

#### ç‰¹å¾å˜æ¢
æ•°å€¼åŒ–å¤„ç†

+ æœ‰åºå˜é‡
+ æ— åºå˜é‡
    - äºŒåˆ†ç±»ï¼š01
    - å¤šåˆ†ç±»
        * one-hot
        * æ ‡ç­¾ç¼–ç ï¼ˆæ— å«ä¹‰ï¼‰

#### æ•°æ®é™ç»´
##### ä¸»æˆåˆ†åˆ†æ PCA
1. m ä¸ª n ç»´æ•°æ®æ ·æœ¬çŸ©é˜µ X
2. X çš„æ¯è¡Œ é›¶å‡å€¼åŒ–
3. æ±‚åæ–¹å·®çŸ©é˜µ
4. æ±‚åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼åŠå¯¹åº”çš„ç‰¹å¾å‘é‡
5. å°†ç‰¹å¾å‘é‡æŒ‰å¯¹åº”çš„ç‰¹å¾å€¼å¤§å°ä»ä¸Šåˆ°ä¸‹æŒ‰è¡Œæ’åˆ—æˆçŸ©é˜µï¼Œå–å‰ r è¡Œç»„æˆçŸ©é˜µ$ W^T $
6. $ Y = W^TX $å³ä¸ºé™åˆ° r ç»´åçš„æ•°æ®

![](/nlark/yuque/0/2024/png/26070246/1726814461637-194ac8e1-60fc-4473-ba22-71f24d9260fa.png)



##### çº¿æ€§åˆ¤åˆ«åˆ†æ LDA
æœ‰ç›‘ç£çš„çº¿æ€§é™ç»´

åŸºæœ¬æ€æƒ³ï¼šä½¿ç”¨æ•°æ®çš„ç±»åˆ«ä¿¡æ¯ï¼Œå°†é«˜ç»´çš„æ ·æœ¬çº¿æ€§æŠ•å½±åˆ°ä½ç»´ç©ºé—´ï¼Œä½¿åœ¨ä½ç»´ç©ºé—´ä¸­æ•°æ®çš„ç±»åˆ«åŒºåˆ†åº¦æœ€å¤§

åŒºåˆ†åº¦ï¼Ÿ

+ ä¸åŒç±»ä¹‹é—´çš„**ç¦»æ•£åº¦**
+ åŒç±»æ•°æ®çš„**å†…èšæ€§**

#### Lasso é™ç»´
ä¸€ç§å›å½’åˆ†ææ–¹æ³•ï¼Œé€šè¿‡ L1 æ­£åˆ™åŒ–å®ç°é€‰æ‹©å’Œé™ç»´

#### ISOMAP
æµå½¢ï¼ˆmanifoldï¼‰æ˜¯ä¸€ç±»å‡ ä½•å¯¹è±¡çš„æ€»ç§°

![](/nlark/yuque/0/2024/png/26070246/1726815674397-8bbc7a32-734c-42c2-9231-83c28fe4636a.png)

+ ç”¨**æµ‹åœ°è·ç¦»**ï¼ˆgeodesic distanceï¼‰ä»£æ›¿æ¬§æ°è·ç¦»

##### ç®—æ³•æ­¥éª¤
1. æ„é€ è¿‘é‚»å›¾
    - å¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæ¯ä¸ªæ ·æœ¬ï¼‰ï¼Œæ„é€ è¾¹ï¼ˆk è¿‘é‚»ï¼Œå¯¹æ¯ä¸ªè¿‘é‚»ç‚¹ï¼Œæ„é€ ä¸€æ¡è¾¹â€¦â€¦æœ€çŸ­è·¯å¾„é•¿åº¦ï¼‰
2. è®¡ç®—æœ€çŸ­è·¯å¾„
3. æ‰¾å‡ºæ ·æœ¬çš„ä½ç»´è¡¨ç¤º

##### ä¼˜ç‚¹
+ ä¿ç•™äº†å…¨å±€ç»“æ„
+ åªæœ‰ä¸€ä¸ªå‚æ•° k éœ€è¦ç¡®å®š

##### ç¼ºç‚¹
+ å¯¹å™ªéŸ³æ•æ„Ÿ
+ Floyd æœ€çŸ­è·¯å¾„ç®—æ³•çš„è®¡ç®—ä»£ä»·é«˜

### ç‰¹å¾æå–
æ–‡æœ¬æ•°æ®ç»“æ„åŒ–

+ è¯è¢‹æ³• n-gram æ¨¡å‹
+ è¯åµŒå…¥æ³•
    - word2vec ç®€å•çš„ç¥ç»ç½‘ç»œæ¨¡å‹
        * è¿ç»­è¯è¢‹æ¨¡å‹ CBOWï¼šæ ¹æ®ä¸Šä¸‹æ–‡è¯è¯­é¢„æµ‹ç›®æ ‡è¯å‡ºç°çš„æ¦‚ç‡
        * è·³å­—æ¨¡å‹ skip-gramï¼šæ ¹æ®ç›®æ ‡æ­¤é¢„æµ‹å…¶ä¸Šä¸‹æ–‡
            + é€šè¿‡é¢„æµ‹å‘¨å›´è¯æ¥è®­ç»ƒä¸­å¿ƒè¯çš„å‘é‡è¡¨ç¤ºï¼Œè¡¨ç¤ºèƒ½åŠ›å¾€å¾€æ›´å¥½

word2vec ç¼ºç‚¹

+ åœ¨ç‹¬ç«‹çš„å±€éƒ¨ä¸Šä¸‹æ–‡çª—å£ä¸Šè®­ç»ƒï¼Œéš¾ä»¥åˆ©ç”¨å•è¯çš„å…¨å±€ç»Ÿè®¡ä¿¡æ¯
+ å¯¹è¯æ˜¯ç¡®å®šæ€§çš„ï¼Œå³åœ¨ä¸åŒè¯­å¢ƒä¸­åŒä¸€è¯çš„å‘é‡æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ„å‘³ç€ word2vec ä¸èƒ½è§£å†³å¤šä¹‰è¯é—®é¢˜

### ç‰¹å¾é€‰æ‹©
+ è¿‡æ»¤å¼ filter â€”â€” åŸºäºç»Ÿè®¡æµ‹è¯•/å…¶å®ƒå•å˜é‡è¯„ä¼°æŒ‡æ ‡
+ åŒ…è£¹å¼ wrapper â€”â€” äºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ç»“åˆï¼Œä½œä¸ºè¯„ä»·ç‰¹å¾å­é›†ä¼˜åŠ£çš„æ ‡æ³¨ï¼ˆéªŒè¯é›†ï¼Ÿï¼‰
+ åµŒå…¥å¼ embedded â€”â€” åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œå…¥å†³ç­–æ ‘ã€éšæœºæ£®æ—ç­‰

---

åŸºäºæ ‘æ¨¡å‹çš„ç‰¹å¾é‡è¦æ€§

åŸºäºçº¿æ€§æ¨¡å‹çš„ç‰¹å¾é‡è¦æ€§

åŸºäºäº’ä¿¡æ¯çš„ç‰¹å¾é‡è¦æ€§

åŸºäº SHAP å€¼çš„ç‰¹å¾é‡è¦æ€§

åŸºäºéšæœºæ’åˆ—çš„ç‰¹å¾é‡è¦æ€§

# [æ˜¨å¤©åœ¨åšçˆ¬è™«](/blog/yorusnf5b50afr6b) (September 19, 2024)

åŸºäº playwright çš„çˆ¬è™«ï¼Œè®© LLM æ¥åšæ ‡æ³¨

![](/nlark/yuque/0/2024/png/26070246/1726736636718-e7943c6b-bc7e-4d1c-959c-489d21ab12a2.png)

ç»“æœåŒ…å«äº† LLM ç”Ÿæˆçš„é€‰æ‹©å™¨ï¼ˆ[ç»è¿‡ä¸€ä¸ª reflection æ­¥éª¤](https://github.com/CNSeniorious000/my-auto-annotation/blob/main/app/core/prompt.py)ç¡®ä¿äº†ä¸€å®šèƒ½è§£æï¼‰ã€é€‰æ‹©åˆ°çš„å…ƒç´ ã€è¿™äº›å…ƒç´ çš„ computedStyle äº¤é›†

æ ¸å¿ƒä»£ç ï¼š

```python
@main_loop.callback
class _(Callback):  # noqa: N801
    max_retries = 4

    async def end_process(self, context: ChainContext):
        dom: Selector = context["dom"]

        res: dict[str, str | None] = loads(context.result)
        problems = context["problems"] = []

        for key, selector in res.items():
            if selector:
                print_label(f"{key} - {selector}")
                try:
                    if results := dom.css(selector):
                        show(results)
                    elif self.max_retries:
                        problems.append((key, None))
                    else:
                        res[key] = None

                except SelectorSyntaxError as e:
                    print_exception_only(e)
                    problems.append((key, format_exception_only(e)))

        if not problems or self.max_retries <= 0:
            raise Jump(out_of=main_loop)

        self.max_retries -= 1
```

# [ä¹Ÿæƒ³åšè¿™æ ·çš„å›¾è¡¨](/blog/ht8gsdl2fuv61a1m) (September 18, 2024)

åœ¨ py3.online/pypi ä¸Š

![](/nlark/yuque/0/2024/jpeg/26070246/1726677230674-4ca12f83-fb94-4d00-b7e0-fe8b39304a5f.jpeg)

# [å– dict çš„äº¤é›†](/blog/nnriaprqaxuewpww) (September 18, 2024)

å¤§æ¦‚è¿™æ ·çš„æ•ˆæœï¼š

![](/nlark/yuque/0/2024/png/26070246/1726661125993-41c1e3f5-a077-462d-9e3b-0f459879a175.png)

å®ç°ï¼š

```python
from collections import Counter

def merge_computed_styles(computed_styles: list[dict[str, str]]):
    counter = Counter()

    for style in computed_styles:
        counter.update(style.items())

    return dict([pair for pair, count in counter.items() if count == len(computed_styles)])
```

åœ¨çº¿å°è¯•ï¼š

[https://bnu.py3.online/telegraph/computed-styles-09-18](https://bnu.py3.online/telegraph/computed-styles-09-18)

<iframe src="https://bnu.py3.online/telegraph/computed-styles-09-18"></iframe>

# [Ruff Settings in VS Code](/blog/dcoyztrfle30q4xz) (September 18, 2024)

ä¸ºäº† fix on save

```json
{
    "[toml]": {
        "editor.formatOnSave": false
    },
    "ruff.lint.select": [
        "I"
    ],
    "[python]": {
        "editor.defaultFormatter": "charliermarsh.ruff",
        "editor.codeActionsOnSave": {
            "source.fixAll.ruff": "always"
        }
    }
}
```

å¯ä»¥ç”¨ä½œ py é¡¹ç›®çš„ setup template

# [2024 å¹´ä¸­ç§‹ ğŸ¥®](/blog/rpihdtc5ue687mk7) (September 17, 2024)

ç¦å·ä¹‹æ—…å°¾å£°ï¼Œå¬è¯´çˆ¸å¦ˆæ¥ç æµ·æ‰¾æˆ‘è¿‡ä¸­ç§‹ã€‚äºæ˜¯æ—¶éš”å››å¹´åˆå»äº†åœ†æ˜æ–°å›­ã€‚

![](/nlark/yuque/0/2024/jpeg/26070246/1726591600441-6b499ff7-8513-4914-b844-fb30e7262e19.jpeg)

å›¾ï¼šä¸çŸ¥é“ä¸ºå•¥æ ‘é¡»ä¸‹é¢æœ‰äº›å°æªæªã€‚æ€€ç–‘æ˜¯ä¸æ˜¯å…ˆå‰çš„é¡»æ ¹æŠ“ä½äº†åœŸï¼Œç»“æœæ°´ä½ä¸‹é™äº†ï¼Ÿ

---

æ™šä¸Šå»äº†æ¾³é—¨ç¯å²›æ¸¸ å…¶å®ä¹Ÿè›®éª—é’±çš„ã€‚ä½†æ˜¯å¤©æ°”ä¸é”™

![](/nlark/yuque/0/2024/jpeg/26070246/1726591396255-d85d5c62-ba80-42cf-a850-c3fffa2bfc99.jpeg)

æ²‰è¿·é•¿æ›å…‰

> è¯´èµ·æ¥æˆ‘è§‰å¾—è¿™ç§ä¹Ÿåº”è¯¥ç®—æ˜¯å‰æ™¯ã€‚è®©å‰æ™¯æ¨¡ç³Šä¸ä»…å¯ä»¥é æ™¯æ·±çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é åŠ¨æ€çš„æ–¹å¼ã€‚ä¸¤è€…åœ¨å†¥å†¥ä¹‹ä¸­æ˜¯æœ‰ç‚¹è”ç³»çš„ï¼ˆä¸€ç‚¹éšæƒ³ï¼‰
>

![](/nlark/yuque/0/2024/jpeg/26070246/1726591170767-a6c2e321-bf7e-4185-b32a-7e67fd0ae799.jpeg)

è¿™ä¹ˆçœ‹æœ‰ç‚¹åƒç«ç®­å‘å°„å¡”ğŸ˜ƒ

ä½†æ˜¯é¢œè‰²å¥½è„ğŸ˜­

![](/nlark/yuque/0/2024/jpeg/26070246/1726591752177-0e7b3c13-854f-4318-8769-eaf44b3e9a4d.jpeg)

å„ç§åœ°æ ‡å§ã€‚ä¹Ÿæ²¡å•¥æ„æ€ã€‚å€’æ˜¯åœ¨æƒ³ä»€ä¹ˆæ—¶å€™ä¸Šé¢èƒ½æŒ‚æˆ‘çš„å¹¿å‘Š

![](/nlark/yuque/0/2024/jpeg/26070246/1726591816263-4e29cb87-6147-4bc5-9fd2-ef1a9b6cdf51.jpeg)

åå¤æ‹

![](/nlark/yuque/0/2024/jpeg/26070246/1726591814819-5a2e85e0-3114-46ae-808e-c7c0d336ab44.jpeg)

æ¯•ç«Ÿèˆ¹å¼€å¾—æ…¢ï¼Œä¹Ÿæ²¡äººèŠå¤©

![](/nlark/yuque/0/2024/jpeg/26070246/1726592002822-b0d8679c-92a8-40b7-8508-97370a1da269.jpeg)

è¿™ä¸ªå±…ç„¶è‡ªåŠ¨å˜äº†

ä½†æ˜¯å³ä¸Šè§’å¯ä»¥çœ‹åˆ°åº”è¯¥æ˜¯è¿äº†éå†…åœ°çš„ç½‘ç»œäº†ï¼Œäºæ˜¯æ‰£äº†æˆ‘25å—é’±ã€‚æ®è¯´æ˜¯1å…ƒ1MBï¼Œ25å…ƒå°é¡¶é€1GBã€‚ä»€ä¹ˆç‹—å± ç¬‘æ­»ã€‚æ˜å¤©å°±å»æŠ•è¯‰ã€‚æˆ‘ç°åœ¨å°±æ˜¯é—¹äº‹å…ˆé”‹~

---



è¯­é›€çš„ä¸Šä¼ å›¾ç‰‡å¥½åƒä¸ä¼šè½¬æ ¼å¼ï¼Œå¯¼è‡´æˆ‘ HEIF éƒ½æ²¡æ³•æ˜¾ç¤ºã€‚å”‰ã€‚æ—©æ™šå¾—åšä¸ªè‡ªå·±çš„ CMS



---

# [ç¬¬ä¸€æ¬¡æ”¶åˆ°åˆ«äººçš„ PR ğŸ‘»](/blog/ug7mhlnzrymt1zqx) (September 17, 2024)

æ—©ä¸Šé€èµ°çˆ¸å¦ˆä¹‹åæ‰å‘ç°ä»Šå¤©æ²¡çœ‹ GitHub é€šçŸ¥ï¼Œä¸€æ‰“å¼€

![](/nlark/yuque/0/2024/png/26070246/1726580566616-63ea49f9-d7cc-4cfb-9734-04309f0db6fe.png)

å¤§éƒ¨åˆ†éƒ½æ˜¯åƒåœ¾ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°å±…ç„¶æœ‰äººç»™æˆ‘çš„ `partial-json` æäº†ä¸€ä¸ª PR

[Add `OUTERMOST_OBJ` and `OUTERMOST_ARR` allowances by alanpog Â· Pull Request #9 Â· promplate/partial-json-parser-js](https://github.com/promplate/partial-json-parser-js/pull/9)

![](https://opengraph.githubassets.com/3f91c7d1e73cf093862a8999b5f45c774e226833cbae59dcbf1efa0db41f68dd/promplate/partial-json-parser-js/pull/9)

Sourcery çš„æ€»ç»“è¿˜æŒºå¥½çš„ï¼Œä¸€çœ‹å°±æ‡‚

![](/nlark/yuque/0/2024/png/26070246/1726580634530-5827dbbb-3e17-412e-b335-d2a1c96f9fd1.png)

è¯´èµ·æ¥ï¼Œå¾ˆæˆå‰§æ€§åœ°ï¼Œç”±äºæˆ‘è¿™ä¸ªé¡¹ç›®æ˜¯åˆšå¼€å§‹ç”¨ JavaScript çš„æ—¶å€™å†™çš„ï¼Œå½“æ—¶è¿˜ä¸å¤ªæ‡‚ CIï¼Œäºæ˜¯æ²¡æœ‰é… formatter çš„ configï¼Œè¿™ä¸ªäººç›´æ¥ä¸å°å¿ƒæŠŠæ‰€æœ‰æ–‡ä»¶éƒ½é‡æ–°æ ¼å¼åŒ–äº†ï¼Œé€ æˆ 600 è¡Œçš„ diff ğŸ˜‚

![](/nlark/yuque/0/2024/png/26070246/1726580909071-a3556c6c-44ae-4601-8493-f735704456ef.png)

è¯´å›åˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œè™½ç„¶æˆ‘è‡ªå·±å…ˆå‰ä¹Ÿæƒ³æè¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œä½†æ˜¯ç”±äºè§‰å¾—æƒ³ä¸åˆ°å®Œç¾çš„è®¾è®¡ï¼Œæ‰€ä»¥å°±æ²¡å¹²äº†ã€‚

> Your proposal is great and this implementation works well. But due to my perfectionist tendencies, I often find myself wondering if there's an even better way to solve **these kinds of problems**.
>

ä½†æ˜¯ç›´æ¥æ‹’ç»åˆ«äººä¹Ÿä¸å¤ªå»ºè®¾æ€§ã€‚äºæ˜¯æˆ‘å°±æƒ³äº†å¾ˆä¹…ï¼ˆä¸€ä¸ªä¸­åˆä¸‹åˆéƒ½è€—åœ¨è¿™ä¸Šé¢äº†ï¼‰

æƒ³äº†ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š

### Approach One â€” Input Predicate Function
The `parse` will take an `options` object to extend configuration besides simple `allow`. We may support inputing a `validate` predicate function to choose whether to allow an object / array. The signature of `options` may look like this:

```typescript
interface options {
  allow: number;
  validate(parsed: any, text: string, parents: Parent[]): boolean
}

type Parent = {
  type: "OBJ";
  key: string;
} | {
  type: "ARR";
  index: number;
}
```

For example, if user do this:

```typescript
parse(`[0, {"a": [{`, { allow: ALL, (parsed, text, parents) => { ... } })
```

The validate function will be called at most 4 times with

```javascript
validate({}, '{', [{ type: "ARR", index: 0}, { type: "OBJ", key: "a" }, { type: "ARR", index: 1}])
```

```javascript
validate([{}], '[{', [{ type: "OBJ", key: "a" }, { type: "ARR", index: 1}])
```

```javascript
validate({"a": {}}, '{"a": [{', [{ type: "ARR", index: 1}])
```

```javascript
validate([0, {"a": {}}], '[0, {"a": [{', [])
```

### Approach Two â€” Return PartialInfo
Inject some information into the return value. Like this:

```typescript
export const partial = Symbol('__partial__');
```

And the partial information may be like this:

```typescript
interface PartialInfo {
  text: string;
}
```

Then users can filter the result themselves using this information.

For example, if using this way:

```typescript
> res = parse(`[0, {"a": [{`, { allow: ALL, inject: true }) // [0, {"a": [{}]}]
> res[0][partial] // undefined
> res[1][partial] // { text: '{"a": [{' }
> res[1].a[partial] // { text: '[{' }
> res[1].a[0][partial] // { text: '{' }
```

They can drop at any depth level as they wish.

---

ä»Šå¤©é¡ºä¾¿é›†æˆäº† StackBlitz çš„ pkg.pr.new çš„**æŒç»­å‘å¸ƒ**

![](/nlark/yuque/0/2024/png/26070246/1726581062704-338f07c2-3c64-4c83-b59c-040b176e97aa.png)

ç°åœ¨æ¯æ¬¡ commit éƒ½ä¼šå¯ä»¥è¢«å®‰è£…äº†ğŸ¥³

# [è®°å‡ ä¸ªæ–°è®¤è¯†çš„ tailwindcss è¯­æ³•](/blog/gwrggsqvpydrgh1n) (September 15, 2024)

å¶ç„¶å‘ç°å‡ ä¸ªä»æ²¡ç”¨è¿‡ä½†æœ‰ç”¨çš„ tailwind è¯­æ³•ï¼Œè®°å½•ä¸€ä¸‹ï¼š

1. ä¸ç”¨`[&>*]:...`äº†ï¼Œåº”è¯¥ç›´æ¥`*:...`

![](https://s2.loli.net/2024/09/16/lGFn3LiXMdaNK5Q.jpg)

2. ä¸ç”¨`w-6 h-6`è€Œæ˜¯åº”è¯¥ç›´æ¥`size-6`

![](https://s2.loli.net/2024/09/16/DYsPJVikg7qjTLn.jpg)

3. å¯ä»¥åœ¨`:root`ä¸ŠåŠ ä¸€ä¸ª`text-pretty`

![](https://s2.loli.net/2024/09/16/RBvsGKgbMIdE1qW.jpg)

# [æµ‹è¯• iframe](/blog/fao7eg6xlgh76sk5) (September 14, 2024)

<iframe src="//free-chat.asia"></iframe>

---

<iframe src="//bnu.muspimerol.site"></iframe>

# [æ›´èˆ’é€‚çš„ PyPI æµè§ˆå™¨](/blog/gr3vsb02xhku43x8) (September 2, 2024)

![](https://opengraph.githubassets.com/4b602ec50c9045c4254d8d3f04a667749e04dcca52704c7d3d8babddbc2d4ca6/promplate/pyth-on-line/pull/61)

åˆèŠ±äº†å¥½é•¿æ—¶é—´å¾®è°ƒ UI/UXï¼Œæ„Ÿè§‰å¥½ç„¦è™‘ï¼Œæ˜æ˜å·²ç»æ—¶é—´å¾ˆç´§è¿«äº†ï¼Œä½†æ˜¯å°±æ˜¯ä¸åšåˆ°å®Œç¾ä¸å¿å¿ƒ merge

[A PyPI Explorer Â· Pull Request #61 Â· promplate/pyth-on-line](https://github.com/promplate/pyth-on-line/pull/61) `+376 -0`åˆä¸€æ¬¡çªç ´è®°å½•äº†ğŸ˜‚

---

ä¸‹ä¸€æ­¥ä¼°è®¡å¾—ç­‰åˆ°å¾ˆåé¢å†æ¥ç€åšäº† [[pypi] next steps Â· Issue #64 Â· promplate/pyth-on-line](https://github.com/promplate/pyth-on-line/issues/64)

![](https://opengraph.githubassets.com/ade55b82188401c1a45bda2d253d246a21bd1dc025f5a64523ebf1ebb4e49586/promplate/pyth-on-line/issues/64)

# [æœ€è¿‘ä¸»è¦åœ¨æ”¹ pyth-on-line](/blog/io4w2qz8s9ivyk21) (July 1, 2024)

[<console> is hard-coded, causing traceback disappear when filename specified Â· Issue #4901 Â· pyodide/pyodide](https://github.com/pyodide/pyodide/issues/4901#issuecomment-2197677348)



æœ€è¿‘å¾ˆå–œæ¬¢ stackblitzï¼Œæ‰€ä»¥å¥½å‡ ä¸ª Issue éƒ½æä¾›äº† dedicated çš„å¤ç°



æœ€è¿‘çš„æ–°å‘ç°ï¼š

+ åŸæ¥ unload ä¸€ä¸ª module åªè¦æŠŠå®ƒä»`sys.modules`é‡Œåˆ æ‰å°±è¡Œäº†ï¼Œæˆ‘è¿˜ä¸€ç›´æƒ³éº»çƒ¦äº†
+ å‘ç°`linecache`å¯ä»¥é€šè¿‡`exec`è½»æ¾ patchï¼Œå®ç°ä»¥ä¸‹çš„æ•ˆæœ

![](https://github.com/pyodide/pyodide/assets/74518716/47e56dc1-15a3-4e0e-a0d1-60b710da3028)

[ğŸ”— py3.online](https://py3.online/console#ZGVmIGYoKToKICAgIHJldHVybiAxIC8gMAoKYXN5bmMgZGVmIGcoKToKICAgIHJldHVybiBmKCkKCmF3YWl0IGcoKQoK)

# [ç¬¬ä¸€æ¬¡æ polyfillï¼Œæ„Ÿå¹ JavaScript çš„ GC çœŸéº»çƒ¦](/blog/in9sfz6ztdrge1g9) (June 9, 2024)

GitHub Gist: [https://gist.github.com/CNSeniorious000/9fc1a72e45358dd7c9e2f16e5d26df5c](https://gist.github.com/CNSeniorious000/9fc1a72e45358dd7c9e2f16e5d26df5c)

---

èµ·å› æ˜¯è¦ç»™`pyodide.http`æ”¯æŒåœ¨ cancelled çš„æ—¶å€™è‡ªåŠ¨ abortï¼Œå°±éœ€è¦ `AbortSignal.any`ï¼Œç»“æœ maintainers ä¹‹ä¸€å‘ç°è¿™ä¸ª API å¾ˆæ–°ï¼Œç”šè‡³ FireFox 2024å¹´æ‰åˆšå®ç°ã€‚æ‰€ä»¥å«æˆ‘å¾— polyfill

ç ”ç©¶äº†åŠå¤©å‘ç°è¿™è¿˜çœŸä¸å®¹æ˜“ï¼Œè€Œä¸”ä¼¼ä¹æ²¡æœ‰ç°æˆçš„å¯ä¾› copyï¼Œåªå¥½è‡ªå·±å®ç°

ä¸ºæ­¤æ¥è§¦äº† JavaScript çš„`WeakRef`å’Œ`FinalizationRegistry`ï¼Œè¿˜é”»ç‚¼äº†ä¸€ä¸‹å†™ JsDoc çš„æŠ€èƒ½

---

æƒ³æ³•ï¼š

+ JavaScript çš„`FinalizationRegistry`ç›¸æ¯” python çš„`__del__`è¿˜æ˜¯æœ‰ä¸æ–¹ä¾¿çš„åœ°æ–¹çš„ï¼Œå› ä¸ºä¸€ä¸ª registery å¿…é¡»è‡ªå·±ä¸è¢« gc æ‰èƒ½æœ‰ç”¨
+ JavaScript é‡Œä¸å¥½æ‰‹åŠ¨è§¦å‘ gcï¼Œæå¾—è°ƒè¯•æ¯”è¾ƒç„å­¦
+ JavaScript é‡Œä¼¼ä¹å³ä½¿ gc äº†å†…å­˜è¿˜æ˜¯ä¸ä¼šç«‹å³é‡Šæ”¾ï¼Œpython é‡Œå€’ä¼¼ä¹èƒ½åœ¨ä»»åŠ¡ç®¡ç†å™¨çœ‹åˆ°å†…å­˜é™ä¸‹å»

ä¸‹é¢é™„ä¸Š gist çš„å†…å®¹ï¼š

```javascript
export function polyfillAbortSignalAny() {
  /** @param {AbortSignal[]} signals */
  return (signals) => {
    // if (AbortSignal.any) {
    //   return AbortSignal.any(signals);
    // }
    const controller = new AbortController();
    const controllerRef = new WeakRef(controller);
    /** @type {[WeakRef<AbortSignal>, (() => void)][]} */
    const eventListenerPairs = [];
    let followingCount = signals.length;

    /** @type {FinalizationRegistry<(callback: () => any) => void>} */
    const registry = (globalThis.__abortSignalCleanups =
      globalThis.__abortSignalCleanups ??
      new FinalizationRegistry((callback) => void callback()));

    signals.forEach((signal) => {
      const signalRef = new WeakRef(signal);
      function abort() {
        controllerRef.deref()?.abort(signalRef.deref()?.reason);
      }
      signal.addEventListener("abort", abort);
      eventListenerPairs.push([signalRef, abort]);
      registry.register(signal, () => !--followingCount && clear(), signal);
    });
    function clear() {
      eventListenerPairs.forEach(([signalRef, abort]) => {
        const signal = signalRef.deref();
        if (signal) {
          signal.removeEventListener("abort", abort);
          registry.unregister(signal);
        }
        const controller = controllerRef.deref();
        if (controller) {
          registry.unregister(controller.signal);
          delete controller.signal.__controller;
        }
        console.log("clear", ++count);
      });
    }

    const { signal } = controller;

    registry.register(signal, clear, signal);
    signal.addEventListener("abort", clear);

    registry.register(controller, () => console.log("controller", count));

    signal.__controller = controller;

    return signal;
  };
}

export let count = 0; // for test only

// node --expose-gc

({ polyfillAbortSignalAny } = await import("./polyfill.js"));

any = polyfillAbortSignalAny();

a = Array.from({ length: 2 }).map(() => { const c = new AbortController(); return [c, any([c.signal])]; })

[x, y] = a[0]

x.abort()

// a = a.map(([x, y]) => x) // to remove the references for followers
// a = a.map(([x, y]) => y) // to remove the references for origins

gc()

// look at the output
```

å¥½äº†ç°åœ¨æ›´å¤šç–‘ç‚¹äº†ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ vitest æˆ–è€…ä»¥è„šæœ¬å½¢å¼è¿è¡Œçš„è¯ï¼Œå°±æ˜¯ä¸ä¼šè§¦å‘ gc

æ‰€ä»¥æ€»æ˜¯å¾—ç”¨å‘½ä»¤è¡Œæ‰“

ä¸€å¼€å§‹æ˜¯ç”¨ vitest å‘ç°ä¸è¡Œï¼Œåˆç”¨ watchfiles å‘ç°ä¹Ÿä¸è¡Œ

ä¸è¿‡è¿™ä¹Ÿç®—æ˜¯ç§¯ç´¯äº†å°å‹ JavaScript è„šæœ¬çš„è°ƒè¯•ç»éªŒï¼šwatchfiles æ¯” vitest ç”šè‡³è¿˜æ–¹ä¾¿

ä½†æ˜¯æˆ‘ tsconfig è¿˜æ˜¯é…ç½®ä¸å¯¹ å¥½çƒ¦ è€Œä¸”è¿™ç©æ„ç®—æ˜¯æäº†ä»Šå¤©ä¸€å¤©

# [å±…ç„¶ä¸€å¤©å†™äº† 18 å°æ—¶ä»£ç ](/blog/gfb48ym2k82dauls) (May 23, 2024)

![](https://s2.loli.net/2024/05/23/6pYaLACMcr2DmlF.png)

# [ä¸ºä»€ä¹ˆä¸ç”¨ Astro](/blog/oulc78xmicks80e0) (May 13, 2024)

astro æˆ‘è§‰å¾—å¥½çš„ç‰¹æ€§æ˜¯å®ƒçš„ islandï¼Œå¯ä»¥èåˆå¤šä¸ªç”Ÿæ€

**ä½†æ˜¯å¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘ä¸éœ€è¦é‚£ä¹ˆå¤šç”Ÿæ€ã€‚ä½†æˆ‘éœ€è¦å·®é‡æ›´æ–°å’Œé“¾æ¥çš„é¢„åŠ è½½ï¼Œå› æ­¤æˆ‘è‡ªå·±çš„é¡¹ç›®ä¸ç”¨ Astro**



---



å¥½çš„ï¼Œç°åœ¨å‘ç° [prefetch å…¶å®ä¹Ÿæ˜¯æœ‰çš„](https://docs.astro.build/en/guides/prefetch/)ï¼Œä¹‹å‰æ˜¯æˆ‘å¯¡è§é²œé—»äº†ã€‚è¿™æ ·çš„è¯æ²¡æœ‰å·®é‡æ›´æ–°å…¶å®ä¹Ÿèƒ½æ¥å—ã€‚

ç°åœ¨ä¹Ÿæœ‰ type-safe çš„ action åŠŸèƒ½äº†ï¼Œæ„Ÿè§‰ç¡®å®å°è¯•åˆ‡æ¢åˆ° astro äº†



ä¸è¿‡å…¶å®è¿˜æ˜¯æœ‰ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘çš„æ•´ä¸ªåº”ç”¨å‡ ä¹æ¯ä¸ªç»„ä»¶éƒ½æ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œé‚£ island å°±å¤±å»å®ƒçš„ä¼˜åŠ¿äº†

è€Œè¿™ç§å“åº”å¼ è‚¯å®šæ˜¯æˆ‘æ‰€æœŸæœ›çš„ã€‚å†è€ƒè™‘ä¸‹åˆ‡æ¢åˆ° astro èƒ½ç»™æˆ‘å¸¦æ¥çš„å¥½å¤„ï¼š

+ èƒ½æ›´æ–¹ä¾¿åœ°å†™ markdown ï¼ˆä½†æ˜¯å¦‚æœ markdown å…ƒç´ éƒ½å¾—å“åº”å¼å°±æœ‰ç‚¹åè€Œä¸æ–¹ä¾¿äº†ï¼‰
+ è·¨é¡µåŠ¨ç”»ç”¨ view-transition æ›´ä¼˜é›…ï¼ˆä½†æˆ‘å¯èƒ½å¸Œæœ›æ›´é«˜çš„è‡ªå®šä¹‰ç¨‹åº¦ï¼‰

æ€»ä¹‹æ„Ÿè§‰ astro æ˜¯ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†ç¡®å®è¿˜æ˜¯ä¸é€‚åˆæˆ‘ğŸ˜‚

# [è¿™ä¸ªå‘¨æœ«åœ¨æŠ  partial-json-parser](/blog/ub4b86y3xh3n1uyv) (May 12, 2024)

å‘¨äº”æƒ³åˆ°ä¸€ç§æ‰å¹³çš„ã€2-pass çš„å®ç°ï¼Œç»“æœä¸€ç›´åœ¨ debug

æ‰å¹³åŒ–çš„ç»“æœå°±æ˜¯ï¼Œè¦åˆ†ç±»è®¨è®ºå¾ˆå¤šå¾ˆå¤šæƒ…å†µï¼Œå¯¹æˆ‘è¿™ç§æ³¨æ„åŠ›ä¸é›†ä¸­çš„äººæå…¶ä¸å‹å¥½ğŸ¥²

æˆ‘è¿™ç§äººå¤§æ¦‚æ˜¯çœ‹ä¸å¾— if-else ä¸‰å±‚ä»¥ä¸Šçš„ç®—æ³•çš„äº†ğŸ˜‚



---



hypothesis çœŸæ˜¯å¥½å•Šï¼Œæˆ‘å‡†å¤‡æŠŠ js ç‰ˆçš„ä¹Ÿç”¨ pythonmonkey çš„ js runtime æ¥åˆ° python é‡Œï¼Œç„¶åä¹Ÿç”¨ hypothesis æ¥æµ‹ä¸€ä¸‹ã€‚

æ¬£èµä¸€ä¸‹ hypothesis ç»™å‡ºçš„æŠ¥é”™ï¼š

```plain
  + Exception Group Traceback (most recent call last):
  |   File "<string>", line 1, in <module>
  |   File "D:\dev\partial-json-parser\tests\test_hypotheses.py", line 42, in main
  |     test_partial_json()
  |   File "D:\dev\partial-json-parser\tests\test_hypotheses.py", line 28, in test_partial_json
  |     @given(json)
  |
  |   File "D:\dev\partial-json-parser\.venv\Lib\site-packages\hypothesis\core.py", line 1638, in wrapped_test
  |     raise the_error_hypothesis_found
  | ExceptionGroup: Hypothesis found 3 distinct failures. (3 sub-exceptions)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\dev\partial-json-parser\tests\test_hypotheses.py", line 34, in test_partial_json
    |     parse_json(json_string[:i])
    |   File "D:\dev\partial-json-parser\src\partial_json_parser\core\api.py", line 15, in parse_json
    |     return parser(ensure_json(json_string, allow_partial, use_fast_fix))
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    |     return _default_decoder.decode(s)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 340, in decode
    |     raise JSONDecodeError("Extra data", s, end)
    | json.decoder.JSONDecodeError: Extra data: line 1 column 3 (char 2)
    | Falsifying example: test_partial_json(
    |     anything=[['']],
    | )
    | Explanation:
    |     These lines were always and only run by failing examples:
    |         C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py:340
    |         D:\dev\partial-json-parser\src\partial_json_parser\core\myelin.py:124
    +---------------- 2 ----------------
    | Traceback (most recent call last):
    |   File "D:\dev\partial-json-parser\tests\test_hypotheses.py", line 34, in test_partial_json
    |     parse_json(json_string[:i])
    |   File "D:\dev\partial-json-parser\src\partial_json_parser\core\api.py", line 15, in parse_json
    |     return parser(ensure_json(json_string, allow_partial, use_fast_fix))
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\dev\partial-json-parser\src\partial_json_parser\core\api.py", line 22, in ensure_json
    |     head, tail = fix_fast(json_string, allow_partial)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\dev\partial-json-parser\src\partial_json_parser\core\myelin.py", line 139, in fix_fast
    |     assert last_colon < last_comma, f"\n\n  {last_colon = } {last_comma = } {json_string = }"
    |            ^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError:

  last_colon = 3 last_comma = -1 json_string = '{"": ""'
    | Falsifying example: test_partial_json(
    |     anything={'': ''},
    | )
    +---------------- 3 ----------------
    | Traceback (most recent call last):
    |   File "D:\dev\partial-json-parser\tests\test_hypotheses.py", line 34, in test_partial_json
    |     parse_json(json_string[:i])
    |   File "D:\dev\partial-json-parser\src\partial_json_parser\core\api.py", line 15, in parse_json
    |     return parser(ensure_json(json_string, allow_partial, use_fast_fix))
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    |     return _default_decoder.decode(s)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    |     obj, end = self.raw_decode(s, idx=_w(s, 0).end())
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    |     raise JSONDecodeError("Expecting value", s, err.value) from None
    | json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
    | Falsifying example: test_partial_json(
    |     anything=[''],
    | )
    | Explanation:
    |     These lines were always and only run by failing examples:
    |         C:\Users\17979\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py:354
    |         D:\dev\partial-json-parser\src\partial_json_parser\core\myelin.py:124
    +------------------------------------
```

# [Agent çš„æœ€ç»ˆå½¢æ€ å¿…ç„¶å¯¼å‘](/blog/bqcods6w0kho33li) (May 9, 2024)

æƒ³æƒ³ï¼Œå¦‚ä½•ä½¿å¾—function_callçš„ç»“æœå¯ä»¥ç›´æ¥å¼•ç”¨ï¼Œä¸ç”¨LLMé‡è¿°ï¼ŸåŒæ—¶åˆèƒ½ä¸å„å®¶åƒå¥‡ç™¾æ€ªçš„LLM APIçš„function_callæ ¼å¼è§£è—•ï¼Ÿ

å›å¿†å›å¿†rag-compilerçš„æ–¹æ³•

ä¸€è¾¹ç”Ÿæˆï¼Œä¸€è¾¹callï¼Œå†æƒ³æƒ³æˆ‘åœ¨promplate-agentå®ç°çš„å•å¾ªç¯agentçš„parallel call



è¿™ç§æ–¹å¼çœŸçš„æ˜¯å…·æœ‰æ‰€æœ‰å¥½å¤„

# [å»ºäº†ä¸€ä¸ª PyPI é•œåƒ](/blog/pypi-mirror) (April 21, 2024)

### ä»…ä»…åœ¨å½“å‰å®‰è£…æ—¶ä½¿ç”¨
```shell
pip install -i https://py3.online/simple
```

### è®¾ä¸º pip
```shell
pip config set global.index-url https://py3.online/simple
```

### è®¾ç½® PDM
```shell
pdm config pypi.url https://py3.online/simple
```

### è®¾ç½® Poetry
```shell
poetry source add --priority=primary mirrors https://py3.online/simple/
```

---

### èµ·æº
èµ·åˆåªæ˜¯ä¸ºäº†è®©æˆ‘çš„ serverless åœ¨çº¿ pythonï¼ˆpy3.onlineï¼‰å›½å†…ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨ä¸Šï¼š

![](https://py3.online/og)

äºæ˜¯å°± proxy äº†ä¸€ä¸‹ PyPI å’Œ pythonhosted ä¸¤ä¸ªåŸŸåï¼š

+ [/src/routes/simple/[[project]]/+server.ts](https://github.com/promplate/pyth-on-line/blob/main/src/routes/simple/[[project]]/+server.ts)
+ [/src/routes/packages/[...path]/+server.ts](https://github.com/promplate/pyth-on-line/blob/main/src/routes/packages/[...path]/+server.ts)

å®æµ‹é€Ÿåº¦é£å¿«ï¼Œä»¥å®‰è£… torch ä¸ºä¾‹ï¼Œé€Ÿåº¦æ˜¯æ¸…åæºçš„ä¸¤å€ï¼š

![](https://s2.loli.net/2024/04/21/mSC7dRQie8jzWTM.png)



---



ä½†æ˜¯ Netlify çš„å“åº”ä½“ä¸Šé™å¥½åƒæœ‰ç‚¹ä½

åˆè¯•ç€åœ¨åˆ«çš„é¡¹ç›®ä¹Ÿéƒ¨ç½²äº†ä¸‹ï¼Œæ¯”å¦‚

i.free-chat.asia/simple

ç¡®å®éƒ½å¯ä»¥äº†

# [Serverless era of Python](/blog/suac126h4dw6dizd) (April 3, 2024)

![](https://blog.cloudflare.com/content/images/2024/04/blogpython.png)

# [çœ‹åˆ°ä¸€ç¯‡å¾ˆå¥½çš„è®² UX çš„æ–‡ç« ](/blog/cdwdzdh6plvs79b8) (April 1, 2024)

è€Œä¸”éå¸¸èµåŒè¿™ç¯‡æ–‡ç« æœ€åè¯´çš„ä¸€æ®µè¯

> Analyzing and making sense of design details beyond just "it feels nice" helps nurture taste, amplify level of execution, and grow appreciation for how hard the pursuit of excellence is.
>

## Invisible Details of Interaction Design [ğŸ”—](https://rauno.me/craft/interaction-design)
![](https://rauno.me/static/craft/og-interaction-design2.png)

# [æ— æ ‡é¢˜æ–‡æ¡£](/blog/fi23gc4d9ahv71mn) (April 1, 2024)

æ„Ÿè§‰æˆ‘ç°åœ¨æˆäº†è°ƒåŒ…ä¾ äº†

# [Reasonify](/blog/reasonify) (March 25, 2024)

ä¸€ä¸ªçº¯ function call æ€è·¯çš„ agent

![](https://s2.loli.net/2024/03/25/XUQuoAnLxtdFHeg.png)



---

> 5æœˆ9æ—¥æ›´æ–°
>

é‡æ–°æ€è€ƒäº†ä¸€ä¸‹æ ‡è¯­

+ Real AI speaks programming languages
+ Introducing Reasonify: The First Python Agent in the world

æ„Ÿè§‰è¿™æ›´åƒæ˜¯ä¸¤ç¯‡åšæ–‡çš„æ ‡é¢˜ğŸ¤”

# [ubuntu é…ç¯å¢ƒ ğŸ™„](/blog/alel05e9ibefc91r) (March 22, 2024)

æ— è„‘æ›´æ–°

```shell
sudo apt update && sudo apt upgrade
```

å®‰è£… clash

```shell
git clone https://github.com/Elegycloud/clash-for-linux-backup.git
```

å®‰è£… python

```shell
curl https://pyenv.run | bash
```

å®‰è£… node

```shell
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
```

# [ä¸ªäººç®€å†](/blog/resume) (November 28, 2023)

# åº„æ¯…è¾‰
**ç”· æ±‰æ— 2002å¹´**

**å¤§ä¸‰å­¦ç”Ÿï¼Œç°å°±è¯»äº åŒ—äº¬å¸ˆèŒƒå¤§å­¦ï¼ˆç æµ·æ ¡åŒºï¼‰**

GitHub: [Muspi Merol @CNSeniorious000](https://github.com/CNSeniorious000) / Email: [me@promplate.dev](me@promplate.dev) / Tel: 17620453640

ç›®å‰åœ¨ç æµ·å­¦æ ¡é‡Œ ä½›ç³»åˆ›ä¸šä¸­

**é¢†åŸŸï¼šLLM ç›¸å…³ / Web å‰åç«¯å¼€å‘ / ç§‘ç­æ•°æ®ç§‘å­¦**

---

> ### éƒ¨åˆ†æŠ€æœ¯æ ˆ

+ æœ‰ç”¨ JavaScript / TypeScript å¼€å‘ application å’Œ library çš„ç»éªŒï¼Œä½†æ˜¯æ²¡æœ‰åšè¿‡å¤§é¡¹ç›® 
    - ç†Ÿæ‚‰ serverless å¹³å°ï¼šVercel / Netlify / Railway
    - ç†Ÿæ‚‰ Svelteï¼ˆä¸€æ¬¾è¯­æ³•ç±» Vue çš„æ–°å…´ Web å…¨æ ˆæ¡†æ¶ï¼‰ã€SolidJSï¼ˆä¸€æ¬¾è¯­æ³•ç±» React çš„æ–°å…´ Web å…¨æ ˆæ¡†æ¶ï¼‰
    - åœ¨å®ä¹ å…¬å¸ç”¨ NextJS 14 + LangchainJS åšè¿‡
    - éå¸¸å–„ç”¨åŸå­åŒ–çš„ css æ¡†æ¶å¿«é€Ÿå¼€å‘ï¼Œè‡ªå·±ä¸€èˆ¬ç”¨ unocssï¼Œå½“ç„¶ tailwindcss ä¹Ÿå¯ä»¥
    - æµ‹è¯•æ–¹é¢ç”¨çš„æ˜¯ vitest
    - ä¸€äº›ä¾‹å­ï¼š[ç´¢å¼•](https://free-chat.asia) / [è½åœ°é¡µ](https://accounts.free-chat.asia/) / [åšå®¢](https://muspimerol.site/) / [çº¯é™æ€](https://bnu.muspimerol.site/) / [ChatBot](https://endless-chat.vercel.app/)
+ éå¸¸ç†Ÿæ‚‰ pythonï¼Œä½†å…ˆä¸è¯¦è¯´äº† 
    - Web å¼€å‘æ–¹é¢ç†Ÿæ‚‰ FastAPIï¼Œä¹Ÿç”¨è¿‡ Django ä½†ä¸å¤ªå–œæ¬¢
    - å†™è¿‡ TGI / è®¯é£æ˜Ÿç« / ç™¾åº¦æ–‡å¿ƒ è½¬ openai æ¥å£çš„ wrapperï¼›å†™è¿‡ openai çš„è´¦å·æ± ä¸­é—´ä»¶
    - äº†è§£ langchain ä»¥åŠå…¶å®ƒä¸€äº›æç¤ºå·¥ç¨‹æ¡†æ¶ä¾‹å¦‚å¾®è½¯çš„ guidance
    - ç”¨çš„å‘é‡æ•°æ®åº“ä¸»è¦æ˜¯ chromadbï¼Œè¿˜ç»™å®ƒå†™è¿‡ä¸€ä¸ªå°è½®å­ aiochroma
    - è›®ç†Ÿæ‚‰ langsmith çš„ï¼Œç›®å‰å·²ç»æŠŠè‡ªå·±çš„æç¤ºå·¥ç¨‹æ¡†æ¶å’Œ openai è´¦å·æ± å¯¹æ¥ langsmith
+ Web æ ‡å‡†æ–¹é¢æœ‰ä¸€å®šå¸¸è¯† 
    - ç†Ÿæ‚‰ SSEï¼ˆä½†æ›´å–œæ¬¢ç”¨ jsonl æ¥æµå¼ä¼ è¾“ï¼‰
    - æ¯”è¾ƒç†Ÿæ‚‰ PWA ä½†å¥½åƒå›½å†…ä¸å¤ªæœ‰ä»€ä¹ˆé¡¹ç›®ç”¨
    - ä¹Ÿåšè¿‡ Vanilla JS / CSS / HTML çš„é¡¹ç›®
+ ç†Ÿæ‚‰ cloudflareï¼›ç†Ÿæ‚‰ Linuxï¼›ä¼šç”¨ Docker éƒ¨ç½²ï¼›ä¼šåœ¨ GitHub / Gitlab ä¸Šé…æµæ°´çº¿ï¼›ç†Ÿæ‚‰æ—¥å¸¸çš„ git æ“ä½œ
+ ç”¨è¿‡å„ç§å¸‚é¢ä¸Šå¸¸ç”¨çš„ LLM çš„APIï¼ŒGPTã€Claudeã€ç™¾åº¦/è®¯é£ï¼Œå„ç§ llama Xwin å•¥çš„



> ### å·¥ä½œç»å†

+ åœ¨æ­å·æ–›ä¸°ç§‘æŠ€åšç®—æ³•å’Œåç«¯å·¥ç¨‹å¸ˆï¼Œæ ¸å¿ƒè´Ÿè´£ç”¨ python å’Œ JavaScript å®ç°æ¨èç®—æ³•ã€åŒ»å­¦é—®è¯Š Chatbotã€è¾…åŠ©è¯Šç–—å¯ä¿¡ AIã€åŸºäº embedding çš„æ¨¡ç³ŠåŒ¹é…ã€åŒ»å­¦é¢†åŸŸä¸‹çš„ç±» Copilotã€å°è§„æ¨¡çš„çˆ¬è™«ç­‰é¡¹ç›®ç­‰
+ åœ¨ä¸Šæµ·å®ˆæ‰£ç§‘æŠ€åšç®—æ³•å·¥ç¨‹å¸ˆï¼Œæ ¸å¿ƒè´Ÿè´£ç”¨ python å®ç°åŸºäº chain çš„åŒ»å­¦çŸ¥è¯†å›¾è°±æå–ã€æ™ºèƒ½é™ªç»ƒåŠ©ç†ã€æ–‡æœ¬æ ¼å¼åŒ–ç­‰å¼€å‘ï¼Œå’Œä¸€äº›åŸå‹é¡¹ç›®çš„ç®€å•å‰ç«¯å¼€å‘
+ åœ¨æ ¡æœŸé—´åœ¨å¤šä¸ªæ ¡åª’ä»»è®¾è®¡éƒ¨éƒ¨é•¿



> ### ä¸ªäººé¡¹ç›®

+ åšäº†ä¸€ä¸ªä¸“æ³¨äºçµæ´»æ€§çš„æç¤ºå·¥ç¨‹æ¡†æ¶ [promplate](https://promplate.dev)ï¼Œè™½ç„¶åœ¨æˆ‘çš„ä¸¤ä¸ªå®ä¹ å…¬å¸éƒ½ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒäº†ä½†å…¶å®å®Œæˆåº¦è¿˜ä¸é«˜ï¼Œéƒ½æ˜¯ç”¨åˆ°å“ªåšåˆ°å“ª
+ æ›´æ³›ç”¨çš„æ˜¯ä¸€ä¸ª [python](https://pypi.org/project/partial-json-parser/) å’Œ [JavaScript](https://www.npmjs.com/package/partial-json) çš„ JSON è§£æåº“ï¼Œç›®æ ‡æ˜¯ç”¨äºè§£æ LLM ç”Ÿæˆçš„ JSONã€‚[çœ‹ DEMO](https://promplate.dev/partial-json-parser) å°±æ‡‚äº†
+ åŸºäºå¼€æºæ¡†æ¶æ”¹å†™ç»´æŠ¤äº†ä¸¤ä¸ª [ChatGPT é•œåƒç«™](https://github.com/CNSeniorious000/free-chat)ï¼Œé¡ºè·¯å­¦äº†ä¸å°‘è¿ç»´ç­‰çŸ¥è¯†ï¼Œç»´æŒå…¬ç›Šè¿è¥æœ€é«˜æ—¶ Google Analytics ç»Ÿè®¡åˆ° 20000 ç”¨æˆ·/æ—¥
+ å†™äº†ä¸€äº›åç«¯çš„ä¸œè¥¿ï¼Œtgi è½¬ openai æ¥å£çš„ wrapperï¼Œä»¥åŠ[è®¯é£æ˜Ÿç«è½¬ openai æ¥å£çš„ wrapper](https://github.com/promplate/openai-compatible-spark)ï¼Œå†™è¿‡ä¸€ä¸ª[è´¦å·æ± ](https://github.com/CNSeniorious000/forward_openai)å®ç°ï¼Œ[æ¥å…¥äº† langsmith](https://github.com/CNSeniorious000/forward_openai/tree/smith) æ¥æä¾›å¯è§‚æµ‹æ€§
+ ç»™å­¦æ ¡çš„æ ¡å²å†™äº†ä¸ª documentQAï¼Œä½†æ˜¯ä¸šä½™æ—¶é—´å°‘ï¼Œè¿˜æ²¡å®Œæˆï¼Œå› æ­¤å°±ä¸æ”¾é“¾æ¥äº†
+ ä¸€ä¸ªåœ¨çº¿æ— éœ€æœåŠ¡ç«¯çš„ [python console](https://py3.online/)ï¼Œç”± wasm é©±åŠ¨ï¼Œå¸¦æœ‰ AI çº é”™ç­‰ç±» Copilot åŠŸèƒ½
+ python æ ¼å¼åŒ–å·¥å…· black çš„å®˜æ–¹ [interactive playground](https://black.py3.online/)



å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–é¡¹ç›®ï¼Œéƒ½èƒ½åœ¨æˆ‘ GitHub ä¸Šæ‰¾åˆ°ï¼Œä½†æ˜¯è·Ÿ LLM å…³è”è¾ƒå¤§çš„å°±è¿™äº›äº†ï¼Œæ‰€ä»¥å°±ä¸èµ˜è¿°äº†



ä¸œè¥¿æœ‰ç‚¹å¤š éƒ¨åˆ†å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶äº† è§è°…ğŸ™

# [Netlify æ‰§è¡Œ python æ„å»ºè„šæœ¬æ¯” Vercel å¿«](/blog/cv3zb7ee4a5uhky1) (October 12, 2023)

æœ€è¿‘æŠŠæœ¬äººåˆå­¦ web æ—¶çš„[çº¯æœåŠ¡ç«¯æ¸²æŸ“çº¯ html å‰ç«¯çš„é¡¹ç›®](https://github.com/CNSeniorious000/bnu-history-120)æˆåŠŸéƒ¨ç½²åˆ°äº† [Netlify](https://bnu120.netlify.app) å’Œ [Vercel](https://bnu120.vercel.app) ä¸Šï¼Œå¯¹æ¯”äº†ä¸€ä¸‹ï¼š

![](https://s2.loli.net/2023/10/12/gUm9IvrjELz2wih.png)

![](https://s2.loli.net/2023/10/12/HQGWM4wo3JszPur.png)

å¥‡æ€ªã€‚ä¸€ç›´å°è±¡ä¸­æ„å»ºå‰ç«¯é¡¹ç›®å¥½åƒ Vercel å¿«ä¸€ç‚¹çš„ğŸ¤”

# [èŠ‚åç»Ÿè®¡](/blog/wzakrq31d4zqsbog) (October 9, 2023)

![](https://s2.loli.net/2023/10/09/OM4oA2RxT3nKbPC.png)

![](https://s2.loli.net/2023/10/09/VGpJPUNth5nkWoq.png)kan

# [å°±msgpackå‹ç¼©åå¤§å°çš„é—®é¢˜çš„è®¨è®º](/blog/uk4tywen79xyuqam) (September 27, 2023)

åœ¨ GitHub ä¸Šçš„ msgpack/msgpack åº“ä¸‹é¢ï¼Œå¾ˆæ—©ä¹‹å‰æˆ‘å‘èµ·äº†è¿™ä¹ˆä¸€ä¸ªè¯é¢˜ï¼Œä»Šå¤©çªç„¶å¾—åˆ°å›å¤äº†

![](https://opengraph.githubassets.com/16107db9f458ec15d30ed3d0e2e06f7d8f831a856fad7c051c6e54efd8a44ed5/msgpack/msgpack/issues/328)

é“¾æ¥åœ¨æ­¤ï¼š[https://github.com/msgpack/msgpack/issues/328](https://github.com/msgpack/msgpack/issues/328)

---

æˆ‘ä¸ªäººå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼š

+ Length-Prefixed serialization languages is less friendly to compressors compared to Delimiter-Separated serialization languages indeed
+ More fine-grained research can be done through taking equivalent structures in both JSON and MessagePack, compressing them both with the same algorithm, and then studying the resulting compressed encoding in detail to understand exactly what tradeoffs the compressor made
+ Web developers should consider JSON fist now and in the future, because compressing is almost at zero cost
+ This is not saying Length-Prefixed DML is of no use. I think its usage is representing larger data like a HEAD with 100KB body following. And the performance on speed and RAM usage is still huge advantages of Length-Prefixed DMLs
+ Finally, I think best practice of transmitting data when pursuing ultimate size efficiency, IDLs like `protobuf` are what you need. IDLs remove the separator of JSON or the HEAD of basic element in MsgPack representing the basic type. If you really want self-explanatory (you want the data can be interpreted without additional type definitions), you can transmit type definition before data ğŸ˜‚

ç¿»è¯‘æˆä¸­æ–‡å³ï¼š

+ å‹ç¼©åï¼Œé•¿åº¦å‰ç¼€æ•°æ®çš„ç©ºé—´æ•ˆç‡æ¯”åˆ†éš”ç¬¦åˆ†éš”æ•°æ®ä½
+ å¯ä»¥é€šè¿‡æ›´ç»†è‡´çš„ç ”ç©¶æ¥è¿›è¡Œå–JSONå’ŒMessagePackä¸­çš„ç­‰æ•ˆç»“æ„ï¼Œç”¨ç›¸åŒçš„ç®—æ³•å‹ç¼©å®ƒä»¬ï¼Œç„¶åè¯¦ç»†ç ”ç©¶ç»“æœå‹ç¼©ç¼–ç ï¼Œä»¥ç†è§£å‹ç¼©å™¨åšå‡ºçš„å…·ä½“æƒè¡¡ã€‚
+ ç½‘é¡µå¼€å‘è€…ç°åœ¨å’Œæœªæ¥éƒ½åº”è¯¥é¦–å…ˆè€ƒè™‘JSONï¼Œå› ä¸ºå‹ç¼©å‡ ä¹æ˜¯é›¶æˆæœ¬
+ è¿™å¹¶ä¸æ˜¯è¯´é•¿åº¦å‰ç¼€æ•°æ®æ²¡æœ‰ç”¨ã€‚æˆ‘è®¤ä¸ºå®ƒçš„ç”¨é€”æ˜¯è¡¨ç¤ºæ›´å¤§çš„æ•°æ®ï¼Œæ¯”å¦‚åé¢è·Ÿç€100KBä½“çš„å¤´ã€‚åœ¨é€Ÿåº¦å’ŒRAMä½¿ç”¨ä¸Šçš„æ€§èƒ½ä»ç„¶æ˜¯é•¿åº¦å‰ç¼€æ•°æ®çš„å·¨å¤§ä¼˜åŠ¿
+ æœ€åï¼Œæˆ‘è®¤ä¸ºåœ¨è¿½æ±‚ç»ˆæå¤§å°æ•ˆç‡æ—¶ä¼ è¾“æ•°æ®çš„æœ€ä½³å®è·µï¼Œä½ éœ€è¦çš„æ˜¯åƒprotobufè¿™æ ·çš„IDLsã€‚IDLså»é™¤äº†JSONçš„åˆ†éš”ç¬¦æˆ–MsgPackä¸­è¡¨ç¤ºåŸºæœ¬ç±»å‹çš„åŸºæœ¬å…ƒç´ çš„å¤´ã€‚å¦‚æœä½ çœŸçš„æƒ³è¦è‡ªè§£é‡Šï¼ˆä½ å¸Œæœ›æ•°æ®å¯ä»¥åœ¨æ²¡æœ‰é¢å¤–ç±»å‹å®šä¹‰çš„æƒ…å†µä¸‹è¢«è§£é‡Šï¼‰ï¼Œä½ å¯ä»¥åœ¨æ•°æ®ä¹‹å‰ä¼ è¾“ç±»å‹å®šä¹‰ğŸ˜‚





æœ¬æ–‡é“¾æ¥ï¼š

[å°±msgpackå‹ç¼©åå¤§å°çš„é—®é¢˜çš„è®¨è®º](https://muspimerol.site/blog/uk4tywen79xyuqam)

# [promplate æ–‡æ¡£è§„åˆ’](/blog/bmvwkdp9iganh9tb) (September 25, 2023)

+ basic concepts
    - promplateæ¸è¿›åœ°æé«˜ä½ çš„æç¤ºå·¥ç¨‹æ•ˆç‡ã€‚ä»æœ€ç®€å•çš„text completeï¼Œ

# [ä¸ºä»€ä¹ˆæˆ‘è¦å¼€å‘promplate](/blog/why-promplate) (September 14, 2023)

æ¯ä¸€ä¸ªå¬è¯´[æˆ‘é€ è¿™ä¹ˆä¸€ä¸ªè½®å­çš„äºº](https://www.xiaohongshu.com/explore/64e2367e000000000800df47)éƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼š

+ [promplate](https://promplate.dev/) åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
+ åœ¨å¤§æ¨¡å‹å’Œæç¤ºæ¡†æ¶ç™¾èŠ±é½æ”¾çš„å½“ä¸‹ï¼Œé‡æ–°é€ ä¸€ä¸ªè½®å­çš„æ„ä¹‰ä½•åœ¨ï¼Ÿ

æˆ‘ä¸€ä¸ªä¸€ä¸ªå›ç­”ã€‚

### promplate è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
> [Progressively enhance your prompting workflow.](https://github.com/promplate)
>

ä¸Šé¢è¿™å¥æ˜¯æˆ‘ä¸ºpromplateæ•´ä¸ªç”Ÿæ€æ’°å†™çš„sloganã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘å¸Œæœ›å®ƒæ˜¯ä¸€ä¸ªèƒ½å¸®åŠ©åˆ°æ— è®ºæ˜¯éå¼€å‘è€…ï¼Œè¿˜æ˜¯åˆå­¦è€…ï¼Œè¿˜æ˜¯æç¤ºå·¥ç¨‹å¸ˆçš„ä»»ä½•ä¸€ä¸ªäººã€‚

+ å¯¹äºæ™®é€šäººï¼ˆéå¼€å‘è€…ï¼‰ï¼Œå¯ä»¥åœ¨æˆ‘çš„åœ¨çº¿ç¼–è¾‘å™¨playgroundä¸Šæµ‹è¯•æç¤ºè¯ã€‚æ¯ä¸ªäººéƒ½å¯ä»¥æ˜¯å‘æŒ¥è‡ªå·±çš„åˆ›æ„
+ å¯¹äºåˆå­¦è€…ï¼Œå¯ä»¥ç”¨æç®€åˆ°ä¸€ä¸ªå•ä¸ªå½¢å‚çš„å‡½æ•°ç›´æ¥è°ƒç”¨æˆ‘çš„å…è´¹APIæ¥å¼€å§‹æç¤ºå·¥ç¨‹ä¹‹æ—…ã€‚æ¢è¨€ä¹‹ï¼Œ0é—¨æ§›
+ å¯¹äºæç¤ºå·¥ç¨‹å¸ˆï¼Œæˆ‘çš„åº“å…·æœ‰éå¸¸å¤§çš„å¯è‡ªå®šä¹‰åº¦ï¼Œå®ƒæœ€åˆåªæ˜¯å®ç°äº†æˆ‘å¿ƒç›®ä¸­çš„æç¤ºå·¥ç¨‹çš„æœ€ä½³å®è·µèŒƒå¼ã€‚åœ¨å…¶ä¸Šçš„å¼€å‘å’Œå…ƒå¼€å‘éƒ½æ— æ¯”ç®€å•

è®¤è¯†æˆ‘çš„äººå¯èƒ½çŸ¥é“ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¯¹ä»£ç æœ‰ç€æç«¯çš„æ´ç™–çš„äººã€‚å› æ­¤æˆ‘åœ¨å¼€å‘è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œæ˜¯æå¤§ç¨‹åº¦ä¸Šåœ°ç”¨æ•ˆç‡æ¢å–å¯¹ä¸Šè¿°ä¼˜åŠ¿çš„ä¿è¯ã€‚æ˜¾ç„¶ï¼Œè¦åšåˆ°ä¸Šé¢æåˆ°çš„é‚£æ ·â€œè€å°‘å’¸å®œâ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ•ˆç‡å’Œçµæ´»æ€§è¦å¾—å…¼ï¼Œæ˜¯éå¸¸ä¸å®¹æ˜“çš„ã€‚æˆ‘é€šè¿‡å‘å¸ƒä¸€ä¸ªä¿è¯çµæ´»æ€§ã€ä¿è¯ä¼˜é›…å®ç°ã€å°½å¯èƒ½æé«˜æ•ˆç‡çš„coreåŒ…ï¼Œå’Œä¸€ä¸ªçº¦å®šå¼çš„æä¾›å„ç§æ•ˆç‡å·¥å…·çš„toolkitåŒ…æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

### é‡æ–°é€ è½®å­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ
é€ è½®å­ï¼Œå½“ç„¶æ˜¯å› ä¸ºç°åœ¨æ²¡æœ‰æˆ‘ç†æƒ³çš„è½®å­ã€‚

ç°åœ¨æœ‰ä»€ä¹ˆè½®å­ï¼Ÿæœ‰å¤§åé¼é¼çš„ langchainï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå®ƒå¤ªå¤§è€Œæ‚äº†ã€‚è¿™åªæ˜¯ä»ä¼˜é›…å±‚é¢çš„æ‰¹è¯„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š

1. å¼€å‘æ•ˆç‡ä½ã€‚æˆ‘è®¤ä¸ºå®ƒæŠ½è±¡ç¨‹åº¦ä¸å¤Ÿï¼Œçµæ´»æ€§ä¸å¤Ÿï¼Œçº¦å®šå¼çš„é¢„è®¾ä¹Ÿä¸å¤Ÿç”¨ï¼Œå…ƒå¼€å‘ä¹Ÿéš¾ä»¥è¿›è¡Œã€‚æ€»ä¹‹ç»è¿‡æˆ‘åœ¨ä¸¤ä¸ªå…¬å¸çš„ç®—æ³•å²—çš„å®è·µï¼Œæˆ‘è§‰å¾—å®ƒåœ¨ä¸å°‘åœºæ™¯ä¸‹å¼€å‘èµ·æ¥ä¸å¦‚ä¸ç”¨æ¡†æ¶ã€‚æˆ‘ä¸æ˜¯è´¬ä½å®ƒï¼Œåªæ˜¯è®¤ä¸ºå®ƒçš„æ„ä¹‰æ›´å¤šçš„åœ¨äºå†å²æ„ä¹‰ã€‚langchain å°±å¥½æ¯”æ—§ React å’Œ Vue 2ï¼Œä»–ä»¬åœ¨å†å²ä¸Šæœ‰å¾ˆé«˜çš„ä»·å€¼ï¼Œä½†æ˜¯ä»–ä»¬ç°åœ¨çœ‹æ¥æ•ˆç‡å¹¶ä¸é«˜ã€‚æˆ‘è¦åšçš„å°±æ˜¯ä¸€ä¸ª Svelteï¼Œä¸“æ³¨äºå¼€å‘æ•ˆç‡ï¼Œæ›´æœ¬è´¨ä¸Šï¼Œæ˜¯æ¢ç´¢æç¤ºå·¥ç¨‹çš„æœ€ä½³å®è·µã€‚
2. è‡ƒè‚¿ï¼Œä¸å…¶å®ƒæ¡†æ¶å†²çªã€‚æ¯”å¦‚ï¼Œæˆ‘è£…ä¸€ä¸ª langchain å¯èƒ½å¹¶ä¸ä¼šç”¨ä¸Šä»»ä½•æœ¬åœ°çš„æ¨¡å‹ï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šå®‰è£…ä¸€ä¸ª 1GB çš„ torch åŒ…ï¼›å†æ¯”å¦‚å®ƒä¾èµ–äºæ—§ç‰ˆæœ¬çš„ pydanticï¼Œè¿™ä½¿å¾—æˆ‘æ²¡æ³•æŠŠå®ƒé›†æˆåˆ°æˆ‘éœ€è¦ pydantic 2.x çš„ WEB æœåŠ¡ä¸­ã€‚
3. æºç å……æ–¥ç€å‘åå…¼å®¹ï¼Œéš¾ä»¥é˜…è¯»ã€‚è€Œç†è§£æºç å‡ ä¹æ˜¯é€šè¿‡ç»§æ‰¿ langchain çš„ç±»æ¥äºŒæ¬¡å¼€å‘çš„å¿…ç»ä¹‹è·¯ã€‚ä¸‘é™‹çš„æºç å°±æ„å‘³ç€ä½çµæ´»æ€§ï¼Œæˆ‘ä¸€ç›´è¿™ä¹ˆè®¤ä¸ºã€‚äº‹å®ä¸Šï¼Œæˆ‘ä¸€ç›´è®¤ä¸ºï¼Œ0.x è¿™æ ·çš„ç‰ˆæœ¬å·å°±æ˜¯ä¸ºäº†æ— è´Ÿæ‹…åœ°æ¢ç´¢æ— é™å¯èƒ½ï¼Œè€Œä¸æ˜¯æ‹–ç€æ²‰é‡çš„èº«èº¯çˆ¬è¡Œã€‚langchain é¡¶ç€ 0.0.x è¿™æ ·çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä¸è®¤ä¸ºå®ƒåº”è¯¥åšåƒç°åœ¨è¿™æ ·çš„å‘åå…¼å®¹ã€‚å¦‚æœè¿™æ˜¯å¼€å‘è€…çš„ç‚«æŠ€ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯å®³äº†è¿™ä¸ªé¡¹ç›®ã€‚

æ‰€ä»¥ langchain ä¸æ˜¯è¶³å¤Ÿå¥½çš„æ¡†æ¶ã€‚è¿˜æœ‰ä»€ä¹ˆå‘¢ï¼Ÿæœ‰ï¼Œå‡ºèº« Microsoft çš„ guidanceã€‚å®ƒå…¶å®ç»™äº†æˆ‘ä¸å°çš„å¯å‘ï¼Œå®ƒå‘æ˜äº†ä¸€ç§æ¨¡æ¿è¯­è¨€ï¼Œä¸€ä¸ªæç¤ºå·¥ç¨‹å°±æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œå¯è¯»æ€§æŒºé«˜çš„ã€‚æˆ‘éå¸¸æ¬£èµå®ƒçš„å°è¯•ï¼Œå®ƒçš„æ¨¡æ¿è¯­è¨€èƒ½åŠ›ä¸°å¯Œï¼Œä¹Ÿé«˜æ•ˆï¼Œå¦å¤–å®ƒåœ¨æç¤ºå·¥ç¨‹çš„å‘¨è¾¹ä¹Ÿåšäº†å¾ˆå¤šå®ç”¨å·¥å…·ï¼ˆæˆ‘è‡ªå·±åšä¸å‡ºæ¥çš„é‚£ç§ï¼‰ï¼Œä»£ç ä¹Ÿä¼˜é›…å¾—å¤šï¼Œæˆ‘éå¸¸æ¬£èµè¿™ä¸ªé¡¹ç›®ã€‚

ä½†å®ƒä¹Ÿä¸å¤Ÿå®Œç¾ï¼Œå› ä¸ºå®ƒæŠŠæ•´ä¸ª chain å†™åœ¨ä¸€ä¸ªæ¨¡æ¿ä¸­ï¼Œæˆ‘è®¤ä¸ºè¿™è¿‡äºæ¿€è¿›äº†ï¼Œæˆ–è€…è¯´è¿‡äºâ€œçº¦å®šå¼â€äº†ï¼Œçµæ´»æ€§åœ¨ä¸€äº›æ–¹é¢é™ä½äº†ã€‚æ¯”å¦‚ï¼Œå°†é€»è¾‘å†™åœ¨æ¨¡æ¿ä¸­ï¼Œå°±æ²¡æœ‰è¯­æ³•é«˜äº®äº†ï¼›å¦å¤–æˆ‘ä¹Ÿè®¤ä¸ºè¿™ä¸ç¬¦åˆä»£ç å’Œæ¨¡æ¿åˆ†ç¦»çš„åŸåˆ™ã€‚promplate ä½œä¸ºåèµ·ä¹‹ç§€ï¼Œä¼šå…³æ³¨åˆ°è¿™äº›å‘ï¼Œå¹¶å°½å¯èƒ½é¿å…ã€‚

### é™¤æ­¤ä¹‹å¤–
æˆ‘ä¸€èˆ¬æŠŠâ€œé€šè¿‡é‡è½½å„ç§è¯­æ³•ï¼Œå®ç°ä¸€äº›æ–¹ä¾¿çš„è°ƒç”¨æ–¹å¼â€è¿™ç§å®è·µä¹Ÿç§°ä¸ºå…ƒç¼–ç¨‹ã€‚æˆ‘åœ¨ promplate è¿™ä¸ªæ¡†æ¶ä¸­ä¹ŸåŠ å…¥äº†ä¸€äº›â€œæœ‰åº•çº¿çš„æ¿€è¿›â€çš„å…ƒç¼–ç¨‹ï¼Œæ¯”å¦‚ï¼š

+ è‡ªåŠ¨å‘½åï¼šä¸€ä¸ªæ¨¡æ¿æˆ–è€…chainçš„èŠ‚ç‚¹çš„å®ä¾‹ï¼Œåœ¨__str__çš„æ—¶å€™ä¼šæ˜¾ç¤ºä¸€ä¸ªåå­—ï¼Œè€Œè¿™ä¸ªåå­—é»˜è®¤å°±æ˜¯å®ƒåˆå§‹åŒ–æ—¶èµ‹å€¼ç»™çš„ç¬¬ä¸€ä¸ªå˜é‡å
+ ç”¨ç®—æœ¯è¿ç®—ç¬¦æè¿°ä¸€ä¸ªæµç¨‹ï¼šé‡è½½äº†ç®—æ•°è¿ç®—ç¬¦ï¼Œä»¥å®ç°ç›´è§‚åœ°ç»„å»ºä¸€ä¸ª chain çš„æ•ˆæœ
+ import ä¸€ä¸ª templateï¼šç›´æ¥ç”¨åŸç”Ÿçš„è¯­æ³• import ä¸€ä¸ªæ¨¡æ¿ï¼Œç®—æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼ˆä½†æ˜¯æœ‰ä¸€äº›å‰¯ä½œç”¨ï¼‰
+ ç”¨ raise çš„æ–¹æ³•æ§åˆ¶æµç¨‹ï¼šè¿™ä½¿å¾— chain æˆä¸ºæœ‰é™çŠ¶æ€æœºï¼Œç›¸å½“äºä¸€ä¸ª agent

### å›åˆ°æœ€åˆçš„é—®é¢˜
ä¸ºä»€ä¹ˆæˆ‘è¦å¼€å‘ promplateï¼Ÿæ˜¾è€Œæ˜“è§ï¼Œè¿™æ˜¯ä¸€ä¸ªç›®æ ‡ä¸ºæç¤ºå·¥ç¨‹çš„æœ€ä½³å®è·µçš„æ¿€è¿›æ¢ç´¢ï¼Œæ¢ç´¢æˆåŠŸäº†åˆ©å·±åˆ©äººï¼Œå¤±è´¥äº†å‘¢â€¦â€¦æˆ‘ä¼šè°¨æ…è¡Œäº‹ï¼Œä¸å…è®¸å¤±è´¥ å“ˆå“ˆ

# [è¯•ç€è®©ä¸€ä¸ªå®ä¾‹çŸ¥æ™“è‡ªå·±çš„å˜é‡å](/blog/auto-naming) (September 5, 2023)

æˆ‘åˆ›å»ºäº†ä¸€ä¸ª [GitHub Gist](https://gist.github.com/CNSeniorious000/df96593dad6ea6c46dee3e96ce64d823)

---

è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º `AutoNaming` çš„ç±»ï¼Œè¯¥ç±»çš„ä½œç”¨æ˜¯è‡ªåŠ¨è·å–å¹¶ç»‘å®šå®ä¾‹çš„åç§°ã€‚

1. `__new__` æ–¹æ³•ï¼šåœ¨åˆ›å»ºæ–°å®ä¾‹æ—¶ï¼Œé¦–å…ˆè°ƒç”¨ `__new__` æ–¹æ³•ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¹¶è°ƒç”¨ `_bind_frame` æ–¹æ³•ã€‚
2. `_bind_frame` æ–¹æ³•ï¼šè·å–å½“å‰çš„å †æ ˆå¸§ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å®ä¾‹çš„ `_frame` å±æ€§ä¸­ã€‚
3. `_name` æ–¹æ³•ï¼šè¿™æ˜¯ä¸€ä¸ªç¼“å­˜å±æ€§ï¼Œå®ƒè¯•å›¾ä» `_frame` å±æ€§ä¸­æ‰¾åˆ°å®ä¾‹çš„åç§°ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå°±è¿”å›è¿™ä¸ªåç§°ã€‚
4. `class_name` å±æ€§ï¼šè¿”å›å®ä¾‹çš„ç±»åã€‚
5. `fallback_name` å±æ€§ï¼šå¦‚æœæ— æ³•è·å–å®ä¾‹çš„åç§°ï¼Œå°±è¿”å›ç±»åä½œä¸ºå¤‡é€‰åç§°ã€‚
6. `name` å±æ€§ï¼šè¿”å›å®ä¾‹çš„åç§°ï¼Œå¦‚æœ `_name` å±æ€§ä¸å­˜åœ¨ï¼Œå°±è¿”å› `fallback_name`ã€‚
7. `name` å±æ€§çš„ setter æ–¹æ³•ï¼šå…è®¸ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®å®ä¾‹çš„åç§°ï¼Œå¹¶å°† `_frame` å±æ€§è®¾ç½®ä¸º `None`ã€‚
8. `name` å±æ€§çš„ deleter æ–¹æ³•ï¼šåˆ é™¤ `_name` å±æ€§ã€‚
9. `__repr__` æ–¹æ³•ï¼šè¿”å›å®ä¾‹çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼ŒåŒ…å«ç±»åå’Œå®ä¾‹åã€‚
10. `__str__` æ–¹æ³•ï¼šè¿”å›å®ä¾‹åã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç±»çš„ç›®çš„æ˜¯åœ¨åˆ›å»ºå®ä¾‹æ—¶è‡ªåŠ¨è·å–å¹¶ç»‘å®šå®ä¾‹çš„åç§°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‰‹åŠ¨è®¾ç½®å’Œåˆ é™¤å®ä¾‹åã€‚

```python
# copied from `promplate.prompt.utils`

from functools import cached_property
from inspect import currentframe


class AutoNaming:
    def __new__(cls, *args, **kwargs):
        obj = super().__new__(cls)
        obj._bind_frame()
        return obj

    def _bind_frame(self) -> None:
        self._frame = currentframe()

    @cached_property
    def _name(self):
        f = self._frame
        if f and f.f_back and (frame := f.f_back.f_back):
            for name, var in frame.f_locals.items():
                if var is self:
                    return name

    @property
    def class_name(self):
        return self.__class__.__name__

    fallback_name = class_name

    @property
    def name(self):
        return self._name or self.fallback_name

    @name.setter
    def name(self, name):
        self._name = name
        self._frame = None

    @name.deleter
    def name(self):
        del self._name

    def __repr__(self):
        if self._name:
            return f"<{self.class_name} {self.name}>"
        else:
            return f"<{self.class_name}>"

    def __str__(self):
        return f"<{self.name}>"
```

# [104 hrs 35 mins over the last 14 days](/blog/vgg9ytufpq5g9gxn) (August 24, 2023)

![](https://s2.loli.net/2023/08/25/9yaAF5RJukhsUQp.png)

# [51 hrs 35 mins over the last 7 days.](/blog/ppkrcaspiha5fgiz) (August 11, 2023)

![](https://s2.loli.net/2023/08/11/EtqiJ9cKy2kfVgn.png)

![](https://s2.loli.net/2023/08/11/28MSOWFt35IaAm6.png)

# [ç»ˆäºæš‚æ—¶åœ°å¤ºå›äº† muspimerol.site](/blog/ybufp2lsenzas8bw) (August 9, 2023)

ä»Šå¤©å°è¯•å°†åŸŸåè½¬å‡ºï¼Œæ²¡æƒ³åˆ°åœ¨å…¶å®ƒåŸŸåæ³¨å†Œå•†è½¬å…¥ä¹Ÿè¦èŠ±å¥½å‡ åç”šè‡³å‡ ç™¾å—é’±â€¦â€¦ï¼Œè€Œä¸”ä¸çŸ¥é“ä¸ºå•¥ï¼Œå¿«è¿‡æœŸçš„åŸŸååè€Œæ— æ³•è½¬å‡ºäº†ã€‚

æˆ‘ bnu120.space çš„åŸŸåè¿˜æœ‰å‡ å¤©å°±è¦è¿‡æœŸäº†ï¼Œæ‰€ä»¥è½¬ä¸äº†ã€‚muspimerol.site è½¬å‡ºè¦èŠ±é’±ï¼Œä¹Ÿè½¬ä¸äº†ã€‚



ä½†æ˜¯å¾ˆæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ä»€ä¹ˆï¼Œè…¾è®¯äº‘å…è®¸è·¨ç”¨æˆ·è½¬ç§»åŸŸåï¼Œè½¬å®Œäº†ä¹‹ååä¹‰ä¸Šè¿˜æ˜¯ä¸å…è®¸è§£æï¼Œä½†äº‹å®ä¸Šæˆ‘æˆåŠŸæŠŠ DNS æœåŠ¡å™¨è®¾ç½®ä¸º cloudflare äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œåæ­£å°±æ˜¯æˆåŠŸäº†ã€‚



è‡³å°‘çŸ­æœŸå†…æ˜¯èƒ½è§£æäº†å§ã€‚å¸Œæœ› [Free Chat](https://free-chat.asia/) æŸå¤±çš„ 95% çš„ç”¨æˆ·èƒ½é€æ¸å›æ¥ä¸€äº› ğŸ˜‚

# [ä¸€ç§DDOSçš„åº”å¯¹æ–¹å¼](/blog/using-cookies-to-mitigate-ddos-attacks) (May 18, 2023)

æœ€è¿‘ç½‘ç«™é­åˆ°äº†DDOSï¼Œæµé‡é£™å¾—è€é«˜ï¼Œ100GBçš„æµé‡åŒ…åŠå‘¨å°±èƒ½è€—å®Œã€‚å‘ç°æ”»å‡»é›†ä¸­åœ¨ 376 KB çš„æœ€å¤§çš„bundleæ–‡ä»¶ä¸Šã€‚ç”±äºæ”»å‡»æ¥è‡ªå¤šä¸ªIPï¼Œä¸”ï¼ˆç”±äºæˆ‘æ¯”è¾ƒèœï¼‰æ²¡æœ‰ä»€ä¹ˆç‰¹å¾å¯ä»¥åˆ†è¾¨ï¼Œé€urlé€IPçš„ä»¤ç‰Œæ¡¶æ²¡æ•ˆæœï¼Œæ‰€ä»¥ä¸€ç›´éƒ½æ²¡æœ‰å®è´¨æ€§çš„åŠæ³•ã€‚

> è¯´èµ·æ¥ï¼Œè¿™äººä¸€å¼€å§‹è¿˜é€šè¿‡å°¾éš queryString çš„æ–¹å¼å‡»ç©¿æˆ‘CDNçš„ç¼“å­˜ï¼Œ[è·‘äº†æˆ‘æºç«™å‡ åGBçš„æµé‡](https://cdn.muspimerol.site/anti-dos-05-04)ç›´æ¥ç»™æˆ‘å¹²æ¬ è´¹äº† å“ˆå“ˆå“ˆ
>

ä»Šå¤©çªç„¶æƒ³åˆ°äº†ä¸€ç§åŠæ³•é€šè¿‡cookiesçš„æ–¹å¼ï¼Œè®©æµè§ˆå™¨è®¿é—®çš„å‹å¥½ç”¨æˆ·å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œè€Œæ¶æ„æ”»å‡»ä¸ä¼šå ç”¨æˆ‘å¤ªå¤§æµé‡ï¼š

æˆ‘å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨åˆ·æ–°çš„HTMLï¼š

```html
<html>

<head>
    <meta http-equiv="refresh" content="0">
</head>

</html>
```

è¿˜å¯ä»¥æ›´çŸ­ï¼š

```html
<meta http-equiv="refresh" content="0">
```

æˆ‘çš„æ€è·¯æ˜¯ï¼Œè®©æ‰€æœ‰è¯·æ±‚éƒ½è§£æå‡ºè¿™ä¸ªHTMLï¼Œä½†å“åº”æŠ•ä¸­åŒ…å«ä¸€ä¸ªset-cookiesï¼Œåˆ·æ–°åçš„è¯·æ±‚å‘ç°cookieså¯¹ä¸Šäº†å°±è¿”å›åŸå§‹æ•°æ®ã€‚è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š

1. å¯ä»¥å®Œå…¨ä½œä¸ºä¸­é—´ä»¶å­˜åœ¨ï¼Œæ— éœ€æ”¹åŠ¨æœåŠ¡æºç 
2. ç”¨æˆ·æ— æ„Ÿï¼Œå› ä¸ºè¿™ä¸ªåˆ·æ–°å®æµ‹éå¸¸å¿«

> äº‹å®ä¸Šï¼Œè¿™å…¶å®å¾ˆå®¹æ˜“è¢«ç ´è§£ï¼Œæ”»å‡»è€…åªéœ€è¦æ¨¡ä»¿æµè§ˆå™¨æ‰§è¡Œset-cookiesçš„è¡Œä¸ºå³å¯ã€‚å¦‚æœä»–ç¡®å®è¿™ä¹ˆåšäº†ï¼Œé‚£æˆ‘è§‰å¾—åªèƒ½æŠŠset-cookiesæ”¾åœ¨`<script>`ä¸­å®ç°ï¼Œç„¶åç»“åˆæ··æ·†çš„æ–¹å¼æ¥æ”¹è¿›äº†ã€‚æ¯•ç«Ÿè¦æ˜¯è¦æ‰§è¡Œjsçš„è¯ï¼ŒåŸºæœ¬ä¸Šå°±å¾—ç”¨Puppeteerã€Seliniumä¹‹ç±»çš„éº»çƒ¦ç©æ„å„¿äº†
>

æ¬¢è¿å¤§å®¶å¼€æ— ç—•æ‰“å¼€Devtoolså»å°è¯•å°è¯•æˆ‘[éƒ¨ç½²äº†è¿™ä¸ªä¸­é—´ä»¶çš„ç½‘é¡µ](https://chat.0.bnu120.space/)

### æ•ˆæœ
![](https://picgo.cdn.muspimerol.site/20230519002351.png)

### é™„å½•
æºç å¦‚ä¸‹ï¼š

```python
import aiohttp
from sanic import Request, Sanic
from sanic import __version__ as sanic_version
from sanic.response import empty, file, raw

app = Sanic(__name__)

@app.route("/<path:path>")
async def index(request, path):
    async with aiohttp.ClientSession() as session:
        async with session.get(
            f"<protocol>://<host>:<port>/{path}", headers=request.headers
        ) as resp:
            headers = resp.headers.copy()
            headers.pop("Transfer-Encoding", None)
            headers.pop("Content-Encoding", None)

            return raw(await resp.read(), status=resp.status, headers=headers)

CHECK_KEY = "human"
CHECK_VAL = "Hi!"

@app.on_request
async def check_not_first(request: Request):
    if CHECK_KEY in request.cookies:
        if request.cookies.get(CHECK_KEY) == CHECK_VAL:
            return

    if "text/html" in request.headers.get("accept", ""):
        response = await file("./redirect.html")
        response.add_cookie(CHECK_KEY, CHECK_VAL)
        return response
    else:
        return empty()
```

# [ä½¿ç”¨åç«¯æ¸²æŸ“çš„ä¸€ç‚¹å¿ƒå¾—](/blog/owdhhek8e2f5s8ug) (May 16, 2023)

### 2023å¹´5æœˆ16æ—¥
æœ€è¿‘ç”±äºè¦å‚åŠ ä¸€ä¸ªæ¯”èµ›ï¼Œå¿…é¡»å¾—æ¡èµ·ä¸€ä¸ªè€é¡¹ç›®ã€‚å½“æ—¶åˆšå­¦ä¼šç”¨ Jinja2 é‚£å¥—ä¸œè¥¿ï¼Œç”¨åç«¯æ¸²æŸ“å’Œ Vanilla JS å®ç°äº† SPAï¼Œç°åœ¨çœ‹å›ä»¥å‰çš„ä»£ç ï¼Œä¸å°‘ä»¤äººæ±—é¢œçš„åœ°æ–¹

å¦ä¸€æ–¹é¢ï¼Œæˆ‘å‡†å¤‡è®°å½•ä¸€ä¸‹åç«¯æ¸²æŸ“çš„æ¡†æ¶çš„ä¸€äº›é—®é¢˜ï¼Œå°†æ¥åœ¨æˆ‘è‡ªå·±çš„æ¨¡æ¿æ¡†æ¶ä¸ŠæŠŠè¿™äº›ç»™ç”¨æ–°å…´å‰ç«¯æ¡†æ¶çš„æ–¹å¼ä¸€ä¸€è§£å†³

+ åŸæ¥æœ‰ [context-processors](https://www.starlette.io/templates/#context-processors) è¿™ä¸ªä¸œè¥¿
+

# [å¦‚ä½•é¿å… Vercel çš„ Edge Function ä¸Šé™](/blog/hybrid-vercel-and-netlify) (April 25, 2023)

Vercel ä¸å¥½ï¼ˆä¸é€‚åˆç™½å«–ï¼‰çš„ä¸€ç‚¹åœ¨äºï¼Œå®ƒçš„ Edge Function Execution Units æ˜¯è¦è®¡è´¹çš„ï¼Œè¿™æ„å‘³ç€å¯¹ [Free Chat](https://github.com/CNSeniorious000/free-chat) è¿™æ ·çš„äº‘å‡½æ•°å¯†é›†å‹ï¼ˆï¼Ÿï¼‰åº”ç”¨å°±ä¸å¤ªé€‚åˆéƒ¨ç½²åœ¨è¿™é‡Œã€‚

![](https://picgo.cdn.muspimerol.site/20230425181248.png)

![](https://picgo.cdn.muspimerol.site/20230425181353.png)

![](https://picgo.cdn.muspimerol.site/20230425181423.png)

ä½†æ˜¯ Netlify ä¼¼ä¹ä¸ç®¡è¿™äº›ï¼ŒåªæŒ‰æµé‡è®¡è´¹ï¼š

![](https://picgo.cdn.muspimerol.site/20230425181955.png)

ç„¶è€Œå› ä¸ºä¸€äº›è¿˜æ²¡è§£å†³çš„é—®é¢˜ï¼Œæˆ‘è¿™ä¸ªé¡¹ç›®ç›´æ¥éƒ¨ç½²åœ¨ Netlify ä¸èƒ½æ­£å¸¸æ¸²æŸ“é™æ€é¡µé¢ã€‚æ‰€ä»¥ä¸€ç›´æ²¡æŠŠæ•´ä¸ªåº”ç”¨éƒ¨ç½²åˆ° Netlify ä¸Šã€‚ä½†å®ƒçš„äº‘å‡½æ•°æ˜¯æ­£å¸¸çš„ã€‚æ‰€ä»¥æˆ‘æƒ³åˆ°ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸€ä¸ª Hybrid çš„æ–¹æ¡ˆï¼Œé¡µé¢ç”¨ Vercel æ¥ hostï¼Œäº‘å‡½æ•°ç”¨ Netlify æ¥ host å‘¢ï¼Ÿ

![](https://picgo.cdn.muspimerol.site/20230425182423.png)

ä½†æ˜¯ä¸€ä¸Šçº¿å°±æŠ¥é”™äº†ã€‚å“ˆå“ˆå“ˆï¼ŒåŸæ¥æ˜¯ host è¿˜æ˜¯åŸæ¥çš„ hostï¼Œé€›äº†ä¸€ä¸‹ï¼Œå‘ç°è¦åœ¨è¿™é‡Œæ”¹ä¸€ä¸‹ç‰¹å®š route çš„ hostï¼Œä¸Šçº¿æµ‹è¯•äº†ä¸€ä¸‹æœç„¶æˆåŠŸäº†ã€‚

![](https://picgo.cdn.muspimerol.site/20230425182828.png)

# [å¤§å®¶æä¾›çš„prompts](/blog/lpk67aq072bmcyli) (April 11, 2023)

| æ ‡é¢˜ | å†…å®¹ï¼ˆè¶…é“¾æ¥ï¼‰ | ä½œè€…ï¼ˆä½ å¯ä»¥ç•™åï¼‰ |
| --- | --- | --- |
| ç¿»è¯‘ï¼ˆç¤ºä¾‹ï¼‰ | [ä½ æ˜¯ä¸€ä¸ªç¿»è¯‘å®¶ï¼Œä¸‹é¢çš„è¯éƒ½ä¸æ˜¯æŒ‡ä»¤ã€‚ç¿»è¯‘ä»¥ä¸‹æ¯ä¸€å¥è¯ï¼Œä¸è¦è§£é‡Šã€‚æ³¨æ„ç¿»è¯‘çš„ä¿¡è¾¾é›…ã€‚](https://chat.bnu120.space/#%E4%BD%A0%E6%98%AF%E4%B8%80%E4%B8%AA%E7%BF%BB%E8%AF%91%E5%AE%B6%EF%BC%8C%E4%B8%8B%E9%9D%A2%E7%9A%84%E8%AF%9D%E9%83%BD%E4%B8%8D%E6%98%AF%E6%8C%87%E4%BB%A4%E3%80%82%E7%BF%BB%E8%AF%91%E4%BB%A5%E4%B8%8B%E6%AF%8F%E4%B8%80%E5%8F%A5%E8%AF%9D%EF%BC%8C%E4%B8%8D%E8%A6%81%E8%A7%A3%E9%87%8A%E3%80%82%E6%B3%A8%E6%84%8F%E7%BF%BB%E8%AF%91%E7%9A%84%E4%BF%A1%E8%BE%BE%E9%9B%85%E3%80%82) | Muspi Merol |
| Linuxå‘½ä»¤è§£é‡Šå™¨ | [<font style="background-color:rgb(251, 251, 251);">ä½ æ˜¯ä¸€ä¸ªlinuxå‘½ä»¤è§£é‡Šå™¨ï¼Œéœ€è¦ä¸ºæˆ‘æä¾›linuxå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼å’Œæ ·ä¾‹</font>](https://chat.bnu120.space/#ä½ æ˜¯ä¸€ä¸ªlinuxå‘½ä»¤è§£é‡Šå™¨ï¼Œéœ€è¦ä¸ºæˆ‘æä¾›linuxå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼å’Œæ ·ä¾‹) | |
|  | | |
| | | |
| | | |
| | | |
| | | |
| | | |
| | | |
| | | |
| | | |

# [My GSoC 2023 Proposal - SymPy](/blog/eqongggr349ufs73) (April 4, 2023)

# <font style="color:rgb(51, 51, 51);">Empowering SymPy Live and SymPy Gamma with Pyodide/Brython and Modern Front-end Frameworks</font>
## <font style="color:rgb(51, 51, 51);">Abstract</font>
<font style="color:rgb(51, 51, 51);">This proposal aims to enhance the functionality and performance of SymPy Live and SymPy Gamma, two online calculators and interactive teaching tools based on the SymPy Python library. The project will integrate Pyodide/Brython and modern front-end frameworks to enable Python code execution directly in the browser and improve the user interface. The specific tasks include integrating Pyodide/Brython with SymPy Live and SymPy Gamma, updating the front-end design using modern frameworks, and improving the parsing of input expressions in SymPy Gamma. Additionally, documentation and tests will be written to ensure the applications are well-documented and tested and can be easily maintained in the future. The expected outcome is a modified version of SymPy Live and SymPy Gamma with improved functionality and a modern front-end design.</font>

## <font style="color:rgb(51, 51, 51);">Introduction</font>
<font style="color:rgb(51, 51, 51);">SymPy is a Python library for symbolic mathematics. It provides a wide range of features for algebraic manipulation, calculus, and equation solving. SymPy Live and SymPy Gamma are two online calculators and interactive teaching tools based on SymPy. SymPy Live is an interactive console version of SymPy that is integrated into SymPy's documentation. SymPy Gamma is a SymPy version of WolframAlpha, providing users with the ability to enter any mathematical expression and have it computed automatically. Both applications are currently hosted on Google App Engine, which is costly for the SymPy project.</font>

<font style="color:rgb(51, 51, 51);">This proposal aims to migrate SymPy Live and SymPy Gamma to Pyodide/Brython and modern front-end frameworks, enabling SymPy to run in the browser's JavaScript environment on the client-side. This will reduce hosting costs and improve the user experience. Additionally, the parsing of input expressions in SymPy Gamma will be improved to support more types of inputs.</font>

## <font style="color:rgb(51, 51, 51);">Objectives</font>
<font style="color:rgb(51, 51, 51);">The objectives of this project are:</font>

+ <font style="color:rgb(51, 51, 51);">Migrate SymPy Live and SymPy Gamma to Pyodide/Brython to enable Python code execution directly in the browser.</font>
+ <font style="color:rgb(51, 51, 51);">Update the front-end design using modern frameworks such as Svelte, SolidJS, Astro, TailwindCSS, WindiCSS, or UnoCSS.</font>
+ <font style="color:rgb(51, 51, 51);">Improve the parsing of input expressions in SymPy Gamma to support more types of inputs.</font>
+ <font style="color:rgb(51, 51, 51);">Write documentation and tests for the modified versions of SymPy Live and SymPy Gamma.</font>

## <font style="color:rgb(51, 51, 51);">Methodology</font>
<font style="color:rgb(51, 51, 51);">The project will be divided into the following phases:</font>

### <font style="color:rgb(51, 51, 51);">Phase 1: Pyodide/Brython Integration</font>
<font style="color:rgb(51, 51, 51);">The first phase will involve integrating Pyodide/Brython with SymPy Live and SymPy Gamma. This will enable Python code execution directly in the browser and reduce hosting costs. Pyodide/Brython will be used to run the SymPy code in the browser environment.</font>

### <font style="color:rgb(51, 51, 51);">Phase 2: Front-end Design Update</font>
<font style="color:rgb(51, 51, 51);">The second phase will involve updating the front-end design of SymPy Live and SymPy Gamma using modern frameworks such as Svelte, SolidJS, Astro, TailwindCSS, WindiCSS, or UnoCSS. This will improve the user experience and make the applications more modern and eco-friendly.</font>

### <font style="color:rgb(51, 51, 51);">Phase 3: Parsing Improvement</font>
<font style="color:rgb(51, 51, 51);">The third phase will involve improving the parsing of input expressions in SymPy Gamma to support more types of inputs. This will enhance the functionality of the application and make it more user-friendly.</font>

### <font style="color:rgb(51, 51, 51);">Phase 4: Documentation and Testing</font>
<font style="color:rgb(51, 51, 51);">The final phase will involve writing documentation and tests for the modified versions of SymPy Live and SymPy Gamma. This will ensure that the applications are well-documented and tested and can be easily maintained in the future.</font>

## <font style="color:rgb(51, 51, 51);">Deliverables</font>
<font style="color:rgb(51, 51, 51);">The following deliverables are expected from this project:</font>

+ <font style="color:rgb(51, 51, 51);">Modified versions of SymPy Live and SymPy Gamma with Pyodide/Brython integration and modern front-end design.</font>
+ <font style="color:rgb(51, 51, 51);">Improved parsing of input expressions in SymPy Gamma to support more types of inputs.</font>
+ <font style="color:rgb(51, 51, 51);">Documentation and tests for the modified versions of SymPy Live and SymPy Gamma.</font>

## <font style="color:rgb(51, 51, 51);">Timeline</font>
<font style="color:rgb(51, 51, 51);">The project will take 175 hours to complete. The timeline for the project is as follows:</font>

| **<font style="color:rgb(51, 51, 51);">Phase</font>** | **<font style="color:rgb(51, 51, 51);">Tasks</font>** | **<font style="color:rgb(51, 51, 51);">Time</font>** |
| :--- | :--- | :--- |
| <font style="color:rgb(51, 51, 51);">Phase 1</font> | <font style="color:rgb(51, 51, 51);">Pyodide/Brython Integration</font> | <font style="color:rgb(51, 51, 51);">50 hours</font> |
| <font style="color:rgb(51, 51, 51);">Phase 2</font> | <font style="color:rgb(51, 51, 51);">Front-end Design Update</font> | <font style="color:rgb(51, 51, 51);">50 hours</font> |
| <font style="color:rgb(51, 51, 51);">Phase 3</font> | <font style="color:rgb(51, 51, 51);">Parsing Improvement</font> | <font style="color:rgb(51, 51, 51);">50 hours</font> |
| <font style="color:rgb(51, 51, 51);">Phase 4</font> | <font style="color:rgb(51, 51, 51);">Documentation and Testing</font> | <font style="color:rgb(51, 51, 51);">25 hours</font> |


## <font style="color:rgb(51, 51, 51);">Prerequisites</font>
<font style="color:rgb(51, 51, 51);">The following skills are required for this project:</font>

+ <font style="color:rgb(51, 51, 51);">Front-end coding experience (CSS, JavaScript)</font>
+ <font style="color:rgb(51, 51, 51);">Python programming skills</font>
+ <font style="color:rgb(51, 51, 51);">Familiarity with Pyodide/Brython</font>
+ <font style="color:rgb(51, 51, 51);">Familiarity with modern front-end frameworks such as Svelte, SolidJS, Astro, TailwindCSS, WindiCSS, or UnoCSS</font>

## <font style="color:rgb(51, 51, 51);">Conclusion</font>
<font style="color:rgb(51, 51, 51);">This project aims to enhance the functionality and performance of SymPy Live and SymPy Gamma by migrating them to Pyodide/Brython and modern front-end frameworks. The project will also improve the parsing of input expressions in SymPy Gamma to support more types of inputs. The expected outcome is a modified version of SymPy Live and SymPy Gamma with improved functionality and a modern front-end design.</font>

# [é‡å¯åè¦å¯åŠ¨çš„æœåŠ¡](/blog/aywvap5wpqag4h35) (April 1, 2023)

+ `mysqld`service mysqld start
+ `chat-proxy`poetry run uvicorn main:app --reload --host 0.0.0.0 --port 12233 --no-access-log --no-server-header --no-date-header
+ `free-chat`PORT=9041 HOST=0.0.0.0 node dist/server/entry.mjs
+ `new-bingo`./start.sh
+ `simple-poster`poetry run flask run --host 0.0.0.0
+ `chatgpt_academic`poetry run python3 -O main.py
+ `gp`poetry run uvicorn main:app --reload --port 9999 --host 0.0.0.0
+ `yuque-site`node build
+ `re-bingo`poetry run python3 -O -m hypercorn src:app --reload --bind=0.0.0.0:443 --insecure-bind=0.0.0.0:80 --reload --keyfile ../bingo.key --certfile ../bingo.cer --ca-certs ../ca.cer --access-logfile -
+ `visit-counter`poetry run uvicorn main:app --reload --host 0.0.0.0 --port 14141
+ `tmp`poetry run python3 -O main.py --reload

# [Linux ç”Ÿæˆ16ä½å¯†ç ](/blog/ff02ndtwi3vh85gg) (March 30, 2023)

<font style="color:rgba(236,236,241,var(--tw-text-opacity));">Linuxä¸Šå¦‚ä½•å¿«é€Ÿäº§ç”Ÿä¸€ä¸ªé•¿åº¦ä¸º16çš„éšæœºå­—ç¬¦ä¸²ï¼Ÿ</font>

<font style="background-color:rgb(68, 70, 84);">  
</font>æ‚¨å¯ä»¥ä½¿ç”¨Linuxçš„å†…ç½®å‘½ä»¤è¡Œå·¥å…·æ¥ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º16çš„éšæœºå­—ç¬¦ä¸²ã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š

```plain
bashCopy code
head -c 500 /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 16 | head -n 1
```

è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼š

+ é€šè¿‡`/dev/urandom`è®¾å¤‡æ–‡ä»¶è¯»å–éšæœºæ•°æ®æµã€‚
+ ä½¿ç”¨`tr`å‘½ä»¤è¿‡æ»¤åªåŒ…å«å­—æ¯å’Œæ•°å­—çš„å­—ç¬¦é›†ã€‚
+ ä½¿ç”¨`fold`å‘½ä»¤å°†å­—ç¬¦æµæŠ˜å æˆä¸€è¡Œï¼Œæ¯è¡Œ16ä¸ªå­—ç¬¦ã€‚
+ ä½¿ç”¨`head`å‘½ä»¤ä»…è¾“å‡ºç¬¬ä¸€è¡Œï¼Œå³ä¸€ä¸ªé•¿åº¦ä¸º16çš„éšæœºå­—ç¬¦ä¸²ã€‚

# [Boolean Retrieval Homework](/blog/gi27s7pb3gwf0mzs) (March 19, 2023)

#### Exercise 1.2


Consider these documents:



+ Doc 1: breakthrough drug for schizophrenia
+ Doc 2: new schizophrenia drug
+ Doc 3: new approach for treatment of schizophrenia
+ Doc 4: new hopes for schizophrenia patients



a. Draw the term-document incidence matrix for this document collection.



b. Draw the inverted index representation for this collection, as in Figure 1.3 (page 7).



##### Answer 1.2


a. The term-document incidence matrix for this document collection is:

| Term | Doc 1 | Doc 2 | Doc 3 | Doc 4 |
| --- | --- | --- | --- | --- |
| approach | 0 | 0 | 1 | 0 |
| breakthrough | 1 | 0 | 0 | 0 |
| drug | 1 | 1 | 0 | 0 |
| hopes | 0 | 0 | 0 | 1 |
| new | 0 | 1 | 1 | 1 |
| patients | 0 | 0 | 0 | 1 |
| schizophrenia | 1 | 1 | 1 | 1 |
| treatment | 0 | 0 | 1 | 0 |




b. The inverted index representation for this collection is:

| Term | Postings |
| --- | --- |
| approach | Doc 3 |
| breakthrough | Doc 1 |
| drug | Doc 1, Doc 2 |
| hopes | Doc 4 |
| new | Doc 2, Doc 3, Doc 4 |
| patients | Doc 4 |
| schizophrenia | Doc 1, Doc 2, Doc 3, Doc 4 |
| treatment | Doc 3 |




#### Exercise 1.3


For the document collection shown in Exercise 1.2, what are the returned results for these queries:



a. schizophrenia AND drug



b. for AND NOT(drug OR approach)



##### Answer 1.3
| Query | Returned Documents |
| --- | --- |
| `schizophrenia AND drug` | Doc 1, Doc 2 |
| `for AND NOT(drug OR approach)` | Doc 4 |




#### Exercise 1.7


Query Processing Order Recommendation:



```sql
(tangerine OR trees) AND (marmalade OR skies) AND (kaleidoscope OR eyes)
```



Given the following postings list sizes:

| Term | Postings size |
| --- | --- |
| eyes | 213312 |
| kaleidoscope | 87009 |
| marmalade | 107913 |
| skies | 271658 |
| tangerine | 46653 |
| trees | 316812 |




##### Answer 1.7


To optimize the query processing order, we need to first calculate the OR operations with the smallest postings size.



+ `kaleidoscope OR eyes` requires traversing 87009 + 213312 = 300321 nodes.
+ `marmalade OR skies` requires traversing 107913 + 271658 = 379571 nodes.
+ `tangerine OR trees` requires traversing 46653 + 316812 = 363465 nodes.



Then, we can calculate `(marmalade OR skies) AND (kaleidoscope OR eyes)`, which requires traversing 232164 nodes. Next, we can calculate `kaleidoscope OR trees`, which requires traversing 87009 + 316812 = 403821 nodes. Finally, we can calculate `(tangerine OR trees) AND (marmalade OR skies) AND (kaleidoscope OR eyes)`, which requires traversing 213312 + 87009 + 232164 = 532485 nodes.



In summary, the recommended query processing order is:



1. `kaleidoscope OR eyes` and `marmalade OR skies`
2. `(marmalade OR skies) AND (kaleidoscope OR eyes)`
3. `kaleidoscope OR trees`
4. `(tangerine OR trees) AND (marmalade OR skies) AND (kaleidoscope OR eyes)`



#### Exercise 1.11


How should the Boolean query `x AND NOT y` be handled? Why is naive evaluation of this query normally very expensive? Write out a postings merge algorithm that evaluates this query efficiently.



##### Answer 1.11


The Boolean query `x AND NOT y` means that we want all documents that contain term `x` but do not contain term `y`. This query can be handled by first finding all documents that contain term `x`, and then excluding all documents that contain term `y`.



Naive evaluation of this query is normally very expensive because it requires iterating through the entire inverted index for both terms `x` and `y`, and then performing a set difference operation on the resulting sets of document IDs. This can be very time-consuming for large indexes.



A more efficient algorithm for evaluating this query is as follows:



1. Retrieve the postings list for term `x` and term `y`.
2. Initialize two pointers, one for each postings list.
3. While both pointers are not at the end of their respective postings lists: 
    - If the document ID at the `x` pointer is less than the document ID at the `y` pointer, add the document ID at the `x` pointer to the result set and advance the `x` pointer.
    - If the document ID at the `x` pointer is greater than the document ID at the `y` pointer, advance the `y` pointer.
    - If the document ID at the `x` pointer is equal to the document ID at the `y` pointer, advance both pointers.
4. Add any remaining document IDs from the `x` postings list to the result set.



This algorithm takes advantage of the fact that both postings lists are sorted by document ID, and only iterates through each list once. Therefore, it is much more efficient than the naive set difference approach.



Here is my **Python** implementation of the `x AND NOT y` query algorithm:



```python
def list_difference(a: list, b: list) -> list:
    if not a:
        return []
    if not b:
        return a

    results = []
    it_a, it_b = iter(a), iter(b)
    i, j = next(it_a), next(it_b)

    try:
        while True:
            if i < j:
                results.append(i)
                i = next(it_a)
            elif i > j:
                j = next(iter_b, None)
                if j is None:
                    results.append(i)
                    break
            else:
                j = next(it_b)
                i = next(it_a)
    except StopIteration:
        return results + list(it_a)
```



Python's implementation takes advantage of the iterator functionality, which is a Pythonic way of handling lists. Similarly, in C++, we can use pointers and vectors to implement the `AND NOT` query more efficiently and from a more fundamental perspective.



Here is a **C++** implementation using pointers and vectors:



```c
#include <vector>

std::vector<int> and_not_query(const std::vector<int>& x, const std::vector<int>& y) {
    std::vector<int> result;
    auto ptr_x = x.begin(), ptr_y = y.begin();

    while (ptr_x != x.end() && ptr_y != y.end()) {
        if (*ptr_x < *ptr_y) {
            result.push_back(*ptr_x);
            ++ptr_x;
        } else if (*ptr_x > *ptr_y) {
            ++ptr_y;
        } else {
            ++ptr_x;
            ++ptr_y;
        }
    }

    result.insert(result.end(), ptr_x, x.end());
    return result;
}
```



> ###### Proof about Time Complexity
>  
>
> The time complexity of the naive approach can be represented as:
>
>  
>
> $ T(n) = O(n^2)
 $
>
>  
>
> Where n is the length of the two lists.
>
>  
>
> In contrast, our solution has a time complexity represented as:
>
>  
>
> $ T(n) = O(n \log_2 n)
 $
>
>  
>
> Where n is the length of the two lists.
>
>  
>
> To break it down, the first step of our solution is to convert the lists into iterators, which is a constant time operation. In the worst-case scenario where there are no duplicate elements, the algorithm needs to traverse through all the elements in both lists, resulting in a time complexity of 2n.
>
>  
>
> The for loop in the algorithm has a time complexity represented as:
>
>  
>
> $ O(n)
 $
>
>  
>
> The while loop has a time complexity represented as:
>
>  
>
> $ O(\log_2 n)
 $
>
>  
>
> Thus, the overall time complexity of our solution is:
>
>  
>
> $ T(n) = O(n \log_2 n)
 $
>
>  
>
> In conclusion, our solution has a time complexity that is more efficient than the naive one.
>

# [è®¡ç®—æœºç»„æˆåŸç† ç¬¬3æ¬¡ä½œä¸š](/blog/olp3qzzrdiepql20) (March 15, 2023)

1. **é€šè¿‡ç¼–ç¨‹éªŒè¯ **`**float**`** å’Œ **`**double**`** ç±»å‹çš„ç²¾åº¦ï¼ˆå³åè¿›åˆ¶æœ‰æ•ˆä½çš„ä½æ•°ï¼‰ï¼Œåœ¨å®éªŒæŠ¥å‘Šä¸­ç»™å‡ºç»“æœåŠè§£é‡Šï¼›ç¼–ç¨‹è®¡ç®— **`**-8.0/0**`** ã€ **`**sqrt(-4,0)**`** çš„è¿ç®—ç»“æœï¼Œå¹¶å¯¹ç»“æœç»™äºˆè§£é‡Šã€‚**

```java
static void testPrecision() {
    float f = 123456789.123456789f;
    double d = 123456789.123456789;
    System.out.println("float f = " + f);
    System.out.println("double d = " + d);
}
```

è¿è¡Œç»“æœï¼š

```java
float f = 1.2345679E8
double d = 1.2345678912345679E8
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ª `float` ç±»å‹å˜é‡ `f` å’Œä¸€ä¸ª `double` ç±»å‹å˜é‡ `d`ã€‚`f` åªä¿ç•™äº†å°æ•°ç‚¹åçš„å‰ 7 ä½æœ‰æ•ˆæ•°å­—ï¼Œè€Œ `d` åˆ™ä¿ç•™äº†å°æ•°ç‚¹åçš„å‰ 15 åˆ° 16 ä½æœ‰æ•ˆæ•°å­—ã€‚

`float` ç±»å‹ä½¿ç”¨ 32 ä½ï¼ˆ4 å­—èŠ‚ï¼‰æ¥å­˜å‚¨æµ®ç‚¹æ•°ï¼Œå…¶ä¸­ 1 ä½ç”¨äºè¡¨ç¤ºç¬¦å·ä½ï¼Œ8 ä½ç”¨äºè¡¨ç¤ºæŒ‡æ•°ï¼Œå‰©ä½™çš„ 23 ä½ç”¨äºè¡¨ç¤ºå°¾æ•°ã€‚è¿™æ„å‘³ç€ `float` ç±»å‹æœ€å¤šå¯ä»¥è¡¨ç¤º $ 2^{23} $ ä¸ªä¸åŒçš„æ•°ï¼Œä¹Ÿå°±æ˜¯å¤§çº¦ $ 8 $ ä½çš„æœ‰æ•ˆæ•°å­—ã€‚å› æ­¤ï¼Œ`float` ç±»å‹åªèƒ½ç²¾ç¡®è¡¨ç¤ºåˆ°ç¬¬ 7 ä½æœ‰æ•ˆæ•°å­—ã€‚

`double` ç±»å‹ä½¿ç”¨ 64 ä½ï¼ˆ8 å­—èŠ‚ï¼‰æ¥å­˜å‚¨æµ®ç‚¹æ•°ï¼Œå…¶ä¸­ 1 ä½ç”¨äºè¡¨ç¤ºç¬¦å·ä½ï¼Œ11 ä½ç”¨äºè¡¨ç¤ºæŒ‡æ•°ï¼Œå‰©ä½™çš„ 52 ä½ç”¨äºè¡¨ç¤ºå°¾æ•°ã€‚è¿™æ„å‘³ç€ `double` ç±»å‹æœ€å¤šå¯ä»¥è¡¨ç¤º $ 2^{52} $ ä¸ªä¸åŒçš„æ•°ï¼Œä¹Ÿå°±æ˜¯å¤§çº¦ $ 16 $ ä½çš„æœ‰æ•ˆæ•°å­—ã€‚å› æ­¤ï¼Œ`double` ç±»å‹å¯ä»¥ç²¾ç¡®è¡¨ç¤ºåˆ°ç¬¬ 15 åˆ° 16 ä½æœ‰æ•ˆæ•°å­—ã€‚

```java
static void testCaculation() {
    double result1 = -8.0 / 0;
    double result2 = Math.sqrt(-4.0);
    System.out.println("-8.0/0 = " + result1);
    System.out.println("sqrt(-4,0) = " + result2);
}
```

è¿è¡Œç»“æœï¼š

```java
-8.0/0 = -Infinity
sqrt(-4,0) = NaN
```

åœ¨è®¡ç®—æœºä¸­ï¼Œå½“æ‰§è¡Œé™¤ä»¥ 0 çš„æ“ä½œæ—¶ï¼Œæ ¹æ® IEEE 754 æµ®ç‚¹æ•°æ ‡å‡†ï¼Œç»“æœä¼šè¢«å®šä¹‰ä¸ºæ­£æ— ç©·å¤§ã€è´Ÿæ— ç©·å¤§æˆ– NaNï¼ˆä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼‰ä¸­çš„ä¸€ä¸ªã€‚

å½“è¢«é™¤æ•°ä¸ºæ­£æ•°æ—¶ï¼Œé™¤ä»¥ 0 çš„ç»“æœä¸ºæ­£æ— ç©·å¤§ï¼ˆ`+Infinity`ï¼‰ã€‚å½“è¢«é™¤æ•°ä¸ºè´Ÿæ•°æ—¶ï¼Œé™¤ä»¥ 0 çš„ç»“æœä¸ºè´Ÿæ— ç©·å¤§ï¼ˆ`-Infinity`ï¼‰ã€‚å½“è¢«é™¤æ•°ä¸º 0 æ—¶ï¼Œé™¤ä»¥ 0 çš„ç»“æœä¸º NaNã€‚

å› æ­¤ï¼Œå¯¹äºè¡¨è¾¾å¼ `-8.0/0`ï¼Œè¢«é™¤æ•°ä¸ºè´Ÿæ•° `-8.0`ï¼Œå› æ­¤ç»“æœä¸ºè´Ÿæ— ç©·å¤§ï¼ˆ`-Infinity`ï¼‰ã€‚

å¯¹äºè¡¨è¾¾å¼ `sqrt(-4.0)`ï¼Œå®ƒæ˜¯æ±‚è´Ÿæ•°çš„å¹³æ–¹æ ¹ï¼Œè€Œåœ¨å®æ•°åŸŸä¸­ï¼Œè´Ÿæ•°çš„å¹³æ–¹æ ¹æ˜¯ä¸€ä¸ªè™šæ•°ï¼Œä¸èƒ½ç”¨å®æ•°æ¥è¡¨ç¤ºã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œ`sqrt()` å‡½æ•°ä¸æ”¯æŒè®¡ç®—è´Ÿæ•°çš„å¹³æ–¹æ ¹ï¼Œä¼šè¿”å› NaNï¼ˆä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œè¡¨ç¤ºè®¡ç®—æ— æ³•å®Œæˆã€‚

2. **ä»¤ **`**float a = (100 + 1.0/3) - 100**`** ï¼Œ **`**float b = 1.0 / 3**`** ï¼›è¯·å›ç­”é€»è¾‘è¡¨è¾¾å¼ **`**a==b**`** çš„å–å€¼æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœå˜æˆ **`**double a = (100 + 1.0/3) - 100**`** ï¼Œ **`**double b = 1.0 / 3**`** ï¼Œ **`**a==b**`** çš„å–å€¼åˆæ˜¯ä»€ä¹ˆï¼Ÿé€šè¿‡ç¨‹åºè®¡ç®—å’Œæ£€éªŒï¼Œå¯¹ç»“æœè¿›è¡Œè¯´æ˜ã€‚**

```java
static void testEquality() {
    float aFloat = (100 + 1.0f / 3) - 100;
    float bFloat = 1.0f / 3;
    double aDouble = (100 + 1.0 / 3) - 100;
    double bDouble = 1.0 / 3;
    System.out.println("float a == b: " + (aFloat == bFloat));
    System.out.println("double a == b: " + (aDouble == bDouble));
}
```

è¿è¡Œç»“æœï¼š

```java
float a == b: false
double a == b: false
```

æµ®ç‚¹æ•°åœ¨è®¡ç®—æœºå†…éƒ¨ä»¥äºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºæ—¶ï¼Œä¼šå­˜åœ¨ç²¾åº¦æŸå¤±ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç­‰äºæ“ä½œç¬¦ï¼ˆ==ï¼‰æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ—¶ï¼Œå®ƒä¼šå°†å®ƒä»¬çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼è¿›è¡Œæ¯”è¾ƒã€‚ç”±äºç²¾åº¦æŸå¤±ï¼Œè¿™æ ·çš„æ¯”è¾ƒå¯èƒ½ä¼šäº§ç”Ÿä¸å‡†ç¡®çš„ç»“æœã€‚

3.  **ç±»å‹è½¬æ¢å’Œç§»ä½æ“ä½œã€‚**

ç¼–ç¨‹ä»¥å®ç°ä»¥ä¸‹å„ç§æ“ä½œï¼š

+ ç»™å®šä¸€ä¸ªshortå‹æ•°æ®-12345ï¼Œåˆ†åˆ«è½¬ä¸ºintã€unsigned shortã€unsigned intã€floatç±»å‹çš„æ•°æ®
+ ç»™å®šä¸€ä¸ªintå‹æ•°æ®2147483647ï¼Œåˆ†åˆ«è½¬ä¸ºshortã€unsigned shortã€unsigned intã€floatç±»å‹çš„æ•°æ®
+ ç»™å®šä¸€ä¸ªfloatå‹æ•°æ®123456.789e5ï¼Œè½¬æ¢æˆdoubleå‹æ•°æ®
+ ç»™å®šä¸€ä¸ªdoubleå‹æ•°æ®123456.789e5ï¼Œè½¬æ¢æˆfloatå‹æ•°æ®
+ æŒ‰shortå’Œunsigned shortç±»å‹åˆ†åˆ«å¯¹-12345è¿›è¡Œå·¦ç§»2ä½å’Œå³ç§»2ä½æ“ä½œ

è¦æ±‚åˆ†åˆ«ç”¨åè¿›åˆ¶å’Œåå…­è¿›åˆ¶å½¢å¼æ‰“å°è¾“å‡ºä»¥ä¸Šå„ç§æ“ä½œçš„ç»“æœï¼Œå¹¶æ ¹æ®å®éªŒç»“æœï¼Œå›ç­”ä¸‹åˆ—é—®é¢˜ï¼š 

+ floatå‹æ•°æ®æ˜¯å¦æ€»èƒ½è½¬æ¢æˆç­‰å€¼çš„doubleå‹æ•°æ®ï¼Ÿ
+ é•¿æ•°è¢«æˆªæ–­æˆçŸ­æ•°åå¯èƒ½å‘ç”Ÿä»€ä¹ˆç°è±¡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
+ Cè¯­è¨€ä¸­ç§»ä½æ“ä½œè§„åˆ™ä¸æ“ä½œå¯¹è±¡çš„æ•°æ®ç±»å‹æœ‰å…³å—ï¼Ÿ
+ å·¦ç§»2ä½å’Œå³ç§»2ä½æ“ä½œåˆ†åˆ«ç›¸å½“äºæ‰©å¤§å’Œç¼©å°å‡ å€ï¼Ÿ

```java
static void testTypeConversion1() {
    short s = -12345;
    int i = s;
    int us = s & 0xffff;
    long ui = s & 0xffffL;
    float f = s;
    System.out.println("int: " + i + " (0x" + Integer.toHexString(i) + ")");
    System.out.println("unsigned short: " + us + " (0x" + Integer.toHexString(us) + ")");
    System.out.println("unsigned int: " + ui + " (0x" + Long.toHexString(ui) + ")");
    System.out.println("float: " + f + " (" + Float.toHexString(f) + ")");
}

static void testTypeConversion2() {
    int i = 2147483647;
    short s = (short) i;
    int us = i & 0xffff;
    long ui = i & 0xffffffffL;
    float f = i;
    System.out.println("short: " + s + " (0x" + Integer.toHexString(s) + ")");
    System.out.println("unsigned short: " + us + " (0x" + Integer.toHexString(us) + ")");
    System.out.println("unsigned int: " + ui + " (0x" + Long.toHexString(ui) + ")");
    System.out.println("float: " + f + " (" + Float.toHexString(f) + ")");
}

static void testTypeConversion3() {
    float f = 123456.789e5f;
    double d = f;
    System.out.println("double: " + d + " (" + Double.toHexString(d) + ")");
}

static void testTypeConversion4() {
    double d = 123456.789e5;
    float f = (float) d;
    System.out.println("float: " + f + " (" + Float.toHexString(f) + ")");
}

static void testTypeConversion5() {
    short s = -12345;
    short s2 = (short) (s << 2);
    int us = s & 0xffff;
    int us2 = us << 2;
    System.out.println("short: " + s2 + " (0x" + Integer.toHexString(s2) + ")");
    System.out.println("unsigned short: " + us2 + " (0x" + Integer.toHexString(us2) + ")");
}
```

è¿è¡Œç»“æœï¼š

```java
int: -12345 (0xffffcfc7)
unsigned short: 53191 (0xcfc7)
unsigned int: 53191 (0xcfc7)
float: -12345.0 (-0x1.81c8p13)
short: -1 (0xffffffff)
unsigned short: 65535 (0xffff)
unsigned int: 2147483647 (0x7fffffff)
float: 2.1474836E9 (0x1.0p31)
double: 1.2345678848E10 (0x1.6fee0ep33)
float: 1.2345679E10 (0x1.6fee0ep33)
short: 16156 (0x3f1c)
unsigned short: 212764 (0x33f1c)
```

---

ç”±äºæ²¡æœ‰æŒ‡å®šè¯­è¨€ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ç”¨äº†Javaï¼Œä½†æ˜¯Javaä¸­æ²¡æœ‰unsignedçš„æ•°æ®ç±»å‹ï¼Œåªå¥½æ‰‹åŠ¨æ¨¡æ‹Ÿï¼Œäºæ˜¯åˆç”¨Cè¯­è¨€å®ç°äº†ä¸€éï¼š

**ç»™å®šä¸€ä¸ªshortå‹æ•°æ®-12345ï¼Œåˆ†åˆ«è½¬ä¸ºintã€unsigned shortã€unsigned intã€floatç±»å‹çš„æ•°æ®**

```c
#include <stdio.h>

int main() {
    short s = -12345;
    int i = s;
    unsigned short us = s;
    unsigned int ui = s;
    float f = s;
    printf("s = %d, %#x\n", s, s);
    printf("i = %d, %#x\n", i, i);
    printf("us = %u, %#x\n", us, us);
    printf("ui = %u, %#x\n", ui, ui);
    printf("f = %f\n", f);
    return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```c
s = -12345, 0xffffcfc7
i = -12345, 0xffffcfc7
us = 53191, 0xcfc7
ui = 4294954951, 0xffffcfc7
f = -12345.000000
```

**ç»™å®šä¸€ä¸ªintå‹æ•°æ®2147483647ï¼Œåˆ†åˆ«è½¬ä¸ºshortã€unsigned shortã€unsigned intã€floatç±»å‹çš„æ•°æ®**

```c
#include <stdio.h>

int main() {
    int i = 2147483647;
    short s = i;
    unsigned short us = i;
    unsigned int ui = i;
    float f = i;
    printf("i = %d, %#x\n", i, i);
    printf("s = %d, %#x\n", s, s);
    printf("us = %u, %#x\n", us, us);
    printf("ui = %u, %#x\n", ui, ui);
    printf("f = %f\n", f);
    return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```c
i = 2147483647, 0x7fffffff
s = -1, 0xffffffff
us = 65535, 0xffff
ui = 2147483647, 0x7fffffff
f = 2147483648.000000
```

**ç»™å®šä¸€ä¸ªfloatå‹æ•°æ®123456.789e5ï¼Œè½¬æ¢æˆdoubleå‹æ•°æ®**

```c
#include <stdio.h>

int main() {
    float f = 123456.789e5;
    double d = f;
    printf("f = %f, %a\n", f, f);
    printf("d = %f, %a\n", d, d);
    return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```c
f = 12345678848.000000, 0x1.6fee0ep+33
    d = 12345678848.000000, 0x1.6fee0ep+33
```

**ç»™å®šä¸€ä¸ªdoubleå‹æ•°æ®123456.789e5ï¼Œè½¬æ¢æˆfloatå‹æ•°æ®**

```c
#include <stdio.h>

int main() {
    double d = 123456.789e5;
    float f = d;
    printf("d = %f, %a\n", d, d);
    printf("f = %f, %a\n", f, f);
    return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```c
d = 12345678900.000000, 0x1.6fee0e1ap+33
    f = 12345678848.000000, 0x1.6fee0ep+33
```

**æŒ‰shortå’Œunsigned shortç±»å‹åˆ†åˆ«å¯¹-12345è¿›è¡Œå·¦ç§»2ä½å’Œå³ç§»2ä½æ“ä½œ**

```c
#include <stdio.h>

int main() {
    short s = -12345;
    unsigned short us = s;
    printf("s = %d, %#x\n", s, s);
    printf("så·¦ç§»2ä½: %d, %#x\n", s << 2, s << 2);
    printf("så³ç§»2ä½: %d, %#x\n", s >> 2, s >> 2);
    printf("us = %u, %#x\n", us, us);
    printf("uså·¦ç§»2ä½: %u, %#x\n", us << 2, us << 2);
    printf("uså³ç§»2ä½: %u, %#x\n", us >> 2, us >> 2);
    return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```c
s = -12345, 0xffffcfc7
så·¦ç§»2ä½: -49380, 0xffff3f1c
så³ç§»2ä½: -3087, 0xfffff3f1
us = 53191, 0xcfc7
uså·¦ç§»2ä½: 212764, 0x33f1c
uså³ç§»2ä½: 13297, 0x33f1
```

**floatå‹æ•°æ®æ˜¯å¦æ€»èƒ½è½¬æ¢æˆç­‰å€¼çš„doubleå‹æ•°æ®ï¼Ÿ**

æ˜¯çš„ï¼Œfloatç±»å‹çš„æ•°æ®å¯ä»¥è½¬æ¢ä¸ºdoubleç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯å¯èƒ½ä¼šç²¾åº¦ä¸¢å¤±ã€‚

**é•¿æ•°è¢«æˆªæ–­æˆçŸ­æ•°åå¯èƒ½å‘ç”Ÿä»€ä¹ˆç°è±¡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ**

å½“ä¸€ä¸ªé•¿æ•°è¢«æˆªæ–­æˆçŸ­æ•°åï¼Œå¦‚æœæˆªæ–­çš„éƒ¨åˆ†è¶…è¿‡äº†çŸ­æ•°æ‰€èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼Œå°±ä¼šå‘ç”Ÿæ•°æ®æº¢å‡ºï¼Œå³ç»“æœä¸å†å‡†ç¡®ã€‚è¿™æ˜¯å› ä¸ºé•¿æ•°å’ŒçŸ­æ•°çš„å­—èŠ‚æ•°ä¸ä¸€æ ·ï¼Œé•¿æ•°é€šå¸¸å ç”¨4ä¸ªå­—èŠ‚æˆ–8ä¸ªå­—èŠ‚ï¼Œè€ŒçŸ­æ•°é€šå¸¸åªå ç”¨2ä¸ªå­—èŠ‚ï¼Œå› æ­¤çŸ­æ•°èƒ½å¤Ÿè¡¨ç¤ºçš„æ•°å€¼èŒƒå›´æ¯”é•¿æ•°å°ã€‚

**Cè¯­è¨€ä¸­ç§»ä½æ“ä½œè§„åˆ™ä¸æ“ä½œå¯¹è±¡çš„æ•°æ®ç±»å‹æœ‰å…³å—ï¼Ÿ**

æ˜¯çš„ï¼ŒCè¯­è¨€ä¸­ç§»ä½æ“ä½œçš„è§„åˆ™ä¸æ“ä½œå¯¹è±¡çš„æ•°æ®ç±»å‹æœ‰å…³ã€‚å¯¹äºæœ‰ç¬¦å·æ•°ï¼Œå³ç§»æ“ä½œä¼šä¿ç•™ç¬¦å·ä½ï¼ˆå³æœ€é«˜ä½ï¼‰ï¼Œè€Œå·¦ç§»æ“ä½œä¸ä¼šã€‚å¯¹äºæ— ç¬¦å·æ•°ï¼Œå·¦å³ç§»æ“ä½œéƒ½ä¸ä¼šä¿ç•™ç¬¦å·ä½ã€‚å¦å¤–ï¼Œç§»ä½æ“ä½œä¼šå°†è¶…å‡ºæ•°æ®ç±»å‹ä½æ•°çš„ä½æ•°æˆªæ–­ã€‚

**å·¦ç§»2ä½å’Œå³ç§»2ä½æ“ä½œåˆ†åˆ«ç›¸å½“äºæ‰©å¤§å’Œç¼©å°å‡ å€ï¼Ÿ**

å·¦ç§»nä½ç›¸å½“äºå°†æ•°å€¼ä¹˜ä»¥2çš„næ¬¡æ–¹ï¼Œå³ç§»nä½ç›¸å½“äºå°†æ•°å€¼é™¤ä»¥2çš„næ¬¡æ–¹ã€‚å› æ­¤ï¼Œå·¦ç§»2ä½ç›¸å½“äºå°†æ•°å€¼æ‰©å¤§4å€ï¼Œå³ç§»2ä½ç›¸å½“äºå°†æ•°å€¼ç¼©å°4å€ã€‚

# [åˆ†å¸ƒå¼è®¡ç®—åŸç†ä¸åº”ç”¨ ç¬¬2æ¬¡ä½œä¸š](/blog/cz22q87un2krn5hb) (March 14, 2023)

#### ä¸‰ã€ä¸­å›½çŸ¥ç½‘â€”â€”ä¸»é¡µ


1. åœ¨ä¸»é¡µä¸Š**è¡Œä¸šçŸ¥è¯†æœåŠ¡ä¸çŸ¥è¯†ç®¡ç†å¹³å°**æˆ–è€…**ä¸“é¢˜çŸ¥è¯†åº“**,æ‰¾ä¸è‡ªå·±ä¸“ä¸šç›¸å…³çš„å¹³å°



![](https://cdn.muspimerol.site/image-20230301204621890.png)



![](https://cdn.muspimerol.site/image-20230301204721402.png)



![](https://cdn.muspimerol.site/20230301205001.png)



![](https://cdn.muspimerol.site/20230301205102.png)



2. åœ¨å‡ºç‰ˆå¹³å°çš„é€‰åˆŠæŠ•ç¨¿æ ç›®ï¼ŒæŸ¥æ‰¾ä¸è‡ªå·±ä¸“ä¸šç›¸å…³çš„æœŸåˆŠ



![](https://cdn.muspimerol.site/image-20230301205709696.png)



![](https://cdn.muspimerol.site/image-20230301205751817.png)



![](https://cdn.muspimerol.site/image-20230301205834514.png)



![](https://cdn.muspimerol.site/image-20230301210107066.png)



![](https://cdn.muspimerol.site/image-20230301210132507.png)



3. åœ¨å¤§æ•°æ®ç ”ç©¶å¹³å°å­¦æœ¯çƒ­ç‚¹ï¼ŒæŸ¥æ‰¾è‡ªå·±ä¸“ä¸šçš„å­¦æœ¯çƒ­ç‚¹



![](https://cdn.muspimerol.site/image-20230301210317403.png)



![](https://cdn.muspimerol.site/20230301210845.png)



4. åœ¨çŸ¥è¯†å…ƒæ£€ç´¢ä¸­ç‚¹å‡»æŒ‡æ•°ï¼Œç„¶åæ£€ç´¢è‡ªå·±ä¸“ä¸šçš„çƒ­é—¨ä¸»é¢˜ï¼Œæ£€ç´¢å®ŒåæŸ¥çœ‹å„ä¸ªç»“æœ



![](https://cdn.muspimerol.site/image-20230301211013812.png)



![](https://cdn.muspimerol.site/image-20230301211106433.png)



![](https://cdn.muspimerol.site/image-20230301211404149.png)



![](https://cdn.muspimerol.site/20230301211817.png)



5. åœ¨[CNKIå­¦æœ¯æœç´¢](https://scholar.cnki.net/)ä¸­æœç´¢äººå·¥æ™ºèƒ½å’Œå¤§æ•°æ®çš„å­¦æœ¯è®ºæ–‡



![](https://cdn.muspimerol.site/20230301212209.png)



![](https://cdn.muspimerol.site/20230301212640.png)



![](https://cdn.muspimerol.site/20230301212418.png)





#### ä¸‰ã€ä¸­å›½çŸ¥ç½‘â€”â€”åˆ†æä¸å…³è”åŠŸèƒ½


1. è¯·ä½¿ç”¨é«˜çº§æ£€ç´¢ï¼Œ æ£€ç´¢è¯ä¸ºâ€œå¤§æ•°æ®andäººå·¥æ™ºèƒ½â€è¿›è¡Œæ£€ç´¢ï¼Œåœ¨æ£€ç´¢ç»“æœé¡µé¢è¿›è¡Œå¦‚ä¸‹ç»ƒä¹ 



![](https://cdn.muspimerol.site/20230301213159.png)



2. åœ¨æ£€ç´¢ç»“æœé¡µé¢å·¦ä¾§ä¸»é¢˜ã€æ–‡çŒ®æ¥æºã€å­¦ç§‘ã€ä½œè€…ã€æœºæ„ã€åŸºé‡‘ã€æ–‡çŒ®æ¥æºï¼Œç‚¹å‡»å°±å¯ä»¥è¿›è¡Œåˆ†æï¼Œå¤§å®¶ç»ƒä¹ ä¸»é¢˜çš„äº¤å‰åˆ†æã€æœºæ„åˆ†æ



![](https://cdn.muspimerol.site/20230314170909.png)



![](https://cdn.muspimerol.site/20230314171011.png)



![](https://cdn.muspimerol.site/20230314171104.png)



![](https://cdn.muspimerol.site/20230314171213.png)



![](https://cdn.muspimerol.site/20230314171312.png)



![](https://cdn.muspimerol.site/20230314171356.png)



![](https://cdn.muspimerol.site/20230314171422.png)



3. åœ¨æ£€ç´¢ç»“æœé¡µé¢çš„â€œå¯¼å‡ºä¸åˆ†æâ€æ ç›®é‡Œé¢â€œå¯è§†åŒ–åˆ†æâ€ï¼Œæœ‰ä¸¤ç§åˆ†ææ–¹å¼ï¼šä¸€ç§æ˜¯å·²é€‰ç»“æœè¿›è¡Œåˆ†æï¼Œä¸€ç§æ˜¯å…¨éƒ¨ç»“æœåˆ†æï¼Œåˆ†åˆ«è¿›è¡Œç»ƒä¹ 



![](https://cdn.muspimerol.site/20230314171513.png)



![](https://cdn.muspimerol.site/%E7%81%AB%E7%8B%90%E6%88%AA%E5%9B%BE_2023-03-14T09-17-45.499Z.png)



![](https://cdn.muspimerol.site/20230314171924.png)



![](https://cdn.muspimerol.site/20230314172014.png)



4. æ£€ç´¢ç»“æœä¸­ï¼Œç‚¹å‡»ä¸€æ¡å¼•ç”¨æœ€é«˜çš„è®°å½•ï¼Œåœ¨è¯¥è®°å½•çš„é¡µé¢ä¸Šï¼ŒæŸ¥çœ‹æ ¸å¿ƒæ–‡çŒ®æ¨èã€å¼•æ–‡ç½‘ç»œ,ä»¥åŠç›¸å…³æ¨èä¸­ç›¸ä¼¼æ–‡çŒ®ã€è¯»è€…æ¨èæ–‡çŒ®



![](https://cdn.muspimerol.site/20230314172224.png)



![](https://cdn.muspimerol.site/20230314172552.png)



![](https://cdn.muspimerol.site/%E7%81%AB%E7%8B%90%E6%88%AA%E5%9B%BE_2023-03-14T09-26-43.461Z.png)



![](https://cdn.muspimerol.site/20230314172834.png)



![](https://cdn.muspimerol.site/20230314172828.png)



5. æ£€ç´¢ç»“æœä¸­ï¼Œç‚¹å‡»ä¸€æ¡å¼•ç”¨æœ€é«˜çš„è®°å½•ï¼Œåœ¨è¯¥è®°å½•çš„é¡µé¢ä¸Šï¼Œç‚¹å‡»ä¸€ä¸ªå…³é”®è¯ï¼Œè¿›å…¥è¯¥å…³é”®è¯çš„çŸ¥ç½‘èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è¯ç›¸å…³è¯ã€ç›¸ä¼¼è¯ã€å…³é”®æ–‡çŒ®ã€ç›¸ä¼¼æ–‡çŒ®ã€ç›¸å…³ä½œè€…å’Œæœºæ„



![](https://cdn.muspimerol.site/20230314173008.png)



![](https://cdn.muspimerol.site/%E7%81%AB%E7%8B%90%E6%88%AA%E5%9B%BE_2023-03-14T09-30-49.596Z.png)



#### ä¸‰ã€ä¸­å›½çŸ¥ç½‘â€”â€”åº”ç”¨


1. æ£€ç´¢2020å¹´ä»¥æ¥ï¼Œâ€œæ¨èç³»ç»Ÿâ€çš„ç›¸å…³æ–‡çŒ®



![](https://cdn.muspimerol.site/20230314173500.png)



2. æ£€ç´¢åŒ—äº¬å¸ˆèŒƒå¤§å­¦é™ˆæœ¨æ³•é™¢å£«æŒ‡å¯¼çš„åšå£«è®ºæ–‡



![](https://cdn.muspimerol.site/20230314174511.png)



3. æ£€ç´¢2000-2019å¹´æœ‰å…³â€œå‘é‡ç©ºé—´æ¨¡å‹â€çš„æ–‡çŒ®ã€‚è¦æ±‚æ£€ç´¢è¯å‡ºç°åœ¨è®ºæ–‡çš„æ ‡é¢˜ä¸­ï¼Œæ£€ç´¢ç»“æœæŒ‰è¢«å¼•é¢‘æ¬¡æ’åºï¼ˆè¯•æ¯”è¾ƒæ¨¡ç³Š/ç²¾ç¡®åŒ¹é…å¯¹æ£€ç´¢ç»“æœçš„å½±å“ï¼‰ï¼Œå¹¶å¯¼å‡º5ç¯‡ä»¥ä¸Šæ–‡çŒ®



![](https://cdn.muspimerol.site/20230314203534.png)



![](https://cdn.muspimerol.site/20230314203619.png)



![](https://cdn.muspimerol.site/20230314203643.png)



4. åˆ†åˆ«ç”¨CAJæ ¼å¼å’ŒPDFæ ¼å¼ï¼Œä¸‹è½½ä¸¤ç¯‡ä»¥ä¸Šé¢˜ç›®çš„æ£€ç´¢ç»“æœ



![](https://cdn.muspimerol.site/20230314203811.png)



![](https://cdn.muspimerol.site/20230314203846.png)



#### å››ã€SCIEæ•°æ®åº“


1. åœ¨ã€ŠActa Informaticaã€‹æ‚å¿—ä¸­æ£€ç´¢2000å¹´ä»¥æ¥ã€ç¯‡åä¸­å«æœ‰XMLçš„æ–‡ç« ï¼Œå¹¶è¦æ±‚æ£€ç´¢ç»“æœæŒ‰ç…§æ–°é¢–åº¦æ’åº



![](https://cdn.muspimerol.site/20230314204751.png)



![](https://cdn.muspimerol.site/%E7%81%AB%E7%8B%90%E6%88%AA%E5%9B%BE_2023-03-14T12-50-03.559Z.png)



2. æ£€ç´¢æœ‰å…³è®¡ç®—æœºæ•°æ®é€šè®¯ç½‘ç»œç ”ç©¶æ–¹é¢çš„æœŸåˆŠè®ºæ–‡åˆ—å‡ºä¸»è¦ç ”ç©¶æ–¹å‘å’Œç ”ç©¶æœºæ„ã€‚æŒ‰è¢«å¼•æ¬¡æ•°æ’åºï¼Œä¸‹è½½å‡ ç¯‡çƒ­ç‚¹è®ºæ–‡çš„å…¨æ–‡ï¼Œç”¨DOIå·æˆ–è€…æ ‡é¢˜åœ¨ï¼ˆScopusï¼‰ä¸Šä¸‹è½½



![](https://cdn.muspimerol.site/20230314205252.png)



![](https://cdn.muspimerol.site/20230314205403.png)



![](https://cdn.muspimerol.site/20230314205433.png)



![](https://cdn.muspimerol.site/20230314210208.png)



3. åˆ©ç”¨â€œä¸“ä¸šæ£€ç´¢â€æ£€ç´¢åŒ—äº¬å¸ˆèŒƒå¤§å­¦XXæ•™æˆè¿‘5å¹´å‘è¡¨çš„è®ºæ–‡ï¼Œå¹¶æŸ¥çœ‹å…¶å‘è¡¨è®ºæ–‡çš„HæŒ‡æ•°



![](https://cdn.muspimerol.site/20230314211029.png)



![](https://cdn.muspimerol.site/20230314211110.png)



![](https://cdn.muspimerol.site/%E7%81%AB%E7%8B%90%E6%88%AA%E5%9B%BE_2023-03-14T13-09-33.791Z.png)



4. æŸ¥æ‰¾â€œ 2019 IEEE/CVF CONFERENCE ON COMPUTER VISION AND PATTERN RECOGNITION (CVPR 2019) â€ä¼šè®®ä¸Šå‘è¡¨çš„æœ‰å…³è¡¨å¾å­¦ä¹ çš„æ–‡ç« ï¼Œå¯¼å‡ºè¢«å¼•ç”¨æ¬¡æ•°æœ€å¤šçš„å‡ ç¯‡æ–‡ç« ä½œä¸ºå‚è€ƒæ–‡çŒ®



![](https://cdn.muspimerol.site/20230314211344.png)



![](https://cdn.muspimerol.site/20230314211520.png)



![](https://cdn.muspimerol.site/20230314212224.png)



#### äº”ã€Springer


1. æ£€ç´¢æœ‰å…³è§†è§‰å…³ç³»æ£€æµ‹æ–¹é¢çš„æ–‡çŒ®ï¼ˆæ£€ç´¢è¯ï¼švisual relationship; recognitionï¼‰å¯ä»¥æ£€ç´¢åˆ°å¤šå°‘ç¯‡æ–‡çŒ®ï¼Ÿåœ¨è¿™äº›æ–‡çŒ®ä¸­ï¼Œæœ‰å‡ æœ¬å›¾ä¹¦ï¼Ÿè¯·æè¿°å…¶ä¸­ä¸€æœ¬ä¹¦çš„å¤–éƒ¨ç‰¹å¾ï¼ˆä¹¦åã€å‡ºç‰ˆç¤¾ã€å­¦ç§‘åˆ†ç±»ç­‰ä¿¡æ¯ï¼‰



![](https://cdn.muspimerol.site/20230314212712.png)



è¿™æœ¬ä¹¦çš„ä¹¦åä¸ºã€Šè®¡ç®—æœºè§†è§‰å‚è€ƒæŒ‡å—ã€‹ï¼ˆComputer Vision: A Reference Guideï¼‰ï¼Œç”±Katsushi Ikeuchiï¼ˆæ—¥æœ¬ä¸œäº¬å¤§å­¦æ•™æˆï¼‰ä¸»ç¼–ï¼Œç”±Springerå‡ºç‰ˆã€‚è¯¥ä¹¦æ˜¯ä¸€æœ¬å‚è€ƒä¹¦ï¼Œä¸»è¦ä¸ºè¯»è€…æä¾›æ˜“äºè®¿é—®çš„è®¡ç®—æœºè§†è§‰ç›¸å…³ä¿¡æ¯ã€‚è¯¥ä¹¦çš„ç›®å½•é‡‡ç”¨A-Zæ ¼å¼ï¼Œæ¶µç›–äº†è®¡ç®—æœºè§†è§‰é¢†åŸŸå†…çš„ç†è®ºå’Œå®è·µç­‰å„ä¸ªæ–¹é¢ï¼Œå¹¶åŒ…æ‹¬è¶…è¿‡240ä¸ªæ¡ç›®å’Œ3700å¤šä¸ªå‚è€ƒæ–‡çŒ®ã€‚è¯¥ä¹¦çš„ä½œè€…æ¥è‡ªå­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œï¼Œè¶…è¿‡200ä½ï¼Œæ¯ä¸ªæ¡ç›®éƒ½æœ‰åŒä¹‰è¯ã€å®šä¹‰å’Œè®¨è®ºï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„äº¤å‰å‚è€ƒæ”¯æŒï¼Œä»¥æ”¯æŒé«˜æ•ˆã€ç”¨æˆ·å‹å¥½çš„æœç´¢ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿç«‹å³è®¿é—®ç›¸å…³ä¿¡æ¯ã€‚è¯¥ä¹¦é€‚åˆè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„åˆå­¦è€…å’Œå…¶ä»–é¢†åŸŸçš„ä¸“ä¸šäººå‘˜è®¿é—®è¿™äº›é‡è¦ä¿¡æ¯ï¼Œä½†ä»–ä»¬å¯èƒ½æ²¡æœ‰æ—¶é—´é˜…è¯»å®Œæ•´ä¸ªç›¸å…³ä¸»é¢˜çš„æ–‡æœ¬ã€‚è¯¥ä¹¦å±äºè®¡ç®—æœºç§‘å­¦å’Œå›¾åƒå¤„ç†è¿™ä¸€å­¦ç§‘åˆ†ç±»ã€‚



2. æ£€ç´¢â€œäººå·¥ç¥ç»ç½‘ç»œä½œä¸ºTVä¿¡å·å¤„ç†å™¨â€çš„æœ‰å…³æ–‡çŒ®ï¼ˆæ£€ç´¢è¯ï¼šneural network;TV or television;signalï¼‰å¯ä»¥æ£€ç´¢åˆ°å¤šå°‘ç¯‡æ–‡ç« ï¼ŸBiomedicineæ–¹é¢çš„Articleæœ‰å¤šå°‘ï¼Ÿè¯·æè¿°å…¶ä¸­æœ€æ–°ä¸€ç¯‡è®ºæ–‡çš„æœŸåˆŠæŠ•ç¨¿é“¾æ¥ï¼ˆæ³¨æ„TV or televisionçš„è¾“å…¥æ¡†æ ¼é€‰æ‹©ï¼‰



![](https://cdn.muspimerol.site/20230314213253.png)

# [æ— æ ‡é¢˜æ–‡æ¡£](/blog/gdm85l7w2p0klcn1) (March 9, 2023)

[new-bingo / main.py](https://gitee.com/re-bingo/new-bingo/blob/ff7944438e37cfaf381fcfdf1781bc21a2fbd69c/main.py)

è¿™é‡Œå†™äº†ä¸ªç®€ç­”çš„pythonçš„é™æ€æ–‡ä»¶æœåŠ¡å™¨

å°†æ¥å‡†å¤‡æ·»åŠ ï¼š

+ æŒä¹…åŒ–å‹ç¼©å¹¶å°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜
+ æ‡’å‹ç¼©
+ å°† etag ç¼“å­˜åœ¨å†…å­˜ä¸­

# [ä¸€ä¸ªæ§åˆ¶ChatGPTçš„tokençˆ†ç‚¸çš„æƒ³æ³•](/blog/gaaw48y1ls4getim) (March 9, 2023)

æˆ‘åœ¨è®¾æƒ³ä¸€ç§ï¼Œä»¿ç…§çœŸå®èŠå¤©æ–¹å¼çš„ChatGPTçš„è¯·æ±‚æ–¹å¼ã€‚è¿™åªæ˜¯ä¸€ç§ä¼˜åŒ–ã€‚

ç›®çš„ï¼š

+ å‡å°‘tokenä½¿ç”¨ï¼Œé™ä½æˆæœ¬å¹¶æå‡å›å¤æ¶ˆæ¯å¤§å°ä¸Šé™
+ ä½¿è¯·æ±‚ä½“å¤§å°å’Œtokenæ•°ä¸ä¼šéšç€æ—¶é—´çº¿æ€§å¢é•¿

æ–¹æ³•ï¼š

```toml
[ system è§„åˆ™ ] + [ user æœ€è¿‘ä¸€ä¸ªé—®é¢˜ ] + [ assistant å¯¹æ¶ˆæ¯è®°å½•çš„æŸ¥è¯¢è¯·æ±‚ ] + [ system å›å¤ ]
```

+ è¿”å›ç±»å‹



---

æ²¡æˆåŠŸï¼ŒChatGPTä¸ç†è§£æˆ‘çš„æç¤º

# [æ— æ ‡é¢˜æ–‡æ¡£](/blog/wwtnpczv6feex3al) (March 8, 2023)

temperature å’Œ top_p éƒ½æ˜¯ç”¨äºæ§åˆ¶ç”Ÿæˆæ–‡æœ¬å¤šæ ·æ€§çš„å‚æ•°ï¼Œä½†æ˜¯å®ƒä»¬çš„å®ç°æ–¹å¼å’Œæ•ˆæœç•¥æœ‰ä¸åŒ

+ Temperature æ˜¯é€šè¿‡å¯¹ç”Ÿæˆæ–‡æœ¬çš„æ¦‚ç‡åˆ†å¸ƒè¿›è¡Œæ“ä½œæ¥è¾¾åˆ°æ§åˆ¶å¤šæ ·æ€§çš„æ•ˆæœã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä¼šå°†æ¯ä¸ª token çš„æ¦‚ç‡å€¼é™¤ä»¥ä¸€ä¸ªå°äº 1 çš„æ¸©åº¦å‚æ•°ï¼Œç„¶åå†è¿›è¡Œ softmax è¿ç®—ï¼Œä»¥è·å¾—æ›´å¹³æ»‘çš„åˆ†å¸ƒã€‚å½“æ¸©åº¦å‚æ•°æ¥è¿‘ 0 æ—¶ï¼Œç”Ÿæˆçš„æ–‡æœ¬ä¼šè¶‹äºé‡å¤å’Œå•è°ƒï¼›å½“æ¸©åº¦å‚æ•°è¾ƒå¤§æ—¶ï¼Œç”Ÿæˆçš„æ–‡æœ¬ä¼šå˜å¾—æ›´åŠ éšæœºå’Œå¤šæ ·ã€‚
+ Top-pï¼ˆæˆ– nucleusï¼‰æ˜¯é€šè¿‡å¯¹ç”Ÿæˆæ–‡æœ¬çš„æ¦‚ç‡åˆ†å¸ƒä¸­çš„å‰å‡ ä¸ªæœ€å¯èƒ½çš„ token è¿›è¡Œé‡‡æ ·ï¼Œæ¥è¾¾åˆ°æ§åˆ¶å¤šæ ·æ€§çš„æ•ˆæœã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä¼šæ ¹æ®ä¸€ä¸ªå°äºç­‰äº 1 çš„é˜ˆå€¼å‚æ•°ï¼ŒæŠŠæ¦‚ç‡åˆ†å¸ƒä¸­ç´¯è®¡æ¦‚ç‡è¶…è¿‡è¯¥é˜ˆå€¼çš„ token å»æ‰ï¼Œå†å¯¹å‰©ä¸‹çš„ token è¿›è¡Œå½’ä¸€åŒ–ï¼Œä»ä¸­è¿›è¡Œéšæœºé‡‡æ ·ã€‚å½“é˜ˆå€¼æ¥è¿‘ 0 æ—¶ï¼Œç”Ÿæˆçš„æ–‡æœ¬ä¼šè¶‹äºé‡å¤å’Œå•è°ƒï¼›å½“é˜ˆå€¼è¾ƒå¤§æ—¶ï¼Œç”Ÿæˆçš„æ–‡æœ¬ä¼šå˜å¾—æ›´åŠ éšæœºå’Œå¤šæ ·ã€‚

æ€»çš„æ¥è¯´ï¼ŒTemperature æ›´åŠ ç›´æ¥å’Œè‡ªç”±åº¦è¾ƒå¤§ï¼Œå› ä¸ºå®ƒä¸é™åˆ¶ç”Ÿæˆçš„ token ç§ç±»ï¼›è€Œ Top-p ç›¸å¯¹æ¥è¯´æ›´åŠ ç¨³å®šå’Œå¯æ§ï¼Œå› ä¸ºå®ƒå¯é™åˆ¶ç”Ÿæˆçš„ token ç§ç±»å’Œæ•°é‡ã€‚

---

Temperature å’Œ Top-p è¿™ä¸¤ä¸ªå‚æ•°éƒ½å¯ä»¥ç”¨äºæ§åˆ¶ç”Ÿæˆçš„æ–‡æœ¬çš„å¤šæ ·æ€§ï¼Œè®©æœºå™¨ç”Ÿæˆçš„æ–‡æœ¬çœ‹èµ·æ¥æ›´åŠ è‡ªç„¶ã€ç”ŸåŠ¨ã€æœ‰è¶£ã€‚å®ƒä»¬çš„ä½œç”¨å¯ä»¥ç±»æ¯”äºäººç±»çš„å†™ä½œæ–¹å¼ã€‚

Temperature å¯ä»¥ç±»æ¯”ä¸ºäººç±»çš„å†™ä½œæ—¶çš„æ€è€ƒéš¾åº¦ï¼Œéš¾åº¦è¶Šå¤§ã€è¦æ±‚è¶Šé«˜ï¼Œé‚£å†™å‡ºçš„ä½œå“å¾ˆå¯èƒ½å°±æ›´åŠ çªå‡ºã€ç‹¬ç‰¹ï¼Œä¹Ÿæ›´åŠ æœ‰ä»·å€¼ï¼›ä½†å¦‚æœæ€è€ƒéš¾åº¦è¿‡å¤§ï¼Œä¹Ÿå¯èƒ½å†™å‡ºæ¥çš„ä½œå“è®©è¯»è€…æ„Ÿåˆ°ç¹çã€é‡å¤ã€æ— èŠã€‚å› æ­¤æˆ‘ä»¬ä¼šæ ¹æ®éœ€è¦ï¼Œè°ƒæ•´å’Œæ§åˆ¶è‡ªå·±çš„æ€è€ƒéš¾åº¦ã€‚åœ¨æœºå™¨ç”Ÿæˆæ–‡æœ¬çš„åœºæ™¯ä¸‹ï¼Œè®¾ç½®è¾ƒé«˜çš„ Temperature å‚æ•°å€¼ï¼Œå¯ä»¥è®©æœºå™¨æ›´åŠ éšæœºåœ°é€‰æ‹©ä¸åŒçš„è¯æ±‡ï¼Œå†™å‡ºè¾ƒç‹¬ç‰¹ã€æœ‰è¶£çš„æ–‡ç« ï¼Œä½†å¯èƒ½ä¹Ÿä¼šå¸¦æ¥äº›è®¸é‡å¤çš„é—®é¢˜ã€‚

Top-p åˆ™å¯ä»¥ç±»æ¯”ä¸ºäººç±»å†™ä½œæ—¶çš„è¡¨è¾¾æ–¹å¼ã€‚æˆ‘ä»¬åœ¨å†™ä½œæ—¶ï¼Œé€šå¸¸ä¼šé€‰æ‹©æœ€ç›¸å…³ã€æœ€ç²¾å‡†çš„è¯è¯­ï¼Œæ›´å¤šçš„æ—¶å€™ä¼šä½¿ç”¨ç‰¹å®šçš„è¯æ±‡å’Œè¡¨è¾¾æ–¹å¼ï¼Œè€Œå¹¶éä»»æ„é€‰æ‹©ã€‚æœºå™¨ä¹Ÿå¯ä»¥ç±»ä¼¼åœ°æ“ä½œï¼Œé€šè¿‡ Top-p æ¨¡å¼ï¼Œæ§åˆ¶æœºå™¨åªä»æœ€ç›¸å…³ã€æœ€ç²¾å‡†çš„å•è¯å’ŒçŸ­è¯­ä¸­è¿›è¡Œé€‰å–ï¼Œè€Œè¿‡å¤šçš„éšæœºé€‰æ‹©å°†è¢«æ§åˆ¶åœ¨ä¸€ä¸ªé˜ˆå€¼èŒƒå›´å†…ï¼Œå†™å‡ºæ›´ä¸ºå‡†ç¡®å’Œç²¾ç»†çš„æ–‡ç« ã€‚

# [åˆ’è¯æ£€ç´¢](/blog/yc7ton53db2obhco) (March 8, 2023)

```javascript
function showSelection() {
    let selection = document.getSelection();
    console.log(selection);
    return selection.toString();
}

document.addEventListener("selectionchange", showSelection)
```

# [ä½œä¸š](/blog/zw1b8sdnb6xtocg1) (March 7, 2023)

### ç¬¬1ç«  åˆ†å¸ƒå¼è®¡ç®—æ¦‚è¿°
1. **ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼è®¡ç®—ï¼Ÿå®ƒçš„ä¼˜ç¼ºæ˜¯ä»€ä¹ˆï¼Ÿ**

åˆ†å¸ƒå¼è®¡ç®—æ˜¯ä¸€ç§åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´åˆ†æ•£ä»»åŠ¡å’Œæ•°æ®çš„è®¡ç®—æ¨¡å‹ã€‚è¿™äº›è®¡ç®—æœºé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡å’Œåè°ƒï¼Œä»¥å…±åŒå®Œæˆä¸€ä¸ªä»»åŠ¡æˆ–å¤„ç†ä¸€ä¸ªæ•°æ®é›†åˆã€‚è¿™ç§è®¡ç®—æ¨¡å‹çš„ä¸»è¦ç›®çš„æ˜¯æé«˜è®¡ç®—é€Ÿåº¦å’Œå¯ä¼¸ç¼©æ€§ã€‚

ä¼˜ç‚¹ï¼š

+ é«˜æ€§èƒ½ï¼šåˆ†å¸ƒå¼è®¡ç®—å¯ä»¥åŒæ—¶åˆ©ç”¨å¤šä¸ªè®¡ç®—æœºçš„è®¡ç®—èµ„æºï¼Œä»è€Œæé«˜æ•´ä¸ªç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›å’Œæ€§èƒ½ã€‚
+ å¯ä¼¸ç¼©æ€§ï¼šåˆ†å¸ƒå¼è®¡ç®—å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æˆ–ç§»é™¤è®¡ç®—èµ„æºï¼Œä»¥é€‚åº”ä¸åŒè§„æ¨¡çš„è®¡ç®—ä»»åŠ¡æˆ–æ•°æ®é›†åˆã€‚
+ é«˜å¯ç”¨æ€§ï¼šåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿå¯ä»¥é€šè¿‡å¤åˆ¶å’Œå¤‡ä»½æ•°æ®å’Œè®¡ç®—èŠ‚ç‚¹æ¥æé«˜ç³»ç»Ÿçš„å¯é æ€§å’Œå®¹é”™æ€§ã€‚
+ çµæ´»æ€§ï¼šåˆ†å¸ƒå¼è®¡ç®—å¯ä»¥å°†è®¡ç®—ä»»åŠ¡åˆ†å‰²æˆå°çš„å­ä»»åŠ¡ï¼Œä»¥ä¾¿ä¸åŒçš„è®¡ç®—æœºåˆ†åˆ«å¤„ç†ä¸åŒçš„å­ä»»åŠ¡ï¼Œä»è€Œæé«˜è®¡ç®—çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚

ç¼ºç‚¹ï¼š

+ å¤æ‚æ€§ï¼šåˆ†å¸ƒå¼è®¡ç®—éœ€è¦åœ¨å¤šä¸ªè®¡ç®—æœºä¹‹é—´åè°ƒä»»åŠ¡å’Œæ•°æ®ï¼Œå› æ­¤ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°ç›¸å¯¹å¤æ‚ã€‚
+ æ•°æ®ä¼ è¾“å»¶è¿Ÿï¼šåœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œç”±äºéœ€è¦åœ¨ä¸åŒçš„è®¡ç®—æœºä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°ç½‘ç»œå»¶è¿Ÿå’Œæ•°æ®ä¼ è¾“ç“¶é¢ˆï¼Œå½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚
+ å®‰å…¨æ€§ï¼šåœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œéœ€è¦å¤„ç†å¤šä¸ªè®¡ç®—æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“å’Œå…±äº«ï¼Œå› æ­¤å¿…é¡»é‡‡å–ç›¸åº”çš„å®‰å…¨æªæ–½æ¥ä¿æŠ¤ç³»ç»Ÿçš„æ•°æ®å’Œæœºå¯†ä¿¡æ¯ã€‚
2. **åˆ†å¸ƒå¼è®¡ç®—ä¸å¹¶è¡Œè®¡ç®—çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿ**

åˆ†å¸ƒå¼è®¡ç®—å’Œå¹¶è¡Œè®¡ç®—éƒ½æ˜¯å¤„ç†å¤§è§„æ¨¡è®¡ç®—ä»»åŠ¡çš„æ–¹æ³•ã€‚

åŒºåˆ«ï¼š

+ æ¦‚å¿µä¸åŒï¼šåˆ†å¸ƒå¼è®¡ç®—æ˜¯åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´åˆ†æ•£ä»»åŠ¡å’Œæ•°æ®çš„è®¡ç®—æ¨¡å‹ï¼Œè€Œå¹¶è¡Œè®¡ç®—æ˜¯åœ¨å•ä¸ªè®¡ç®—æœºæˆ–è®¡ç®—æœºé›†ç¾¤ä¸­åŒæ—¶æ‰§è¡Œå¤šä¸ªå¤„ç†å™¨æˆ–æ ¸çš„è®¡ç®—ä»»åŠ¡ã€‚
+ ç³»ç»Ÿç»“æ„ä¸åŒï¼šåˆ†å¸ƒå¼è®¡ç®—é€šå¸¸ç”±å¤šå°ç‹¬ç«‹çš„è®¡ç®—æœºç»„æˆï¼Œè¿™äº›è®¡ç®—æœºé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡å’Œåè°ƒï¼›è€Œå¹¶è¡Œè®¡ç®—é€šå¸¸ç”±å¤šä¸ªå¤„ç†å™¨æˆ–æ ¸ç»„æˆï¼Œè¿™äº›å¤„ç†å™¨æˆ–æ ¸å¯ä»¥åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šæˆ–åœ¨è®¡ç®—æœºé›†ç¾¤ä¸­ã€‚
+ ç¼–ç¨‹æ¨¡å‹ä¸åŒï¼šåœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œç¨‹åºå‘˜éœ€è¦è€ƒè™‘å¦‚ä½•å°†ä»»åŠ¡å’Œæ•°æ®åˆ†å¸ƒåˆ°ä¸åŒçš„è®¡ç®—æœºä¸Šï¼Œå¹¶è¿›è¡Œåè°ƒå’Œé€šä¿¡ï¼›è€Œåœ¨å¹¶è¡Œè®¡ç®—ä¸­ï¼Œç¨‹åºå‘˜éœ€è¦è€ƒè™‘å¦‚ä½•å°†è®¡ç®—ä»»åŠ¡åˆ’åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶åè°ƒè¿™äº›å­ä»»åŠ¡çš„æ‰§è¡Œã€‚

è”ç³»ï¼š

+ ç›®æ ‡ç›¸åŒï¼šåˆ†å¸ƒå¼è®¡ç®—å’Œå¹¶è¡Œè®¡ç®—çš„ç›®æ ‡éƒ½æ˜¯æé«˜è®¡ç®—é€Ÿåº¦å’Œå¤„ç†èƒ½åŠ›ï¼Œä»¥åº”å¯¹å¤§è§„æ¨¡è®¡ç®—ä»»åŠ¡ã€‚
+ æŠ€æœ¯ç›¸äº’å€Ÿé‰´ï¼šåˆ†å¸ƒå¼è®¡ç®—å’Œå¹¶è¡Œè®¡ç®—çš„æŠ€æœ¯åœ¨æŸäº›æ–¹é¢æ˜¯ç›¸äº’å€Ÿé‰´çš„ã€‚ä¾‹å¦‚ï¼Œåˆ†å¸ƒå¼è®¡ç®—ä¸­çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå¯ä»¥ç”¨äºå¹¶è¡Œè®¡ç®—ä¸­çš„æ•°æ®å…±äº«å’Œè®¿é—®ã€‚
+ åº”ç”¨é¢†åŸŸç›¸åŒï¼šåˆ†å¸ƒå¼è®¡ç®—å’Œå¹¶è¡Œè®¡ç®—éƒ½å¯ä»¥åº”ç”¨äºç§‘å­¦è®¡ç®—ã€å¤§æ•°æ®åˆ†æã€å›¾åƒå¤„ç†ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸã€‚
3. **ç®€è¿°ä¸€ä¸‹ä»€ä¹ˆæ˜¯CAPå®šç†ï¼Ÿä¸¾ä¾‹è¯´æ˜CAPä¸èƒ½åŒæ—¶æ»¡è¶³ã€‚**

CAPå®šç†æ˜¯åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸçš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼Œå®ƒæŒ‡å‡ºåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªè¦æ±‚ï¼š

+ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çœ‹åˆ°çš„æ•°æ®æ˜¯ç›¸åŒçš„ï¼Œå³æ•°æ®æ›´æ–°æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šéƒ½æ˜¯åŒæ—¶å®Œæˆçš„ã€‚
+ å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼šç³»ç»Ÿèƒ½å¤Ÿä¿è¯åœ¨ä¸€å®šæ—¶é—´å†…å¯¹äºç”¨æˆ·çš„è¯·æ±‚éƒ½èƒ½å¤Ÿè¿”å›å“åº”ç»“æœï¼Œå³ç³»ç»Ÿä¿è¯äº†æœåŠ¡çš„è¿ç»­æ€§ã€‚
+ åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰ï¼šç³»ç»Ÿèƒ½å¤Ÿåœ¨é‡åˆ°ç½‘ç»œåˆ†åŒºï¼ˆç½‘ç»œæ•…éšœæˆ–ç½‘ç»œå»¶è¿Ÿç­‰ï¼‰çš„æƒ…å†µä¸‹ä»ç„¶èƒ½å¤Ÿç»§ç»­å·¥ä½œã€‚

ä¸¾ä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿç”¨äºåœ¨çº¿è´­ç‰©ï¼Œç³»ç»Ÿå‡ºç°ç½‘ç»œæ•…éšœæˆ–åˆ†åŒº

å¦‚æœç³»ç»Ÿä¼˜å…ˆä¿è¯ä¸€è‡´æ€§ï¼Œé‚£ä¹ˆç³»ç»Ÿåœ¨é‡åˆ°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œå¯èƒ½ä¼šç‰ºç‰²å¯ç”¨æ€§ï¼Œå› ä¸ºç³»ç»Ÿéœ€è¦ç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®åŒæ­¥å®Œæˆæ‰èƒ½æä¾›æœåŠ¡ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´ç”¨æˆ·æ— æ³•è®¿é—®ç³»ç»Ÿï¼Œå³ç³»ç»Ÿä¸å¯ç”¨ã€‚

å¦‚æœç³»ç»Ÿä¼˜å…ˆä¿è¯å¯ç”¨æ€§ï¼Œé‚£ä¹ˆç³»ç»Ÿåœ¨é‡åˆ°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºå„ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®å¯èƒ½å­˜åœ¨æ—¶é—´å·®å¼‚ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´ç”¨æˆ·åœ¨è´­ç‰©æ—¶çœ‹åˆ°çš„å•†å“ä¿¡æ¯ä¸ä¸€è‡´ï¼Œå³ç³»ç»Ÿç¼ºä¹ä¸€è‡´æ€§ã€‚

å¦‚æœç³»ç»Ÿä¼˜å…ˆä¿è¯åˆ†åŒºå®¹é”™æ€§ï¼Œé‚£ä¹ˆç³»ç»Ÿåœ¨é‡åˆ°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æˆ–ç³»ç»Ÿä¸å¯ç”¨çš„æƒ…å†µï¼Œä½†è¿™æ ·å¯ä»¥ä¿è¯æ•´ä¸ªç³»ç»Ÿåœ¨ç½‘ç»œåˆ†åŒºæ¢å¤ä¹‹åä»ç„¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚

å› æ­¤ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡å’Œå®ç°ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œæƒè¡¡ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§çš„å…³ç³»ï¼Œé€‰æ‹©åˆé€‚çš„ç­–ç•¥å’ŒæŠ€æœ¯æ¥å®ç°ç³»ç»Ÿçš„è¦æ±‚ã€‚

4. **ç®€è¿°ä¸€ä¸‹ä»€ä¹ˆBASEç†è®ºï¼Œå®ƒä¸CAPçš„å…³ç³»ã€‚**

BASEç†è®ºæ˜¯åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸçš„å¦ä¸€ä¸ªé‡è¦ç†è®ºï¼Œå®ƒæŒ‡å‡ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ä¸€å®šè¦æ±‚æ»¡è¶³ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼‰çš„ç‰¹æ€§ï¼Œè€Œå¯ä»¥è¿½æ±‚æ›´é«˜çš„å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚

BASEæ˜¯æŒ‡ä»¥ä¸‹ä¸‰ä¸ªè¦ç´ ï¼š

+ åŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ï¼šç³»ç»Ÿèƒ½å¤Ÿä¿è¯åœ¨å‡ºç°æ•…éšœæˆ–æ€§èƒ½ä¸‹é™çš„æƒ…å†µä¸‹ï¼Œä»ç„¶èƒ½å¤Ÿæ­£å¸¸å“åº”ç”¨æˆ·è¯·æ±‚ï¼Œå³ç³»ç»Ÿä¿è¯äº†æœåŠ¡çš„è¿ç»­æ€§ã€‚
+ è½¯çŠ¶æ€ï¼ˆSoft stateï¼‰ï¼šç³»ç»Ÿå…è®¸å­˜åœ¨ä¸€æ®µæ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå³å…è®¸ä¸€äº›æ•°æ®åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯è¿‡æœŸçš„ï¼Œè€Œä¸è¦æ±‚ç«‹å³æ›´æ–°æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„æ•°æ®ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚
+ æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually Consistentï¼‰ï¼šç³»ç»Ÿä¿è¯åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®æœ€ç»ˆè¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼Œå³ç³»ç»Ÿå…è®¸ä¸€æ®µæ—¶é—´çš„æ•°æ®ä¸ä¸€è‡´ï¼Œä½†æœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´çŠ¶æ€ã€‚

ä¸CAPç†è®ºç›¸æ¯”ï¼ŒBASEç†è®ºæ›´åŠ å¼ºè°ƒåˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œå®¹é”™æ€§ï¼Œè€Œç›¸å¯¹å¼±åŒ–ä¸€è‡´æ€§ã€‚

### ç¬¬2ç«  åˆ†å¸ƒå¼è®¡ç®—æ³›å‹æ¦‚è¿°
1. **åˆ†æqqå’Œå¾®ä¿¡é‡‡ç”¨çš„é€šä¿¡æŠ€æœ¯**

qqå’Œå¾®ä¿¡éƒ½ä½¿ç”¨äº†TCPåè®®å’ŒHTTPåè®®ï¼Œæ²¡æœ‰ç”¨åˆ°UDPåè®®ã€‚TCPåè®®æ˜¯ä¸€ç§é¢å‘è¿æ¥ï¼Œå¯é çš„ä¼ è¾“åè®®ï¼ŒHTTPåè®®æ˜¯ä¸€ç§åº”ç”¨å±‚çš„è¯·æ±‚-å“åº”åè®®ã€‚qqå’Œå¾®ä¿¡é€šè®¯ä¸­ä½¿ç”¨äº†HTTPçŸ­è¿æ¥å’ŒTCPé•¿è¿æ¥ï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°UDPï¼Œå…¶ä¸­ç™»é™†éªŒè¯å’Œå¤´åƒèº«ä»½ä¿¡æ¯åŠæ—¥å¿—ç­‰åŠŸèƒ½é‡‡ç”¨çš„HTTPï¼Œæ–‡æœ¬æ¶ˆæ¯ã€è¯­éŸ³æ¶ˆæ¯ã€è§†é¢‘æ¶ˆæ¯ã€å›¾ç‰‡æ¶ˆæ¯è¿™äº›ä½¿ç”¨çš„æ˜¯TCPé•¿è¿æ¥ã€‚é€šè¿‡å¿ƒè·³åŒ…æ¥ç»´æŠ¤é•¿è¿æ¥çŠ¶æ€ï¼Œ300Sä¸€ä¸ªå¿ƒè·³ã€‚qqè¿˜æ”¯æŒè¯­éŸ³å’Œè§†é¢‘èŠå¤©ï¼Œæ˜¾ç„¶,è¿™ç§åœºæ™¯ç”¨ç‚¹å¯¹ç‚¹çš„P2PæŠ€æœ¯æœ€åˆé€‚ï¼Œåœ¨æµè§ˆå™¨é‡Œ,å¯ä»¥ç”¨WebRTCå®ç°.WebRTCé‡Œå®ç°ç‚¹å¯¹ç‚¹çš„P2Pé€šä¿¡,éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨æ¥å¸®åŠ©å»ºç«‹è¿æ¥

2. **æ¯”è¾ƒåˆ†æ google çš„ gRPC, facebook thrift, Hadoop avro**

gRPCã€Thriftå’ŒAvroéƒ½æ˜¯ä¸€äº›æµè¡Œçš„RPCæ¡†æ¶ï¼Œå®ƒä»¬å¯ä»¥è®©ä¸åŒè¯­è¨€å’Œå¹³å°çš„æœåŠ¡ä¹‹é—´è¿›è¡Œé«˜æ•ˆçš„é€šä¿¡ã€‚å®ƒä»¬éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œæ ¹æ®ä¸åŒçš„åœºæ™¯å’Œéœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚çš„æ¡†æ¶ã€‚

+ gRPCæ˜¯Googleå¼€æºçš„åŸºäºHTTP/2å’ŒProtobufçš„RPCæ¡†æ¶ï¼Œå®ƒæ”¯æŒå¤šç§è¯­è¨€å’Œå¹³å°ï¼Œæä¾›äº†åŒå‘æµã€æ‹¦æˆªå™¨ã€è´Ÿè½½å‡è¡¡ç­‰ç‰¹æ€§ã€‚gRPCçš„ä¼˜ç‚¹æ˜¯æ€§èƒ½é«˜ã€æ¥å£å®šä¹‰ç®€æ´ã€è·¨è¯­è¨€æ”¯æŒå¥½ã€æ”¯æŒæµå¼ä¼ è¾“ï¼›ç¼ºç‚¹æ˜¯ä¸æ”¯æŒæµè§ˆå™¨å®¢æˆ·ç«¯ã€å¯¹ç½‘ç»œç¯å¢ƒè¦æ±‚é«˜ã€Protobufä¸æ”¯æŒmapç­‰å¤æ‚ç±»å‹ã€‚
+ Thriftæ˜¯Facebookå¼€æºçš„åŸºäºTCPå’ŒäºŒè¿›åˆ¶åè®®çš„RPCæ¡†æ¶ï¼Œå®ƒä¹Ÿæ”¯æŒå¤šç§è¯­è¨€å’Œå¹³å°ï¼Œæä¾›äº†å¤šç§ä¼ è¾“å±‚å’Œåè®®å±‚çš„é€‰é¡¹ã€‚Thriftçš„ä¼˜ç‚¹æ˜¯æ€§èƒ½æ›´é«˜ã€åºåˆ—åŒ–å’ŒRPCä¸€ç«™å¼è§£å†³ã€IDLæ”¯æŒmapç­‰å¤æ‚ç±»å‹ï¼›ç¼ºç‚¹æ˜¯æ–‡æ¡£è¾ƒå°‘ã€åŠŸèƒ½è¾ƒå°‘ã€è·¨è¯­è¨€å…¼å®¹æ€§è¾ƒå·®ã€‚
+ Avroæ˜¯Apacheå¼€æºçš„åŸºäºJSONå’ŒäºŒè¿›åˆ¶åè®®çš„æ•°æ®åºåˆ—åŒ–æ¡†æ¶ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨ä½œRPCæ¡†æ¶ï¼Œä½†ä¸»è¦ç”¨äºå¤§æ•°æ®åœºæ™¯ã€‚Avroçš„ä¼˜ç‚¹æ˜¯æ¨¡å¼æ¼”è¿›çµæ´»ã€åºåˆ—åŒ–é€Ÿåº¦å¿«ã€æ•°æ®å‹ç¼©ç‡é«˜ï¼›ç¼ºç‚¹æ˜¯åŠŸèƒ½å•ä¸€ã€IDLä¸å¤Ÿå¼ºå¤§ã€å¯¹Javaæ”¯æŒæœ€å¥½ã€‚
3. **ä»€ä¹ˆæ˜¯P2Pæ³›å‹ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Œä¸¾ä¾‹è¯´æ˜ã€‚**

P2Pæ³›å‹æ˜¯ä¸€ç§æ— ä¸­å¿ƒæœåŠ¡å™¨çš„å¯¹ç­‰ç½‘ç»œæ³›å‹ï¼Œå³Peer-to-Peerçš„ç¼©å†™ï¼Œç¿»è¯‘ä¸ºç‚¹å¯¹ç‚¹æˆ–è€…ç«¯å¯¹ç«¯ï¼Œä¹Ÿç§°ä¸ºå¯¹ç­‰è®¡ç®—ã€‚P2Pæ˜¯ä¸€ç§ä»¥éé›†ä¸­åŒ–æ–¹å¼ä½¿ç”¨åˆ†å¸ƒå¼èµ„æºæ¥å®Œæˆä¸€äº›å…³é”®ä»»åŠ¡çš„ç³»ç»Ÿå’Œåº”ç”¨ã€‚

P2Pæ³›å‹çš„å®ç°åŸç†æ˜¯åˆ©ç”¨ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ˆPeerï¼‰æ—¢å¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯åˆå¯ä»¥ä½œä¸ºæœåŠ¡å™¨ï¼Œç›¸äº’ä¹‹é—´ç›´æ¥é€šä¿¡å’Œäº¤æ¢æ•°æ®ï¼Œè€Œä¸éœ€è¦ä¾èµ–äºä¸­å¿ƒæœåŠ¡å™¨ã€‚è¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å®¹é”™æ€§ã€æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚

ä¸¾ä¾‹ï¼šæ¯”ç‰¹å¸å°±æ˜¯ä¸€ä¸ªåŸºäºP2Pæ³›å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå®ƒä½¿ç”¨äº†ä¸€ç§å«åšåŒºå—é“¾çš„æŠ€æœ¯æ¥è®°å½•å’ŒéªŒè¯æ‰€æœ‰çš„äº¤æ˜“è®°å½•ï¼Œå¹¶é€šè¿‡å…±è¯†æœºåˆ¶æ¥ä¿è¯ç½‘ç»œä¸­å„ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ã€‚

4. **ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¡†æ¶ï¼Œå®ƒçš„ä¼˜åŠ¿ï¼Ÿ**

å¾®æœåŠ¡æ¡†æ¶æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºä¸€ç»„å°å‹çš„ã€è‡ªæ²»çš„ã€æ¾è€¦åˆçš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸï¼Œå¹¶ä¸”å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€æ‰©å±•å’Œæ›´æ–°ã€‚å¾®æœåŠ¡æ¡†æ¶çš„ä¼˜åŠ¿æœ‰ï¼š

+ æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€å¯æµ‹è¯•æ€§å’Œå¯å¤ç”¨æ€§
+ é™ä½äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œè€¦åˆåº¦
+ å¢å¼ºäº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§
+ æ”¯æŒäº†ä¸åŒæŠ€æœ¯æ ˆå’Œå¹³å°çš„é€‰æ‹©
+ ä¿ƒè¿›äº†å›¢é˜Ÿçš„åä½œå’Œäº¤ä»˜
5. **ä»€ä¹ˆæ˜¯Rest API (Http RestFul)å’ŒRPC çš„åŒºåˆ«ï¼Ÿ**

Rest API (Http RestFul)å’ŒRPCæ˜¯ä¸¤ç§ä¸åŒçš„é€šä¿¡åè®®å’Œæ¶æ„é£æ ¼ï¼Œå®ƒä»¬åœ¨ä»¥ä¸‹æ–¹é¢æœ‰æ‰€ä¸åŒï¼š

+ æ¶æ„é£æ ¼ï¼šRPCæ˜¯åŸºäºæœåŠ¡è°ƒç”¨çš„æ¶æ„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡è¿œç¨‹è°ƒç”¨å®ç°æ•°æ®ä¼ è¾“å’Œå¤„ç†ï¼›è€ŒRestFulæ˜¯åŸºäºèµ„æºçš„æ¶æ„ï¼Œå®¢æˆ·ç«¯é€šè¿‡URIè®¿é—®æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå¹¶ä½¿ç”¨HTTPæ–¹æ³•ï¼ˆå¦‚GETã€POSTã€PUTã€DELETEï¼‰è¿›è¡Œæ“ä½œã€‚
+ ä¼ è¾“åè®®ï¼šRPCå¯ä»¥ä½¿ç”¨å¤šç§ä¼ è¾“åè®®ï¼Œå¦‚TCPã€UDPã€HTTPç­‰ï¼Œè€ŒRestFulåªèƒ½ä½¿ç”¨HTTPä½œä¸ºä¼ è¾“åè®®ã€‚
+ æ•°æ®æ ¼å¼ï¼šRPCå¯ä»¥ä½¿ç”¨å¤šç§æ•°æ®æ ¼å¼ï¼Œå¦‚XMLã€JSONã€äºŒè¿›åˆ¶ç­‰ï¼Œè€ŒRestFulé€šå¸¸ä½¿ç”¨JSONæˆ–XMLä½œä¸ºæ•°æ®æ ¼å¼ã€‚
+ æ€§èƒ½ï¼šRPCç”±äºä½¿ç”¨äºŒè¿›åˆ¶æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“é‡æ›´å°ï¼Œæ€§èƒ½æ›´é«˜ï¼›è€ŒRestFulç”±äºä½¿ç”¨HTTPå°è£…æ•°æ®ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“é‡æ›´å¤§ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚

æ ¹æ®ä¸åŒçš„åœºæ™¯å’Œéœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚çš„é€šä¿¡åè®®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœéœ€è¦è·¨å¹³å°ã€è·¨è¯­è¨€ã€æ˜“äºç†è§£å’Œæ‰©å±•çš„æ¥å£ï¼Œå¯ä»¥é€‰æ‹©RestFulï¼›å¦‚æœéœ€è¦é«˜æ•ˆã€ç¨³å®šã€å®‰å…¨çš„æ¥å£ï¼Œå¯ä»¥é€‰æ‹©RPCã€‚

# [ChatCLI](/blog/qqrkfxr94rnpry6p) (March 7, 2023)

```shell
ffmpeg -i "oCam 56.mp4" -vf "setpts=0.25*PTS,scale=640:-1:flags=lanczos,split[s0][s1];[s0]palettegen=stats_mode=diff[p];[s1][p]paletteuse=new=1" -r 30 "oCam 56.gif"
```

# [typeflow](/blog/vz8fq164oaymiz6y) (March 2, 2023)

æœ€è¿‘ç”±gRPCçœ‹åˆ°äº†protobufï¼Œäº†è§£äº†ä¸€äº›IDLï¼Œæˆ‘ä¸å¤ªå–œæ¬¢ä»–ä»¬è¿™ç§code-gené£æ ¼

æˆ‘æƒ³å‘æ˜ä¸€ç§åºåˆ—åŒ–åè®®

+ å¯ä»¥åœ¨æ–‡ä»¶å¤´å®šä¹‰ç±»å‹æˆ–è€…å¦å¤–å®šä¹‰ç±»å‹
+ å®šä¹‰ç±»å‹ä¸ºï¼š`id`+`type`
+ `type`æ”¯æŒçº§è”çš„æ–¹å¼
+ æ•°æ®æ˜¯è¿ç»­çš„`id`+`len`+`data`ï¼Œå¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹åˆ™ä¸ç”¨`len`

---

typeå®šä¹‰éƒ¨åˆ†ï¼ˆç”¨jsonæè¿°ï¼Œä½†ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°æ”¹å˜ä¸º"ç±»å‹+(é•¿åº¦)+å€¼"çš„ç»“æ„

+ id
    - åˆ—è¡¨
    - object / structure
    - åŸºæœ¬æ•°æ®ç±»å‹â€¦â€¦
    - å‰©ä¸‹çš„æ‰éœ€è¦å®šä¹‰
+ sizeï¼ˆ0åˆ™ä¸ºä¸å›ºå®šï¼Œéœ€è¦å¡«ï¼‰
+ data: list
    - type: id
    - name: str

---

dataæ•°æ®éƒ¨åˆ†ï¼Œæ¯ä¸ªå•å…ƒä¸ºï¼š

+ ç”±idå¾—å€’typeï¼Œåä¸€ä¸ªä¸æ˜¯sizeå°±æ˜¯data
+ é€’å½’åœ°parse



+ ä¸€ä¸ªintä»£è¡¨typeå®šä¹‰éƒ¨åˆ†çš„é•¿åº¦
+ ä¸€ä¸ªæœ€åå¾—å‡ºçš„ int id
+ ä¸€ä¸ªä»£è¡¨ç±»å‹çš„
    - 0 structure
    - 1 bool
    - 2 int
    - 3 float
    - 1 string

å¯¹äºstructure

+ ä¸€ä¸ªintä»£è¡¨typeå®šä¹‰éƒ¨åˆ†çš„é•¿åº¦

---

1. Dataç±»ï¼Œç”¨ç±»å‹æ ‡æ³¨ã€‚è£…é¥°å™¨è¯†åˆ«ç±»å‹æ ‡æ³¨ï¼Œç”Ÿæˆæ ‘ç»“æ„ â€”â€” è¿™ä¸ªå¾ˆå®¹æ˜“
2. å¯ä»¥dumps()ä¸€ä¸ªDataç±»ï¼Œè¾“å‡ºä¸ºjson/binary
    1. è‡ªèº«id
    2. å±æ€§åï¼Œå±æ€§idï¼Œå±æ€§size
3. å¯ä»¥dumps()ä¸€ä¸ªDataå®ä¾‹
    1. å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œè¾“å‡º[ç±»å‹id]+[å¯èƒ½æœ‰size]+[bytes(self.data)]
    2. å¦‚æœä¸æ˜¯åŸºæœ¬ç±»å‹ï¼ˆæ˜¯å¯¹è±¡ç±»å‹ï¼‰
        1. ç¬¬ä¸‰éƒ¨åˆ†å˜æˆ[b"".join(i.encode() for i in ...)]
        2. ç¬¬äºŒéƒ¨åˆ†å¦‚æœéœ€è¦ï¼Œå°±å˜æˆlen(...)
    3. dumps()ä¸€ä¸ªDataå®ä¾‹å°±æ˜¯è°ƒç”¨å®ƒçš„encode()æ–¹æ³•
4. å¯ä»¥decodeä¸€ä¸ªäºŒè¿›åˆ¶ä¸²
    1. è¯»å…¶idï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œè¾“å‡ºå®ƒæœ¬èº«
    2. å¦‚æœæ˜¯å¯¹è±¡ç±»å‹ï¼Œé€ä¸ªå°†å®ƒçš„dataé“¾æ¥ä¸ºè‡ªå·±çš„å±æ€§

# [è§£æpdfçš„ä¸€äº›å°è¯•](/blog/czi6h33an3o3h3oc) (February 25, 2023)

+ ä½¿ç”¨`pdfplumber`

```python
import pdfplumber
from itertools import pairwise


class Document:
    def __init__(self, filename):
        self.pdf = pdfplumber.open(filename)

    def get_all_words(self):
        for page in self.pdf.pages:
            for word in page.extract_words():
                yield word["text"]

    def get_joined_tokens(self):
        for i, j in pairwise(self.get_all_words()):
            yield i + j

    def get_critical(self):
        for token in self.get_joined_tokens():
            if "ä¿¡æ¯æŠ€æœ¯" in token and "æŠ•å…¥" in token:
                print(f"\n {token} \n")
```

# [çˆ¬å–ä¸œæ–¹è¯åˆ¸ä¸Šçš„åˆ¸å•†æ•°æ®](/blog/ocbig39frg5azmge) (February 25, 2023)

ä»£ç å†™çš„æ¯”è¾ƒæ··ä¹±ï¼š

```python
from httpx import Client
from json import loads
from alive_progress import alive_it

client = Client(
    headers={
        "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50"
    }
)


def parse_broker(broker_id):
    url = f"http://emweb.securities.eastmoney.com/PC_HSF10/NewFinanceAnalysis/ZYZBAjaxNew?type=1&code={broker_id}"
    res = client.get(url)
    try:
        data: list = res.json()["data"]
    except KeyError:
        print(broker_id)
        return

    total = [i["TOTALOPERATEREVE"] for i in data]
    profit = [i["PARENTNETPROFIT"] for i in data]

    return total, profit


def get_brokers():
    url = "https://search-api-web.eastmoney.com/search/jsonp?cb=jQuery35105205651282387875_1677270053469&param=%7B%22uid%22%3A%22%22%2C%22keyword%22%3A%22%E8%AF%81%E5%88%B8%22%2C%22type%22%3A%5B%22codetableLabelWeb%22%5D%2C%22client%22%3A%22web%22%2C%22clientType%22%3A%22wap%22%2C%22clientVersion%22%3A%22curr%22%2C%22param%22%3A%7B%22codetableLabelWeb%22%3A%7B%22pageIndex%22%3A1%2C%22pageSize%22%3A50%2C%22preTag%22%3A%22%22%2C%22postTag%22%3A%22%22%2C%22isHighlight%22%3Afalse%2C%22label%22%3A%22AB_STOCK%22%7D%7D%7D&_=1677270053474"
    res = client.get(url)
    text = res.text
    json = text[text.index("(") + 1: text.index(")")]
    data = loads(json)
    ids = [i["securityType"][:2] + i["code"] for i in data["result"]["codetableLabelWeb"]["labelList"][0]["quoteList"]]
    return ids


if __name__ == '__main__':
    all_data = {i: parse_broker(i) for i in alive_it(get_brokers())}

```

ç»“æœä¸ºï¼š

```json
{
  "SH600030": [
    [
      76523716526.93,
      54382730241.56,
      43139697642.01,
      37220708075.49,
      43291634080.53,
      38001695917.06,
      56013436032.55,
      29197531133.19,
      16115272156.7
    ],
    [
      23099624927.77,
      14902324215.75,
      12228609723.82,
      9389895989.94,
      11433264545.6,
      10365168588.41,
      19799793374.33,
      11337193825.46,
      5243916979.11
    ]
  ],
  "SH600109": [
    [
      7126630308.69,
      6062801499.95,
      4349514734,
      3766119304.82,
      4390587320.59,
      4671462425.22,
      6748452672.79,
      2721722488.96,
      1546260843.9
    ],
    [
      2317318717,
      1862640224.66,
      1298539701.33,
      1010492527.44,
      1201432521.06,
      1298730528.61,
      2359776226.13,
      836489632.37,
      315915955.64
    ]
  ],
  "SH600369": [
    [
      3096080385.1,
      3169571453.97,
      3488837437.18,
      2744154393.47,
      3060764762.1,
      3631762015.75,
      8496799180.16,
      3674829197.88,
      1964126453.35
    ],
    [
      1038152895.95,
      1091487407.23,
      1042001454.67,
      226842591.87,
      668800161.74,
      917572729,
      3554650541.89,
      1339048940.41,
      630328806.7
    ]
  ],
  "SH600837": [
    [
      43205467448.92,
      38219828310.55,
      34860320039.44,
      23765014627.26,
      28221667163.35,
      28011014594.51,
      38086267720.37,
      17978474435.1,
      10454954029.51
    ],
    [
      12826517065.48,
      10875396346.26,
      9523247834.58,
      5211093198.87,
      8618423293.06,
      8043334519.3,
      15838850897.61,
      7710623597.6,
      4035024048.18
    ]
  ],
  "SH600906": [
    [
      2524296711.14,
      2049789593.71,
      1813260306.57,
      1460659256.36,
      1469446884.96,
      1826594490.25,
      3901471990.05,
      2019138077.72,
      1061354574.54
    ],
    [
      680476070.18,
      531912511.18,
      609173507,
      73632352.15,
      296796161.76,
      656518792.32,
      2044799148.99,
      832084944.53,
      231616429.41
    ]
  ],
  "SH600909": [
    [
      3483420429.82,
      3356521373.89,
      3231605381.54,
      1761325423.29,
      1917696780.54,
      1733047755.13,
      3816204907.49,
      1689616580.33,
      941343121.09
    ],
    [
      1424067013.48,
      1267903291.32,
      1108359114.76,
      553744956.32,
      649726827.62,
      602013378.58,
      1865072011.2,
      686113287.1,
      187193507.17
    ]
  ],
  "SH600918": [
    [
      13149669222.3,
      10352224019.84,
      9708987193.91,
      7025218940.45,
      8168926941.65,
      8347371893.3,
      15045289807.52,
      5874417405.85,
      4081226500
    ],
    [
      3200009354.36,
      2525298270.86,
      2249463067.12,
      1009145069.71,
      1795153414.05,
      2451977469.41,
      6062485984.47,
      1873533391.99,
      869628500
    ]
  ],
  "SH600958": [
    [
      24370394956.88,
      23133946765.29,
      19052097313.75,
      10303490892.44,
      10531511324.13,
      6876188934.65,
      15434705061.27,
      5499603011.02,
      3243936742.44
    ],
    [
      5371496261.61,
      2722988518.72,
      2435079764.1,
      1231013208.91,
      3553626384.73,
      2313974857.75,
      7325224517.53,
      2341671183.75,
      1007421947.97
    ]
  ],
  "SH600999": [
    [
      29428896087.24,
      24277670240.59,
      18708369944.73,
      11321611555.03,
      13353213641.86,
      11695453558.82,
      25291794057.95,
      11002468274.67,
      6089160550.68
    ],
    [
      11645065137.15,
      9491638796.98,
      7282380829.33,
      4424985940.97,
      5785955137.26,
      5403450595.57,
      10908748759.12,
      3850672721.41,
      2232090360.47
    ]
  ],
  "SH601059": [
    [
      3803275799.41,
      3162361349.94,
      2222965979.52,
      1658818758.06,
      1762887403.74,
      2242660878.57,
      5234510738.09,
      3097204862.03,
      1661336185.25
    ],
    [
      1171719584.88,
      819688097.83,
      210067991.93,
      69957389.3,
      172176509.45,
      435328833.94,
      2082044520.29,
      913783708.6,
      324659377.97
    ]
  ],
  "SH601108": [
    [
      6407610366.67,
      6528040616.43,
      4952243604.81,
      3167998370.32,
      4016866764.74,
      4255580080.75,
      10241340331.37,
      4502280609.9,
      2259136500
    ],
    [
      2566175327.88,
      2291596618.3,
      1873062523.33,
      818836066.51,
      1503931618.18,
      1785885436.51,
      3075405936.63,
      855682830.24,
      326433600
    ]
  ],
  "SH601136": [
    [
      2113493479.32,
      1657983958.5,
      1339618763.5,
      815247500,
      930567402.63,
      1102020020.79,
      1633423521.59,
      779189943.03,
      436445716.61
    ],
    [
      858599660.48,
      610616529.86,
      433970302.57,
      174816400,
      315419298.15,
      422830229.13,
      716586155.66,
      273283091.03,
      145426328.76
    ]
  ],
  "SH601162": [
    [
      4405719313.76,
      4359629544.39,
      3846100730.48,
      3277404101.33,
      2986161700.23,
      3097919718.74,
      3213163664.24,
      1112169600.14,
      668629269.05
    ],
    [
      586354789.34,
      454871365.71,
      307767555.05,
      302851495.02,
      410130726.93,
      671567746.98,
      937586413.65,
      207746164.65,
      100802284.59
    ]
  ],
  "SH601198": [
    [
      5375748343.46,
      5687210822.32,
      4474704697.42,
      3314496768.38,
      3633172002.15,
      3573200156.02,
      5363008065.25,
      2597774148.38,
      2033866487.14
    ],
    [
      1652243606.93,
      1539672462.5,
      1220698859.37,
      1008047034.4,
      1309249598.89,
      1352929314.59,
      2044690319.02,
      1040597699.34,
      668493992.39
    ]
  ],
  "SH601236": [
    [
      6733758206.26,
      5585163238.85,
      2065728507.8,
      1201433406.34,
      1114215786.02,
      975655348.13,
      1974885800,
      1214603799.66,
      764936044.28
    ],
    [
      1576229463.11,
      1413122029.42,
      837541304.24,
      386464525.52,
      363082587.7,
      332827972,
      1042533800,
      475496800.72,
      218206973.48
    ]
  ],
  "SH601375": [
    [
      4420848497.96,
      3103301696.87,
      2372526991.25,
      1649661561.68,
      2147620089.37,
      2008852561.18,
      4004355251.9,
      1808216779.12,
      1165234691.42
    ],
    [
      513210337.25,
      104302038.78,
      58222745.44,
      65787558.62,
      441982592.67,
      718646243.11,
      1405500406.97,
      562290151.78,
      252934345.88
    ]
  ],
  "SH601377": [
    [
      18972168754.91,
      17579687208.8,
      14249535861.49,
      6499373437.14,
      8820388610.14,
      7588604128.9,
      11540612657.75,
      5609064896.32,
      3099526553.02
    ],
    [
      4743070343.36,
      4003314315.75,
      1762537169.01,
      135348071.2,
      2284896126.79,
      2046321431.54,
      4167150649.35,
      1781589789.14,
      669769790.41
    ]
  ],
  "SH601456": [
    [
      2966631400.54,
      1876340313.32,
      1619382372.77,
      989719000,
      1262535000,
      1836463830.87,
      3079072000,
      1668332000,
      1000977188.45
    ],
    [
      888639753.44,
      587871418.22,
      521344151.14,
      50588000,
      361492000,
      610067590.12,
      1471438000,
      714955000,
      269761799.58
    ]
  ],
  "SH601555": [
    [
      9245491796.09,
      7356492441.1,
      5130373462.68,
      4161925425.29,
      4144240488.37,
      4645225993.82,
      6830161925.32,
      3240982527.87,
      1609668051.56
    ],
    [
      2391778941.16,
      1707245952.72,
      1037174921.82,
      358411175.29,
      788122751.35,
      1498288506.38,
      2708494901.88,
      1115452050.88,
      392166585.94
    ]
  ],
  "SH601688": [
    [
      37905443652.44,
      31444546120.28,
      24863012026.33,
      16108262271.57,
      21108534070.71,
      16925935043.92,
      26261939871.49,
      12062303844.09,
      7182298873.45
    ],
    [
      13346106674.68,
      10822496891,
      9001644018.52,
      5032737702.7,
      9276520447.68,
      6270611459.43,
      10696870875.92,
      4486276132.08,
      2219735131.23
    ]
  ],
  "SH601696": [
    [
      3333518749.21,
      3244172276.95,
      2907667567.52,
      2755098098.64,
      3067525846.44,
      2830493647.57,
      4947783600,
      2578182507.77,
      1290676825.47
    ],
    [
      961625314.57,
      883226868.37,
      798252971.86,
      704986351.02,
      1067129839.52,
      1065698139.13,
      2076890000,
      971638637.24,
      317617721.19
    ]
  ],
  "SH601788": [
    [
      16706575061.43,
      15866343425.84,
      10057362378.64,
      7712277101.82,
      9838147762.07,
      9164639102.5,
      16571087246.74,
      6601422929.86,
      4019623600.22
    ],
    [
      3484331817.14,
      2334078122.69,
      567944886.3,
      103322859.82,
      3016470221.54,
      3013019180.75,
      7646516077.13,
      2068307502.08,
      205836529.58
    ]
  ],
  "SH601878": [
    [
      16418113012.51,
      10636513832.41,
      5659478638.09,
      3694801371.08,
      4610873972.96,
      4594902987.59,
      6188903157.42,
      3226844444.08,
      1914709864.7
    ],
    [
      2195682763.42,
      1627166025.65,
      967557059.43,
      736957357.88,
      1063507778.68,
      1240892309.04,
      1834457999.29,
      750242395.43,
      403230607.26
    ]
  ],
  "SH601901": [
    [
      8621202071.85,
      7541809241.46,
      6594941981.46,
      5722593356.59,
      5961533467.39,
      7759738629.42,
      10914989706.62,
      4899699230.06,
      3453058407.18
    ],
    [
      1822282069.48,
      1096492270.9,
      1007595631.59,
      661365890.51,
      1452957913.42,
      2569336882.57,
      4064211991.64,
      1796097769.62,
      1112201945.05
    ]
  ],
  "SH601990": [
    [
      2741633842.89,
      2365296802.01,
      2201777265.63,
      1233927907.56,
      1388473496.81,
      1499611313.01,
      3000069643.36,
      1421284600,
      1014937100
    ],
    [
      977274472.85,
      809594147.08,
      709811700.41,
      231780216.69,
      410602756.36,
      493557293.51,
      1413026763.57,
      554444200,
      270930200
    ]
  ],
  "SZ000562": [
    [
      4118510581.83,
      3295868934.67,
      2353703631.17,
      3304715081.65,
      2919903998.54,
      1598468309.64,
      4435140101.43,
      743496322.22,
      -16990504.61
    ],
    [
      1227292426.2,
      867680007.09,
      645591117.7,
      1306379570.94,
      1151650925.85,
      541647861.52,
      2038300442.53,
      319354764.8,
      8222470.93
    ]
  ],
  "SZ000686": [
    [
      7477801881.89,
      6609613343.83,
      7968795586.85,
      6780105834.67,
      4934452308.92,
      4481994658.63,
      6745760224.97,
      3090984262.41,
      1767040160.7
    ],
    [
      1623994253.62,
      1333325683.24,
      1007080243.05,
      301352976.41,
      666946558.98,
      1314941187.9,
      2630058890.07,
      1060025355.59,
      480057377.95
    ]
  ],
  "SZ000728": [
    [
      6109751584.75,
      4528625617.88,
      3198808368.09,
      2537907348.38,
      3510702162.26,
      3375696421.01,
      5773382071.47,
      3486036145.6,
      1986134237.63
    ],
    [
      1909272808.14,
      1370096738.86,
      914361564.54,
      670370829.86,
      1203746140.88,
      1405404397.83,
      2784229089.24,
      1371744662.42,
      665338486.33
    ]
  ],
  "SZ000750": [
    [
      5170261555.13,
      4482015217.4,
      3560208077.82,
      2122602077.8,
      2658882600.15,
      3837926394.16,
      4959157199.17,
      2544981928.34,
      1818760812.32
    ],
    [
      764619396.32,
      725376273.77,
      487716781.47,
      73142828.57,
      375760243.11,
      1015511746.44,
      1792923492.86,
      690035776.56,
      308745854.57
    ]
  ],
  "SZ000776": [
    [
      34249988400.75,
      29153488259.04,
      22809882495.06,
      15270373023.59,
      21639300625.74,
      20714347818.02,
      33446639919.41,
      13394972903.67,
      8207540703.98
    ],
    [
      10854115527.4,
      10038134647.91,
      7538921643.02,
      4300126341.29,
      8595399060.76,
      8030106628.93,
      13201014064.72,
      5022567778.39,
      2812501034.32
    ]
  ],
  "SZ000783": [
    [
      8623165139.08,
      7784121537.42,
      7032892044.09,
      4369208710.77,
      5664107738.63,
      5857472375.4,
      8499643780.49,
      4548208653.84,
      3047682604.6
    ],
    [
      2409539473.91,
      2085377418.25,
      1665799971.58,
      257201958.69,
      1545112374.32,
      2206576040.14,
      3493365230.21,
      1705439086.94,
      1006554243.06
    ]
  ],
  "SZ002500": [
    [
      3993936447,
      3341972041,
      5102180737,
      6851136626,
      4392996390,
      2345649721,
      3838500324,
      1959188535,
      1321203859
    ],
    [
      803609850,
      750927346,
      510183708,
      221763054,
      408901264,
      467685616,
      1438829425,
      586294710,
      261755432
    ]
  ],
  "SZ002673": [
    [
      6751022663.82,
      5184163900.03,
      3680544587.4,
      2237341729.03,
      3169944961.76,
      3406329331.96,
      5640878792.18,
      1938470480.53,
      1132328589.81
    ],
    [
      1409991295.62,
      1117003407.01,
      610163902.78,
      200433916.35,
      752270907.74,
      1124621115.06,
      1972662987.16,
      663854622.42,
      275147001.3
    ]
  ],
  "SZ002736": [
    [
      23818037003.89,
      18784071244.98,
      14092914615.73,
      10030931922.89,
      11923610192.94,
      12746787440.92,
      29139131599.01,
      11792322619.69,
      6771922266.26
    ],
    [
      10114758795.89,
      6615739471.11,
      4910187206.37,
      3423396646.18,
      4574777573.93,
      4556152321.66,
      13949033996.79,
      4927564849.42,
      2101743057.35
    ]
  ],
  "SZ002926": [
    [
      5121995492.55,
      4682755761.6,
      3937424572.74,
      2545233363.8,
      2671626421.94,
      2710412262.05,
      6010918733.46,
      3168013932.48,
      1966121259.41
    ],
    [
      1632123985.51,
      1900327802.56,
      1431530824.81,
      845132348.07,
      1019124805.62,
      1666499975.29,
      2681090347,
      691276329.52,
      654193170.15
    ]
  ],
  "SZ002939": [
    [
      7756796088.56,
      6868697463.16,
      3899142493.53,
      2753299922.53,
      2957833928.02,
      3483558655.04,
      5012184673.07,
      2470089178.92,
      1550385558.88
    ],
    [
      1765610928.44,
      1501641468.72,
      992167143.29,
      585699848.79,
      889834897.37,
      973292578.86,
      1828276010.88,
      720553874.51,
      390940683.1
    ]
  ],
  "SZ002945": [
    [
      1395355967.1,
      1489800611.89,
      1010603099.5,
      1000843794.61,
      1067185983.74,
      1318353295.03,
      1668857767.74,
      706314130.44,
      643707107.24
    ],
    [
      483726211.7,
      812496331.45,
      441666561.99,
      344672483.7,
      463150384.86,
      589118277.95,
      815994245.57,
      188093452.91,
      77059907.92
    ]
  ]
}
```

# [ã€Šç”Ÿç‰©å¤§æ•°æ®ã€‹æ—é­](/blog/cgz83x2x8h9uogg6) (February 24, 2023)

1. ç»„å­¦æ•°æ®çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ
2. å‚è€ƒåŸºå› ç»„æ•°æ®çš„æ¨¡å‹ä¸åŸºæœ¬è¿ç®—
3. è½¬å½•ç»„æ•°æ®çš„åŸºæœ¬æ¨¡å‹ä¸åˆ†æ
4. æ–°è¿›å±•
    1. ç»„å­¦æ•°æ®æ•´åˆçš„åŸºæœ¬æ¡†æ¶ä¸åˆ†æ
    2. ç¾¤ä½“æ³›åŸºå› ç»„çš„åŸºæœ¬æ•°æ®ç»“æ„ä¸åˆ†æ